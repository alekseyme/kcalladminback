{"version":3,"sources":["redux/reducers/projects.js","redux/reducers/index.js","redux/store.js","redux/actions/projects.js","components/Loader.jsx","components/ExportButton.jsx","components/ReloadButton.jsx","components/TableControls.jsx","components/EditingModalForm.jsx","components/AudioPlayere.jsx","components/ProjectTable.jsx","pages/Main/Main.jsx","components/Logout.jsx","components/UserBlock.jsx","pages/Home.jsx","components/ResourceHeader.jsx","pages/Project/EditProject.jsx","pages/Project/CreateProject.jsx","pages/Project/Project.jsx","pages/User/User.jsx","pages/User/CreateUser.jsx","pages/User/EditUser.jsx","pages/Auth/Login.jsx","components/AuthLoader.jsx","App.jsx","index.js"],"names":["initialState","activeProject","projectLoading","tableLoading","tableColumns","projectStatuses","tableData","tablePaginationConfig","searchParams","userInfo","pizzas","state","action","type","payload","rootReducer","combineReducers","projects","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","setUserInfo","setProjectLoading","setTableLoading","setTableData","setSearchParams","fetchActiveProject","parameters","dispatch","params","project","axios","post","then","data","tableConfig","total","paginate","current_page","per_page","statuses","map","status","value","setProjectStatuses","catch","message","error","finally","Loader","style","textAlign","marginTop","ExportButton","React","useState","isLoading","setIsLoading","loading","onClick","fields","base_row","split","csvData","headerArr","base_header","wb","XLSX","book_new","ws","json_to_sheet","sheet_add_aoa","sheet_add_json","origin","skipHeader","book_append_sheet","label","Date","now","newExport","icon","DownloadOutlined","ReloadButton","useDispatch","marginRight","TableControls","useSelector","className","TextArea","Input","EditingModalForm","onCreate","onCancel","formRows","editingRow","confirmLoading","Form","useForm","form","useEffect","obj","prop","setFieldsValue","id","title","visible","width","mask","closable","okText","cancelText","onOk","validateFields","record","recordWithId","warning","name","labelCol","span","row","inputNode","dataIndex","rows","editable","disabled","Item","rules","required","AudioPlayere","src","controls","url","ProjectTable","setEditingRow","audioSavingId","setAudioSavingId","setConfirmLoading","audioSource","setAudioSource","rowAudio","setRowAudio","onChangeTablePage","page","pageSize","a","scrollTo","top","behavior","from","to","phone","columns","isadmin","username","render","_","size","Link","EditTwoTone","fontSize","content","trigger","request_id","method","responseType","URL","createObjectURL","newArr","playAudio","PlayCircleTwoTone","twoToneColor","correctTime","time","replace","fileDownload","number","downloadAudio","LoadingOutlined","rowKey","dataSource","pagination","position","current","onChange","hideOnSinglePage","bordered","editRow","patch","success","newTableData","item","Main","projectList","setProjectList","searchForm","tablename","resetSearch","resetFields","getTableRowWidth","onFinish","fieldsValue","operator","length","slice","values","format","autoComplete","initialValues","moment","layout","placeholder","prefix","PhoneOutlined","color","rotate","allowClear","UserOutlined","options","htmlType","showSearch","marginLeft","optionFilterProp","optionObj","rowArr","tableCols","col","i","setTableColumns","filterOption","input","option","toLowerCase","indexOf","marginBottom","duration","Logout","onLogout","history","useHistory","localStorage","clear","push","console","log","ExportOutlined","UserBlock","userName","getItem","menu","Divider","fontWeight","overlay","placement","backgroundColor","Header","Layout","Content","Home","onSuccessLogout","location","useLocation","isAdmin","theme","mode","defaultSelectedKeys","pathname","HomeOutlined","ProjectOutlined","exact","path","CreateUser","ResourceHeader","lintText","padding","EditProject","userList","setUsertList","projectUser","setProjectUser","isLoadingPage","setIsLoadingPage","initValues","setInitvalues","useParams","get","newData","user","users","newProject","put","tooltip","valuePropName","defaultValue","CreateProject","setUserList","changes","checkedValues","Project","key","CheckCircleTwoTone","CloseCircleTwoTone","e","projectId","thisButton","currentTarget","innerText","delete","newProjectList","filter","onDeleteProject","User","userId","newUserList","onDeleteUser","newPwd","prompt","userid","password","onResetPassword","Password","EditUser","setInitValues","newUser","Login","onLogin","setItem","response","LockOutlined","AuthLoader","display","justifyContent","alignItems","height","App","isLoggedin","setIsLoggedin","checkAuth","setCheckAuth","defaults","baseURL","withCredentials","ReactDOM","StrictMode","locale","ruRU","document","getElementById"],"mappings":"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","file":"static/js/main.c1fa4a09.chunk.js","sourcesContent":["const initialState = {\r\n\tactiveProject: null,\r\n\tprojectLoading: false,\r\n\ttableLoading: false,\r\n\ttableColumns: [],\r\n\tprojectStatuses: [],\r\n\ttableData: null,\r\n\ttablePaginationConfig: null,\r\n\tsearchParams: null,\r\n\tuserInfo: null,\r\n};\r\n\r\nconst pizzas = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase 'SET_USER_INFO':\r\n\t\t\treturn { ...state, userInfo: action.payload };\r\n\r\n\t\tcase 'SET_ACTIVE_PROJECT':\r\n\t\t\treturn { ...state, activeProject: action.payload };\r\n\r\n\t\tcase 'SET_PROJECT_LOADING':\r\n\t\t\treturn { ...state, projectLoading: action.payload };\r\n\r\n\t\tcase 'SET_PROJECT_STATUSES':\r\n\t\t\treturn { ...state, projectStatuses: action.payload };\r\n\r\n\t\tcase 'SET_TABLE_LOADING':\r\n\t\t\treturn { ...state, tableLoading: action.payload };\r\n\r\n\t\tcase 'SET_TABLE_COLUMNS':\r\n\t\t\treturn { ...state, tableColumns: action.payload };\r\n\r\n\t\tcase 'SET_TABLE_DATA':\r\n\t\t\treturn { ...state, tableData: action.payload };\r\n\r\n\t\tcase 'RESET_TABLE_DATA':\r\n\t\t\treturn { ...state, tableData: null };\r\n\r\n\t\tcase 'RESET_STORAGE':\r\n\t\t\treturn { ...initialState };\r\n\r\n\t\tcase 'SET_TABLE_PAGINATIONCONFIG':\r\n\t\t\treturn { ...state, tablePaginationConfig: action.payload };\r\n\r\n\t\tcase 'SET_SEARCH_PARAMS':\r\n\t\t\treturn { ...state, searchParams: action.payload };\r\n\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n\r\nexport default pizzas;\r\n","import { combineReducers } from 'redux';\r\n\r\nimport projects from './projects';\r\n\r\nconst rootReducer = combineReducers({\r\n\tprojects,\r\n});\r\n\r\nexport default rootReducer;\r\n","import { createStore, compose, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\n\r\nimport rootReducer from './reducers';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)));\r\n\r\nexport default store;\r\n","import axios from 'axios';\r\nimport { message } from 'antd';\r\n\r\nexport const setUserInfo = (payload) => ({\r\n\ttype: 'SET_USER_INFO',\r\n\tpayload,\r\n});\r\n\r\nexport const setActiveProject = (payload) => ({\r\n\ttype: 'SET_ACTIVE_PROJECT',\r\n\tpayload,\r\n});\r\n\r\nexport const setProjectLoading = (payload) => ({\r\n\ttype: 'SET_PROJECT_LOADING',\r\n\tpayload,\r\n});\r\n\r\nexport const setProjectStatuses = (payload) => ({\r\n\ttype: 'SET_PROJECT_STATUSES',\r\n\tpayload,\r\n});\r\n\r\nexport const setTableLoading = (payload) => ({\r\n\ttype: 'SET_TABLE_LOADING',\r\n\tpayload,\r\n});\r\n\r\nexport const setTableColumns = (payload) => ({\r\n\ttype: 'SET_TABLE_COLUMNS',\r\n\tpayload,\r\n});\r\n\r\nexport const setTableData = (payload) => ({\r\n\ttype: 'SET_TABLE_DATA',\r\n\tpayload,\r\n});\r\n\r\nexport const resetTableData = () => ({\r\n\ttype: 'RESET_TABLE_DATA',\r\n});\r\n\r\nexport const setTablePaginationConfig = (payload) => ({\r\n\ttype: 'SET_TABLE_PAGINATIONCONFIG',\r\n\tpayload,\r\n});\r\n\r\nexport const setSearchParams = (payload) => ({\r\n\ttype: 'SET_SEARCH_PARAMS',\r\n\tpayload,\r\n});\r\n\r\nexport const resetStorage = () => ({\r\n\ttype: 'RESET_STORAGE',\r\n});\r\n\r\nexport const fetchActiveProject = (parameters, activeProject) => (dispatch) => {\r\n\tconst params = parameters || { project: activeProject };\r\n\r\n\taxios\r\n\t\t.post('/project/search', params)\r\n\t\t.then(({ data }) => {\r\n\t\t\tconst tableConfig = {\r\n\t\t\t\ttotal: data.paginate.total,\r\n\t\t\t\tcurrent_page: data.paginate.current_page,\r\n\t\t\t\tper_page: data.paginate.per_page,\r\n\t\t\t};\r\n\r\n\t\t\tconst statuses = data.statuses.map((status) => {\r\n\t\t\t\treturn { value: status };\r\n\t\t\t});\r\n\r\n\t\t\tdispatch(setTablePaginationConfig(tableConfig));\r\n\t\t\tdispatch(setTableData(data.paginate.data));\r\n\t\t\tdispatch(setProjectStatuses(statuses));\r\n\t\t})\r\n\t\t.catch(() => message.error('Ошибка запроса'))\r\n\t\t.finally(() => {\r\n\t\t\tdispatch(setTableLoading(false));\r\n\t\t\tdispatch(setProjectLoading(false));\r\n\t\t});\r\n};\r\n","import React from 'react';\r\nimport { Spin } from 'antd';\r\n\r\nconst Loader = () => {\r\n\treturn (\r\n\t\t<div style={{ textAlign: 'center', marginTop: '20px' }}>\r\n\t\t\t<Spin />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Loader;\r\n","import React from 'react';\r\nimport { Button } from 'antd';\r\nimport { DownloadOutlined } from '@ant-design/icons';\r\nimport * as XLSX from 'xlsx';\r\nimport axios from 'axios';\r\n\r\nconst ExportButton = ({ activeProject, searchParams }) => {\r\n\tconst [isLoading, setIsLoading] = React.useState(false);\r\n\r\n\tconst fileExtension = '.xlsx';\r\n\r\n\tconst newExport = (csvData) => {\r\n\t\tconst headerArr = activeProject.base_header.split(',');\r\n\r\n\t\tconst wb = XLSX.utils.book_new();\r\n\t\tconst ws = XLSX.utils.json_to_sheet([]);\r\n\t\tXLSX.utils.sheet_add_aoa(ws, [headerArr]);\r\n\t\tXLSX.utils.sheet_add_json(ws, csvData, { origin: 'A2', skipHeader: true });\r\n\t\tXLSX.utils.book_append_sheet(wb, ws, activeProject.label);\r\n\t\tXLSX.writeFile(wb, activeProject.label + `_${Date.now()}` + fileExtension);\r\n\t};\r\n\r\n\tconst fetchData = () => {\r\n\t\tsetIsLoading(true);\r\n\t\tconst params = {\r\n\t\t\t...searchParams,\r\n\t\t\tproject: activeProject.value,\r\n\t\t\tfields: activeProject.base_row.split(','),\r\n\t\t};\r\n\t\taxios\r\n\t\t\t.post('/project/export', params)\r\n\t\t\t.then(({ data }) => newExport(data))\r\n\t\t\t.finally(() => setIsLoading(false));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Button loading={isLoading} onClick={fetchData} icon={<DownloadOutlined />}>\r\n\t\t\tЭкспорт\r\n\t\t</Button>\r\n\t);\r\n};\r\n\r\nexport default ExportButton;\r\n","import React from 'react';\r\nimport { Button } from 'antd';\r\n\r\nimport { fetchActiveProject, setTableLoading } from '../redux/actions/projects';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nconst ReloadButton = ({ activeProject }) => {\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst reloadActiveProject = () => {\r\n\t\tdispatch(setTableLoading(true));\r\n\t\tdispatch(fetchActiveProject(null, activeProject.value));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Button style={{ marginRight: 8 }} onClick={reloadActiveProject}>\r\n\t\t\tОбновить\r\n\t\t</Button>\r\n\t);\r\n};\r\n\r\nexport default ReloadButton;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport ExportButton from './ExportButton';\r\nimport ReloadButton from './ReloadButton';\r\n\r\nconst TableControls = () => {\r\n\tconst { activeProject, tablePaginationConfig, searchParams } = useSelector(\r\n\t\t({ projects }) => projects,\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div className=\"project-actions\">\r\n\t\t\t<div>\r\n\t\t\t\t<span>Всего записей:</span> {tablePaginationConfig.total}\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<ReloadButton activeProject={activeProject} />\r\n\t\t\t\t<ExportButton activeProject={activeProject} searchParams={searchParams} />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default TableControls;\r\n","import React from 'react';\r\nimport { Input, Form, Modal, message } from 'antd';\r\n\r\nconst { TextArea } = Input;\r\n\r\nconst EditingModalForm = ({ onCreate, onCancel, formRows, editingRow, confirmLoading }) => {\r\n\tconst [form] = Form.useForm();\r\n\r\n\tReact.useEffect(() => {\r\n\t\tconst obj = {};\r\n\r\n\t\tfor (let prop in editingRow) {\r\n\t\t\tif (editingRow[prop] === '') {\r\n\t\t\t\tobj[prop] = '-';\r\n\t\t\t} else {\r\n\t\t\t\tobj[prop] = editingRow[prop];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tform.setFieldsValue({\r\n\t\t\tid: '',\r\n\t\t\ttitle: '',\r\n\t\t\t...obj,\r\n\t\t}); // eslint-disable-next-line\r\n\t}, []);\r\n\r\n\tconst onOk = () => {\r\n\t\tform.validateFields()\r\n\t\t\t.then((record) => {\r\n\t\t\t\tconst recordWithId = {\r\n\t\t\t\t\tid: editingRow.id,\r\n\t\t\t\t\t...record,\r\n\t\t\t\t};\r\n\t\t\t\tonCreate(recordWithId);\r\n\t\t\t})\r\n\t\t\t.catch(() => message.warning('Проверьте правильность заполненных полей'));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\tvisible={true}\r\n\t\t\twidth=\"600px\"\r\n\t\t\tmask={false}\r\n\t\t\tclosable={false}\r\n\t\t\ttitle=\"Редактировать запись\"\r\n\t\t\tokText=\"Обновить\"\r\n\t\t\tcancelText=\"Отмена\"\r\n\t\t\tonCancel={onCancel}\r\n\t\t\tconfirmLoading={confirmLoading}\r\n\t\t\tonOk={onOk}>\r\n\t\t\t<Form form={form} name=\"form_in_modal\" labelCol={{ span: 6 }}>\r\n\t\t\t\t{formRows.map((row) => {\r\n\t\t\t\t\tconst inputNode =\r\n\t\t\t\t\t\trow.dataIndex === 'content' ? (\r\n\t\t\t\t\t\t\t<TextArea rows={3} className=\"form-modal-textarea\" />\r\n\t\t\t\t\t\t) : row.editable === false ? (\r\n\t\t\t\t\t\t\t<Input disabled={true} />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\tif (row.editable === true) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tkey={row.dataIndex}\r\n\t\t\t\t\t\t\t\tname={row.dataIndex}\r\n\t\t\t\t\t\t\t\tlabel={row.title}\r\n\t\t\t\t\t\t\t\trules={[\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\t\tmessage: `Введите ${row.title}`,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t]}>\r\n\t\t\t\t\t\t\t\t{inputNode}\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t})}\r\n\t\t\t</Form>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\nexport default EditingModalForm;\r\n","import React from 'react';\r\n\r\nconst AudioPlayere = ({ src }) => {\r\n\treturn <audio controls src={src?.url}></audio>;\r\n};\r\n\r\nexport default AudioPlayere;\r\n","import React from 'react';\r\nimport { Table, Typography, Divider, Popover, Space, message } from 'antd';\r\nimport {\r\n\tEditTwoTone,\r\n\tDownloadOutlined,\r\n\tLoadingOutlined,\r\n\tPlayCircleTwoTone,\r\n} from '@ant-design/icons';\r\nimport axios from 'axios';\r\nimport fileDownload from 'js-file-download';\r\n\r\nimport { fetchActiveProject, setTableLoading, setTableData } from '../redux/actions/projects';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nimport EditingModalForm from './EditingModalForm';\r\nimport AudioPlayere from './AudioPlayere';\r\n\r\nconst ProjectTable = () => {\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst [editingRow, setEditingRow] = React.useState(null);\r\n\tconst [audioSavingId, setAudioSavingId] = React.useState(null);\r\n\tconst [confirmLoading, setConfirmLoading] = React.useState(false);\r\n\tconst [audioSource, setAudioSource] = React.useState(null);\r\n\tconst [rowAudio, setRowAudio] = React.useState({});\r\n\r\n\tconst {\r\n\t\tactiveProject,\r\n\t\ttableLoading,\r\n\t\ttableColumns,\r\n\t\ttablePaginationConfig,\r\n\t\ttableData,\r\n\t\tsearchParams,\r\n\t\tuserInfo,\r\n\t} = useSelector(({ projects }) => projects);\r\n\r\n\tconst onCreate = (record) => {\r\n\t\tsetConfirmLoading(true);\r\n\t\tconst editRow = {\r\n\t\t\tproject: activeProject.value,\r\n\t\t\t...record,\r\n\t\t};\r\n\r\n\t\taxios\r\n\t\t\t.patch(`/project/editrow/${record.id}`, editRow)\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tmessage.success(data.message);\r\n\t\t\t\tconst newTableData = tableData.map((item) => {\r\n\t\t\t\t\tif (item.id === record.id) {\r\n\t\t\t\t\t\treturn { ...data.row };\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t});\r\n\t\t\t\tdispatch(setTableData(newTableData));\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\tmessage.error('Произошла ошибка');\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tsetConfirmLoading(false);\r\n\t\t\t\tsetEditingRow(null);\r\n\t\t\t});\r\n\t};\r\n\r\n\tconst onChangeTablePage = async (page, pageSize) => {\r\n\t\tdispatch(setTableLoading(true));\r\n\t\tif (pageSize > 15) {\r\n\t\t\twindow.scrollTo({\r\n\t\t\t\ttop: 172,\r\n\t\t\t\tbehavior: 'smooth',\r\n\t\t\t});\r\n\t\t}\r\n\t\tconst parameters = {\r\n\t\t\tproject: activeProject.value,\r\n\t\t\tpage: page,\r\n\t\t\tper_page: pageSize,\r\n\t\t\tfrom: searchParams ? searchParams.from : null,\r\n\t\t\tto: searchParams ? searchParams.to : null,\r\n\t\t\tphone: searchParams ? searchParams.phone : null,\r\n\t\t\tstatus: searchParams ? searchParams.status : null,\r\n\t\t};\r\n\t\tdispatch(fetchActiveProject(parameters));\r\n\t};\r\n\r\n\tconst downloadAudio = (record) => {\r\n\t\tsetAudioSavingId(record.id);\r\n\t\tconst correctTime = record.time.replace(/[^\\d]/g, '_');\r\n\t\taxios({\r\n\t\t\turl: `/da/${record.request_id}`,\r\n\t\t\tmethod: 'POST',\r\n\t\t\tresponseType: 'blob',\r\n\t\t})\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tfileDownload(data, correctTime + '_' + record.number + '.mp3');\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tsetAudioSavingId(null);\r\n\t\t\t});\r\n\t};\r\n\r\n\tconst playAudio = (record) => {\r\n\t\tif (rowAudio[record.id]) {\r\n\t\t\tif (rowAudio[record.id] === audioSource.url) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tsetAudioSource({\r\n\t\t\t\tid: record.id,\r\n\t\t\t\turl: rowAudio[record.id],\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetAudioSource(null);\r\n\t\taxios({\r\n\t\t\turl: `/da/${record.request_id}`,\r\n\t\t\tmethod: 'POST',\r\n\t\t\tresponseType: 'blob',\r\n\t\t}).then(({ data }) => {\r\n\t\t\tconst url = URL.createObjectURL(data);\r\n\t\t\tsetAudioSource({\r\n\t\t\t\tid: record.id,\r\n\t\t\t\turl: url,\r\n\t\t\t});\r\n\r\n\t\t\tconst newArr = {\r\n\t\t\t\t...rowAudio,\r\n\t\t\t\t[record.id]: url,\r\n\t\t\t};\r\n\t\t\tsetRowAudio(newArr);\r\n\t\t});\r\n\t};\r\n\r\n\tconst columns =\r\n\t\tuserInfo.isadmin === 1 || userInfo.username === 'supervisor'\r\n\t\t\t? [\r\n\t\t\t\t\t...tableColumns,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: '#',\r\n\t\t\t\t\t\tdataIndex: 'actions',\r\n\t\t\t\t\t\twidth: 35, //def 122, mid 35\r\n\t\t\t\t\t\trender: (_, record) => (\r\n\t\t\t\t\t\t\t<Space split={<Divider type=\"vertical\" />} size={1}>\r\n\t\t\t\t\t\t\t\t<Typography.Link onClick={() => setEditingRow(record)}>\r\n\t\t\t\t\t\t\t\t\t<EditTwoTone style={{ fontSize: 18 }} />\r\n\t\t\t\t\t\t\t\t</Typography.Link>\r\n\t\t\t\t\t\t\t\t{userInfo.isadmin === 1 ? (\r\n\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t<Popover\r\n\t\t\t\t\t\t\t\t\t\t\tcontent={\r\n\t\t\t\t\t\t\t\t\t\t\t\taudioSource &&\r\n\t\t\t\t\t\t\t\t\t\t\t\taudioSource.url === rowAudio[audioSource.id] ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<AudioPlayere src={audioSource} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'загрузка'\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\ttrigger=\"click\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Typography.Link onClick={() => playAudio(record)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<PlayCircleTwoTone\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ fontSize: 18 }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttwoToneColor={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecord.id === audioSource?.id\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? '#52c41a'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: false\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Typography.Link>\r\n\t\t\t\t\t\t\t\t\t\t</Popover>\r\n\t\t\t\t\t\t\t\t\t\t<Typography.Link onClick={() => downloadAudio(record)}>\r\n\t\t\t\t\t\t\t\t\t\t\t{record.id === audioSavingId ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<LoadingOutlined style={{ fontSize: 18 }} />\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<DownloadOutlined style={{ fontSize: 18 }} />\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Typography.Link>\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t</Space>\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t},\r\n\t\t\t  ]\r\n\t\t\t: tableColumns;\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Table\r\n\t\t\t\tsize=\"middle\"\r\n\t\t\t\tclassName=\"project-table\"\r\n\t\t\t\trowKey={(record) => record.id}\r\n\t\t\t\tcolumns={columns}\r\n\t\t\t\t// scroll={{ x: columns.length > 14 ? 1900 : false }}\r\n\t\t\t\tdataSource={tableData}\r\n\t\t\t\tloading={tableLoading}\r\n\t\t\t\tpagination={{\r\n\t\t\t\t\tposition: ['bottomCenter'],\r\n\t\t\t\t\tcurrent: tablePaginationConfig.current_page,\r\n\t\t\t\t\ttotal: tablePaginationConfig.total,\r\n\t\t\t\t\tpageSize: tablePaginationConfig.per_page,\r\n\t\t\t\t\tonChange: onChangeTablePage,\r\n\t\t\t\t\thideOnSinglePage: true,\r\n\t\t\t\t}}\r\n\t\t\t\tbordered\r\n\t\t\t/>\r\n\t\t\t{editingRow && (\r\n\t\t\t\t<EditingModalForm\r\n\t\t\t\t\tonCreate={onCreate}\r\n\t\t\t\t\tonCancel={() => {\r\n\t\t\t\t\t\tsetEditingRow(null);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tformRows={tableColumns}\r\n\t\t\t\t\teditingRow={editingRow}\r\n\t\t\t\t\tconfirmLoading={confirmLoading}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default ProjectTable;\r\n","import React from 'react';\r\nimport { DatePicker, Form, Input, Button, Select, BackTop, message } from 'antd';\r\nimport { PhoneOutlined, UserOutlined } from '@ant-design/icons';\r\nimport axios from 'axios';\r\nimport moment from 'moment';\r\nimport 'moment/locale/ru';\r\n\r\n//Redux\r\nimport {\r\n\tsetActiveProject,\r\n\tsetTableColumns,\r\n\tresetTableData,\r\n\tsetSearchParams,\r\n\tfetchActiveProject,\r\n\tsetProjectLoading,\r\n\tsetTableLoading,\r\n} from '../../redux/actions/projects';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nimport Loader from '../../components/Loader';\r\nimport TableControls from '../../components/TableControls';\r\nimport ProjectTable from '../../components/ProjectTable';\r\n\r\nconst Main = () => {\r\n\t//Redux\r\n\tconst dispatch = useDispatch();\r\n\tconst { activeProject, projectLoading, tableData, searchParams, projectStatuses } = useSelector(\r\n\t\t({ projects }) => projects,\r\n\t);\r\n\tconst [projectList, setProjectList] = React.useState(null);\r\n\tconst [searchForm] = Form.useForm();\r\n\r\n\t//Подгрузка списка проектов, доступных для пользователя, в селект\r\n\tReact.useEffect(() => {\r\n\t\taxios.post('/userprojects').then(({ data }) => {\r\n\t\t\tconst projects = data.map((project) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tid: project.id,\r\n\t\t\t\t\tvalue: project.tablename,\r\n\t\t\t\t\tlabel: project.name,\r\n\t\t\t\t\tbase_header: project.base_header,\r\n\t\t\t\t\tbase_row: project.base_row,\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t\tsetProjectList(projects);\r\n\t\t});\r\n\t}, []);\r\n\r\n\t//Меняем активный проект, при смене в селекте\r\n\tReact.useEffect(() => {\r\n\t\tif (activeProject && !tableData) {\r\n\t\t\tdispatch(fetchActiveProject(null, activeProject.value));\r\n\t\t} // eslint-disable-next-line\r\n\t}, [activeProject]);\r\n\r\n\tconst fetchSearchData = (fieldsValue) => {\r\n\t\tif (!activeProject) {\r\n\t\t\tmessage.warning('Сначала выберите проект', 2);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (\r\n\t\t\t!fieldsValue.from &&\r\n\t\t\t!fieldsValue.to &&\r\n\t\t\t!fieldsValue.phone &&\r\n\t\t\t!fieldsValue.status &&\r\n\t\t\t!fieldsValue.operator\r\n\t\t) {\r\n\t\t\tmessage.warning('Заполните хотя бы один параметр поиска', 2);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst phone =\r\n\t\t\tfieldsValue.phone?.length > 10 ? fieldsValue.phone.slice(1) : fieldsValue.phone;\r\n\r\n\t\tconst values = {\r\n\t\t\t...fieldsValue,\r\n\t\t\tphone: phone,\r\n\t\t\tfrom: fieldsValue['from'] ? fieldsValue['from'].format('YYYY-MM-DD') : null,\r\n\t\t\tto: fieldsValue['to'] ? fieldsValue['to'].format('YYYY-MM-DD') : null,\r\n\t\t};\r\n\r\n\t\tdispatch(setTableLoading(true));\r\n\t\tdispatch(\r\n\t\t\tsetSearchParams({\r\n\t\t\t\t...searchParams,\r\n\t\t\t\tfrom: values.from,\r\n\t\t\t\tto: values.to,\r\n\t\t\t\tphone: values.phone,\r\n\t\t\t\toperator: values.operator,\r\n\t\t\t\tstatus: values.status,\r\n\t\t\t}),\r\n\t\t);\r\n\t\tconst parameters = {\r\n\t\t\tproject: activeProject.value,\r\n\t\t\tfrom: values.from,\r\n\t\t\tto: values.to,\r\n\t\t\tphone: values.phone,\r\n\t\t\toperator: values.operator,\r\n\t\t\tstatus: values.status,\r\n\t\t};\r\n\t\tdispatch(fetchActiveProject(parameters));\r\n\t};\r\n\r\n\tconst resetSearch = async () => {\r\n\t\tawait dispatch(setSearchParams(null));\r\n\t\tsearchForm.resetFields();\r\n\t};\r\n\r\n\tconst getTableRowWidth = (row) => {\r\n\t\tswitch (row) {\r\n\t\t\tcase 'id':\r\n\t\t\t\treturn 34; //def 50, mid 34\r\n\t\t\tcase 'time':\r\n\t\t\t\treturn 151; //def 168, mid 151\r\n\t\t\t// case 'que':\r\n\t\t\t// \treturn 151; //def 168, mid 151\r\n\t\t\t// case 'operator':\r\n\t\t\t// \treturn 151; //def 168, mid 151\r\n\t\t\t// case 'typeo':\r\n\t\t\t// \treturn 151; //def 121, mid 105\r\n\t\t\t// case 'status':\r\n\t\t\t// \treturn 151; //def 121, mid 105\r\n\t\t\t// case 'number':\r\n\t\t\t// \treturn 105; //def 121, mid 105\r\n\t\t\t// case 'name':\r\n\t\t\t// \treturn 105; //def 121, mid 105\r\n\t\t\t// case 'phone_contact':\r\n\t\t\t// \treturn 105; //def 121, mid 105\r\n\t\t\tcase 'content':\r\n\t\t\t\treturn 300; //def 300, mid 300\r\n\r\n\t\t\tdefault:\r\n\t\t\t\treturn 'auto';\r\n\t\t}\r\n\t};\r\n\r\n\tconst onSelectProject = (_, optionObj) => {\r\n\t\tdispatch(setProjectLoading(true));\r\n\t\tresetSearch();\r\n\r\n\t\tconst headerArr = optionObj.base_header.split(',');\r\n\t\tconst rowArr = optionObj.base_row.split(',');\r\n\r\n\t\tconst tableCols = headerArr.map((col, i) => ({\r\n\t\t\ttitle: col,\r\n\t\t\tdataIndex: rowArr[i],\r\n\t\t\twidth: headerArr.length > 7 ? getTableRowWidth(rowArr[i]) : 148,\r\n\t\t\teditable:\r\n\t\t\t\trowArr[i] === 'id' ||\r\n\t\t\t\trowArr[i] === 'time' ||\r\n\t\t\t\trowArr[i] === 'operator' ||\r\n\t\t\t\trowArr[i] === 'que'\r\n\t\t\t\t\t? false\r\n\t\t\t\t\t: true,\r\n\t\t}));\r\n\r\n\t\tdispatch(resetTableData());\r\n\t\tdispatch(setActiveProject(optionObj));\r\n\t\tdispatch(setTableColumns(tableCols));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"controls box\">\r\n\t\t\t\t<Form\r\n\t\t\t\t\tform={searchForm}\r\n\t\t\t\t\tonFinish={fetchSearchData}\r\n\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\tinitialValues={{\r\n\t\t\t\t\t\tfrom:\r\n\t\t\t\t\t\t\tsearchParams && searchParams.from\r\n\t\t\t\t\t\t\t\t? moment(searchParams.from, 'YYYY-MM-DD')\r\n\t\t\t\t\t\t\t\t: null,\r\n\t\t\t\t\t\tto:\r\n\t\t\t\t\t\t\tsearchParams && searchParams.to\r\n\t\t\t\t\t\t\t\t? moment(searchParams.to, 'YYYY-MM-DD')\r\n\t\t\t\t\t\t\t\t: null,\r\n\t\t\t\t\t\tphone: searchParams ? searchParams.phone : null,\r\n\t\t\t\t\t\tstatus: searchParams ? searchParams.status : null,\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tlayout=\"inline\">\r\n\t\t\t\t\t<Form.Item name=\"from\">\r\n\t\t\t\t\t\t<DatePicker placeholder=\"С\" />\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item name=\"to\">\r\n\t\t\t\t\t\t<DatePicker placeholder=\"По\" />\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item name=\"phone\">\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tplaceholder=\"Телефон\"\r\n\t\t\t\t\t\t\tprefix={\r\n\t\t\t\t\t\t\t\t<PhoneOutlined\r\n\t\t\t\t\t\t\t\t\tstyle={{ color: 'rgba(0, 0, 0, 0.25)' }}\r\n\t\t\t\t\t\t\t\t\trotate={90}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tallowClear\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item name=\"operator\">\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tplaceholder=\"Оператор\"\r\n\t\t\t\t\t\t\tprefix={<UserOutlined style={{ color: 'rgba(0, 0, 0, 0.25)' }} />}\r\n\t\t\t\t\t\t\tallowClear\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item name=\"status\">\r\n\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\tplaceholder=\"Статус\"\r\n\t\t\t\t\t\t\tstyle={{ width: 202 }}\r\n\t\t\t\t\t\t\toptions={projectStatuses || null}\r\n\t\t\t\t\t\t\tallowClear\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item>\r\n\t\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\">\r\n\t\t\t\t\t\t\tПоиск\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t{searchParams && (\r\n\t\t\t\t\t\t<Form.Item>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tdispatch(setTableLoading(true));\r\n\t\t\t\t\t\t\t\t\tresetSearch();\r\n\t\t\t\t\t\t\t\t\tdispatch(fetchActiveProject(null, activeProject.value));\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\tСбросить\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form>\r\n\t\t\t\t<Select\r\n\t\t\t\t\tvalue={activeProject ? activeProject.label : null}\r\n\t\t\t\t\tshowSearch\r\n\t\t\t\t\tstyle={{ width: 202, marginLeft: 8 }}\r\n\t\t\t\t\tplaceholder=\"Выбрать проект\"\r\n\t\t\t\t\toptionFilterProp=\"label\"\r\n\t\t\t\t\tonChange={onSelectProject}\r\n\t\t\t\t\toptions={projectList}\r\n\t\t\t\t\tfilterOption={(input, option) =>\r\n\t\t\t\t\t\toption.label.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n\t\t\t\t\t}></Select>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"box\">\r\n\t\t\t\t{projectLoading ? (\r\n\t\t\t\t\t<Loader />\r\n\t\t\t\t) : tableData ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<TableControls />\r\n\t\t\t\t\t\t<ProjectTable />\r\n\t\t\t\t\t</>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<h1 style={{ textAlign: 'center', marginBottom: 0 }}>Выберите проект</h1>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t<BackTop duration={800} />\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default Main;\r\n","import React from 'react';\r\nimport { Button } from 'antd';\r\nimport { ExportOutlined } from '@ant-design/icons';\r\nimport axios from 'axios';\r\nimport { useHistory } from 'react-router-dom';\r\n//Redux\r\nimport { useDispatch } from 'react-redux';\r\nimport { resetStorage } from '../redux/actions/projects';\r\n\r\nconst Logout = ({ onLogout }) => {\r\n\tconst dispatch = useDispatch();\r\n\tlet history = useHistory();\r\n\r\n\tconst [isLoading, setIsLoading] = React.useState(false);\r\n\r\n\tconst handleLogout = () => {\r\n\t\tsetIsLoading(true);\r\n\t\taxios\r\n\t\t\t.post('/logout')\r\n\t\t\t.then(() => {\r\n\t\t\t\tlocalStorage.clear();\r\n\t\t\t\tonLogout();\r\n\t\t\t\tdispatch(resetStorage());\r\n\t\t\t\thistory.push('/');\r\n\t\t\t})\r\n\t\t\t.catch(() => console.log('logout catch error'))\r\n\t\t\t.finally(() => setIsLoading(false));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Button\r\n\t\t\ttype=\"text\"\r\n\t\t\tonClick={handleLogout}\r\n\t\t\tclassName=\"btn-logout\"\r\n\t\t\ticon={<ExportOutlined />}\r\n\t\t\tloading={isLoading}>\r\n\t\t\tВыйти\r\n\t\t</Button>\r\n\t);\r\n};\r\n\r\nexport default Logout;\r\n","import React from 'react';\r\nimport { Avatar, Menu, Dropdown } from 'antd';\r\nimport Logout from './Logout';\r\n\r\nconst UserBlock = ({ onLogout }) => {\r\n\tconst userName = localStorage.getItem('auth_name');\r\n\r\n\tconst menu = (\r\n\t\t<Menu>\r\n\t\t\t<Menu.Item key=\"profile\">Профиль</Menu.Item>\r\n\t\t\t<Menu.Divider />\r\n\t\t\t<Logout onLogout={onLogout} />\r\n\t\t</Menu>\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div className=\"user-box\">\r\n\t\t\t{userName ? (\r\n\t\t\t\t<span\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tmarginRight: 10,\r\n\t\t\t\t\t\tfontWeight: 600,\r\n\t\t\t\t\t\tcolor: 'rgba(255, 255, 255, 0.65)',\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t{userName}\r\n\t\t\t\t</span>\r\n\t\t\t) : null}\r\n\t\t\t<Dropdown overlay={menu} trigger={['click']} placement=\"bottomRight\">\r\n\t\t\t\t<Avatar\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tcolor: '#f56a00',\r\n\t\t\t\t\t\tbackgroundColor: '#fde3cf',\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t{userName ? userName[0] : '-'}\r\n\t\t\t\t</Avatar>\r\n\t\t\t</Dropdown>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default UserBlock;\r\n","import React from 'react';\r\nimport { Layout, Menu } from 'antd';\r\nimport { HomeOutlined, UserOutlined, ProjectOutlined } from '@ant-design/icons';\r\nimport { Switch, Route, Link, Redirect, useLocation } from 'react-router-dom';\r\nimport { Main, Project, EditProject, CreateProject, EditUser, CreateUser, User } from './index';\r\nimport UserBlock from '../components/UserBlock';\r\n//Redux\r\nimport { useSelector } from 'react-redux';\r\n\r\nconst { Header, Content } = Layout;\r\n\r\nconst Home = ({ onSuccessLogout }) => {\r\n\tlet location = useLocation();\r\n\tconst { userInfo } = useSelector(({ projects }) => projects);\r\n\r\n\tconst isAdmin = userInfo.isadmin === 1;\r\n\r\n\treturn (\r\n\t\t<Layout>\r\n\t\t\t<Header>\r\n\t\t\t\t<div className=\"container header-container\">\r\n\t\t\t\t\t<Menu\r\n\t\t\t\t\t\ttheme=\"dark\"\r\n\t\t\t\t\t\tmode=\"horizontal\"\r\n\t\t\t\t\t\tdefaultSelectedKeys={[location.pathname]}\r\n\t\t\t\t\t\tstyle={{ width: 386 }}>\r\n\t\t\t\t\t\t<Menu.Item key=\"/\">\r\n\t\t\t\t\t\t\t<Link to=\"/\">\r\n\t\t\t\t\t\t\t\t<HomeOutlined style={{ marginRight: 6 }} />\r\n\t\t\t\t\t\t\t\tГлавная\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t//Админ\r\n\t\t\t\t\t\t\tisAdmin && (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<Menu.Item key=\"/projects\">\r\n\t\t\t\t\t\t\t\t\t\t<Link to=\"/projects\">\r\n\t\t\t\t\t\t\t\t\t\t\t<ProjectOutlined style={{ marginRight: 6 }} />\r\n\t\t\t\t\t\t\t\t\t\t\tПроекты\r\n\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t\t\t\t\t\t<Menu.Item key=\"/users\">\r\n\t\t\t\t\t\t\t\t\t\t<Link to=\"/users\">\r\n\t\t\t\t\t\t\t\t\t\t\t<UserOutlined style={{ marginRight: 6 }} />\r\n\t\t\t\t\t\t\t\t\t\t\tПользователи\r\n\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Menu>\r\n\t\t\t\t\t<UserBlock onLogout={onSuccessLogout} />\r\n\t\t\t\t</div>\r\n\t\t\t</Header>\r\n\t\t\t<Content className=\"container site-layout\">\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t<Route exact path=\"/\">\r\n\t\t\t\t\t\t<Main />\r\n\t\t\t\t\t</Route>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t//Админ\r\n\t\t\t\t\t\tisAdmin && (\r\n\t\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t\t<Route exact path=\"/projects\">\r\n\t\t\t\t\t\t\t\t\t<Project />\r\n\t\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t\t<Route exact path=\"/projects/:id/edit\">\r\n\t\t\t\t\t\t\t\t\t<EditProject />\r\n\t\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t\t<Route exact path=\"/projects/create\">\r\n\t\t\t\t\t\t\t\t\t<CreateProject />\r\n\t\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t\t<Route exact path=\"/users\">\r\n\t\t\t\t\t\t\t\t\t<User />\r\n\t\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t\t<Route exact path=\"/users/:id/edit\">\r\n\t\t\t\t\t\t\t\t\t<EditUser />\r\n\t\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t\t<Route exact path=\"/users/create\">\r\n\t\t\t\t\t\t\t\t\t<CreateUser />\r\n\t\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t\t<Redirect to=\"/\" />\r\n\t\t\t\t\t\t\t</Switch>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t<Redirect to=\"/\" />\r\n\t\t\t\t</Switch>\r\n\t\t\t</Content>\r\n\t\t</Layout>\r\n\t);\r\n};\r\n\r\nexport default Home;\r\n","import React from 'react';\r\n\r\nimport { Link } from 'react-router-dom';\r\nimport { Button } from 'antd';\r\n\r\nconst ResourceHeader = ({ title, path, lintText }) => {\r\n\treturn (\r\n\t\t<div className=\"controls box\" style={{ padding: '18px 24px' }}>\r\n\t\t\t<b\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tfontSize: 16,\r\n\t\t\t\t\tfontWeight: 600,\r\n\t\t\t\t}}>\r\n\t\t\t\t{title}\r\n\t\t\t</b>\r\n\t\t\t<Button type=\"primary\" style={{ marginLeft: 'auto' }}>\r\n\t\t\t\t<Link to={path}>{lintText}</Link>\r\n\t\t\t</Button>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ResourceHeader;\r\n","import React from 'react';\r\nimport { useParams, useHistory } from 'react-router-dom';\r\nimport { Form, Input, Button, Checkbox, message, Select } from 'antd';\r\nimport axios from 'axios';\r\nimport Loader from '../../components/Loader';\r\nimport ResourceHeader from '../../components/ResourceHeader';\r\n\r\nconst EditProject = () => {\r\n\tconst [userList, setUsertList] = React.useState([]);\r\n\tconst [projectUser, setProjectUser] = React.useState([]);\r\n\tconst [isLoadingPage, setIsLoadingPage] = React.useState(true);\r\n\tconst [isLoading, setIsLoading] = React.useState(false);\r\n\tconst [initValues, setInitvalues] = React.useState({});\r\n\tconst { id } = useParams();\r\n\r\n\tReact.useEffect(() => {\r\n\t\taxios\r\n\t\t\t.get('/users')\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tconst newData = data.map((user) => {\r\n\t\t\t\t\treturn { label: user.name, value: user.id };\r\n\t\t\t\t});\r\n\t\t\t\tsetUsertList(newData);\r\n\t\t\t})\r\n\t\t\t.catch(() => message.error('Ошибка загрузки списка пользователей'));\r\n\t}, []);\r\n\r\n\tlet history = useHistory();\r\n\r\n\tReact.useEffect(() => {\r\n\t\taxios\r\n\t\t\t.get(`/projects/${id}/edit`)\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tsetInitvalues(data);\r\n\t\t\t\tif (data.users.length > 0) {\r\n\t\t\t\t\tconst projectUser = data.users.map((user) => user.id);\r\n\t\t\t\t\tsetProjectUser(projectUser);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(() => message.error('Ошибка загрузки данных по текущему проекту'))\r\n\t\t\t.finally(() => {\r\n\t\t\t\tsetIsLoadingPage(false);\r\n\t\t\t});\r\n\t}, [id]);\r\n\r\n\tconst onFinish = (values) => {\r\n\t\tsetIsLoading(true);\r\n\t\tconst newProject = { ...values, users: projectUser };\r\n\t\taxios\r\n\t\t\t.put(`/projects/${id}`, newProject)\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tmessage.success(data.message);\r\n\t\t\t\thistory.push('/projects');\r\n\t\t\t})\r\n\t\t\t.catch(() => message.error('Ошибка редактирования проекта'))\r\n\t\t\t.finally(() => setIsLoading(false));\r\n\t};\r\n\r\n\tconst onChangeUsers = (value) => {\r\n\t\tsetProjectUser(value);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<ResourceHeader title=\"Редактировать проект\" path=\"/projects\" lintText=\"Назад\" />\r\n\t\t\t<div className=\"box\">\r\n\t\t\t\t{isLoadingPage ? (\r\n\t\t\t\t\t<Loader />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Form\r\n\t\t\t\t\t\t\tname=\"basic\"\r\n\t\t\t\t\t\t\tonFinish={onFinish}\r\n\t\t\t\t\t\t\tinitialValues={initValues}\r\n\t\t\t\t\t\t\tautoComplete=\"off\">\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel=\"Имя\"\r\n\t\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\t\trules={[{ required: true, message: 'Введите имя!' }]}>\r\n\t\t\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel=\"Таблица\"\r\n\t\t\t\t\t\t\t\tname=\"tablename\"\r\n\t\t\t\t\t\t\t\trules={[{ required: true, message: 'Укажите таблицу!' }]}>\r\n\t\t\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel=\"Заголовок таблицы\"\r\n\t\t\t\t\t\t\t\ttooltip={{\r\n\t\t\t\t\t\t\t\t\ttitle: 'Через запятую. Пример: ID,Имя,Телефон',\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tname=\"base_header\"\r\n\t\t\t\t\t\t\t\trules={[{ required: true, message: 'Укажите заголовок таблицы!' }]}>\r\n\t\t\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel=\"Строка таблицы\"\r\n\t\t\t\t\t\t\t\ttooltip={{\r\n\t\t\t\t\t\t\t\t\ttitle: 'Поля из таблицы в БД через запятую. Пример: id,name,number',\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tname=\"base_row\"\r\n\t\t\t\t\t\t\t\trules={[{ required: true, message: 'Укажите строку таблицы!' }]}>\r\n\t\t\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t<Form.Item name=\"changes\" valuePropName=\"checked\">\r\n\t\t\t\t\t\t\t\t<Checkbox>Изменения</Checkbox>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t\t\t<Form.Item>\r\n\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\tmode=\"multiple\"\r\n\t\t\t\t\t\t\t\t\toptionFilterProp=\"label\"\r\n\t\t\t\t\t\t\t\t\tstyle={{ width: '100%' }}\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Выбрать пользователей\"\r\n\t\t\t\t\t\t\t\t\tdefaultValue={projectUser}\r\n\t\t\t\t\t\t\t\t\tonChange={onChangeUsers}\r\n\t\t\t\t\t\t\t\t\toptions={userList}></Select>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t\t\t<Form.Item>\r\n\t\t\t\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\" loading={isLoading}>\r\n\t\t\t\t\t\t\t\t\tОбновить проект\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default EditProject;\r\n","import React from 'react';\r\nimport { Form, Input, Button, Select, Checkbox, message } from 'antd';\r\nimport { useHistory } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport ResourceHeader from '../../components/ResourceHeader';\r\n\r\nconst CreateProject = () => {\r\n\tconst [userList, setUserList] = React.useState([]);\r\n\tconst [projectUser, setProjectUser] = React.useState([]);\r\n\tconst [isLoading, setIsLoading] = React.useState(false);\r\n\tlet history = useHistory();\r\n\r\n\tReact.useEffect(() => {\r\n\t\taxios\r\n\t\t\t.get('/users')\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tconst newData = data.map((user) => {\r\n\t\t\t\t\treturn { label: user.name, value: user.id };\r\n\t\t\t\t});\r\n\t\t\t\tsetUserList(newData);\r\n\t\t\t})\r\n\t\t\t.catch(() => message.error('Ошибка загрузки списка пользователей'));\r\n\t}, []);\r\n\r\n\tconst onFinish = (values) => {\r\n\t\tconst newProject = { ...values, users: projectUser };\r\n\t\tsetIsLoading(true);\r\n\t\taxios\r\n\t\t\t.post('/projects', newProject)\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tmessage.success(data.message);\r\n\t\t\t\thistory.push('/projects');\r\n\t\t\t})\r\n\t\t\t.catch(() => message.error('Произошла ошибка при создании проекта'))\r\n\t\t\t.finally(() => setIsLoading(false));\r\n\t};\r\n\r\n\tconst onChangeUsers = (checkedValues) => {\r\n\t\tsetProjectUser(checkedValues);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<ResourceHeader title=\"Новый проект\" path=\"/projects\" lintText=\"Назад\" />\r\n\t\t\t<div className=\"box\">\r\n\t\t\t\t<Form\r\n\t\t\t\t\tname=\"basic\"\r\n\t\t\t\t\tonFinish={onFinish}\r\n\t\t\t\t\tinitialValues={{ changes: false }}\r\n\t\t\t\t\tautoComplete=\"off\">\r\n\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\tlabel=\"Имя\"\r\n\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\trules={[{ required: true, message: 'Введите имя!' }]}>\r\n\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\tlabel=\"Таблица\"\r\n\t\t\t\t\t\ttooltip={{\r\n\t\t\t\t\t\t\ttitle: 'Указать имя таблицы из БД',\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tname=\"tablename\"\r\n\t\t\t\t\t\trules={[{ required: true, message: 'Укажите таблицу!' }]}>\r\n\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\tlabel=\"Заголовок таблицы\"\r\n\t\t\t\t\t\ttooltip={{\r\n\t\t\t\t\t\t\ttitle: 'Через запятую. Пример: ID,Имя,Телефон',\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tname=\"base_header\"\r\n\t\t\t\t\t\trules={[{ required: true, message: 'Укажите заголовок таблицы!' }]}>\r\n\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\tlabel=\"Строка таблицы\"\r\n\t\t\t\t\t\ttooltip={{\r\n\t\t\t\t\t\t\ttitle: 'Поля из таблицы в БД через запятую. Пример: id,name,number',\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tname=\"base_row\"\r\n\t\t\t\t\t\trules={[{ required: true, message: 'Укажите строку таблицы!' }]}>\r\n\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t<Form.Item name=\"changes\" valuePropName=\"checked\">\r\n\t\t\t\t\t\t<Checkbox>Изменения</Checkbox>\r\n\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t<Form.Item>\r\n\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\tmode=\"multiple\"\r\n\t\t\t\t\t\t\toptionFilterProp=\"label\"\r\n\t\t\t\t\t\t\tstyle={{ width: '100%' }}\r\n\t\t\t\t\t\t\tplaceholder=\"Выбрать пользователей\"\r\n\t\t\t\t\t\t\tdefaultValue={projectUser}\r\n\t\t\t\t\t\t\tonChange={onChangeUsers}\r\n\t\t\t\t\t\t\toptions={userList}></Select>\r\n\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t<Form.Item>\r\n\t\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\" loading={isLoading}>\r\n\t\t\t\t\t\t\tДобавить проект\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t</Form>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default CreateProject;\r\n","import React from 'react';\r\nimport axios from 'axios';\r\nimport { Table, Space, Button, Tag, message } from 'antd';\r\nimport { Link } from 'react-router-dom';\r\nimport { CheckCircleTwoTone, CloseCircleTwoTone } from '@ant-design/icons';\r\nimport Loader from '../../components/Loader';\r\nimport ResourceHeader from '../../components/ResourceHeader';\r\n\r\nconst Project = () => {\r\n\tconst [projectList, setProjectList] = React.useState([]);\r\n\tconst [isLoading, setIsLoading] = React.useState(true);\r\n\r\n\tReact.useEffect(() => {\r\n\t\taxios\r\n\t\t\t.get('/projects')\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tsetProjectList(data);\r\n\t\t\t})\r\n\t\t\t.catch(() => message.error('Ошибка при загрузке списка проектов'))\r\n\t\t\t.finally(() => setIsLoading(false));\r\n\t}, []);\r\n\r\n\tconst onDeleteProject = (e, projectId) => {\r\n\t\tconst thisButton = e.currentTarget;\r\n\t\tthisButton.innerText = 'Удаляю';\r\n\r\n\t\taxios\r\n\t\t\t.delete(`/projects/${projectId}`)\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tconst newProjectList = projectList.filter((project) => project.id !== projectId);\r\n\t\t\t\tsetProjectList(newProjectList);\r\n\t\t\t\tmessage.success(data.message);\r\n\t\t\t})\r\n\t\t\t.catch(() => message.error('Ошибка при удалении проекта'))\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthisButton.innerText = 'Удалить';\r\n\t\t\t});\r\n\t};\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'Проект',\r\n\t\t\tdataIndex: 'name',\r\n\t\t\tkey: 'name',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Таблица',\r\n\t\t\tdataIndex: 'tablename',\r\n\t\t\tkey: 'tablename',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Заголовок таблицы',\r\n\t\t\tdataIndex: 'base_header',\r\n\t\t\twidth: 700,\r\n\t\t\tkey: 'base_header',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Изменения',\r\n\t\t\tdataIndex: 'changes',\r\n\t\t\twidth: 103,\r\n\t\t\tkey: 'changes',\r\n\t\t\trender: (changes) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t{changes ? (\r\n\t\t\t\t\t\t\t<CheckCircleTwoTone\r\n\t\t\t\t\t\t\t\ttwoToneColor=\"#52c41a\"\r\n\t\t\t\t\t\t\t\tstyle={{ fontSize: '16px' }}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<CloseCircleTwoTone\r\n\t\t\t\t\t\t\t\ttwoToneColor=\"#f5222d\"\r\n\t\t\t\t\t\t\t\tstyle={{ fontSize: '16px' }}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</>\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Доступен для',\r\n\t\t\tdataIndex: 'users',\r\n\t\t\tkey: 'users',\r\n\t\t\trender: (users) => {\r\n\t\t\t\tif (users.length) {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t{users.map((user) => (\r\n\t\t\t\t\t\t\t\t<Tag color=\"blue\" key={user.id}>\r\n\t\t\t\t\t\t\t\t\t{user.name}\r\n\t\t\t\t\t\t\t\t</Tag>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Действия',\r\n\t\t\tkey: 'action',\r\n\t\t\trender: (_, record) => (\r\n\t\t\t\t<Space size=\"middle\">\r\n\t\t\t\t\t<Link to={`/projects/${record.id}/edit`}>Ред</Link>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ttype=\"link\"\r\n\t\t\t\t\t\tclassName=\"btn-link\"\r\n\t\t\t\t\t\tonClick={(e) => onDeleteProject(e, record.id)}>\r\n\t\t\t\t\t\tУдалить\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Space>\r\n\t\t\t),\r\n\t\t},\r\n\t];\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<ResourceHeader\r\n\t\t\t\ttitle=\"Список проектов\"\r\n\t\t\t\tpath=\"/projects/create\"\r\n\t\t\t\tlintText=\"Добавить проект\"\r\n\t\t\t/>\r\n\t\t\t<div className=\"box\">\r\n\t\t\t\t{isLoading ? (\r\n\t\t\t\t\t<Loader />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tstyle={{ width: '100%' }}\r\n\t\t\t\t\t\trowKey={(record) => record.id}\r\n\t\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\t\tdataSource={projectList}\r\n\t\t\t\t\t\tpagination={{ hideOnSinglePage: true }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default Project;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { Table, Space, Tag, Button, message } from 'antd';\r\n\r\nimport Loader from '../../components/Loader';\r\nimport ResourceHeader from '../../components/ResourceHeader';\r\n\r\nconst User = () => {\r\n\tconst [userList, setUserList] = React.useState([]);\r\n\tconst [isLoading, setIsLoading] = React.useState(true);\r\n\r\n\tReact.useEffect(() => {\r\n\t\taxios\r\n\t\t\t.get('/users')\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tsetUserList(data);\r\n\t\t\t})\r\n\t\t\t.finally(() => setIsLoading(false));\r\n\t}, []);\r\n\r\n\tconst onDeleteUser = (e, userId) => {\r\n\t\tconst thisButton = e.currentTarget;\r\n\t\tthisButton.innerText = 'Удаляю';\r\n\r\n\t\taxios\r\n\t\t\t.delete(`/users/${userId}`)\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tconst newUserList = userList.filter((user) => user.id !== userId);\r\n\t\t\t\tsetUserList(newUserList);\r\n\t\t\t\tmessage.success(data.message);\r\n\t\t\t})\r\n\t\t\t.catch(() => message.error('Ошибка при удалении пользователя'))\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthisButton.innerText = 'Удалить';\r\n\t\t\t});\r\n\t};\r\n\r\n\tconst onResetPassword = (userId) => {\r\n\t\tconst newPwd = prompt('Введите новый пароль');\r\n\r\n\t\tif (newPwd) {\r\n\t\t\taxios\r\n\t\t\t\t.patch(`/user/changepwd`, { userid: userId, password: newPwd })\r\n\t\t\t\t.then(({ data }) => {\r\n\t\t\t\t\tmessage.success(data.message);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => message.error('Ошибка при смене пароля'));\r\n\t\t}\r\n\t};\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'Пользователь',\r\n\t\t\tdataIndex: 'name',\r\n\t\t\tkey: 'name',\r\n\t\t\trender: (_, record) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t{record.isadmin ? (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t{record.name} <Tag>admin</Tag>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\trecord.name\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</>\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Логин',\r\n\t\t\tdataIndex: 'username',\r\n\t\t\tkey: 'username',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Действия',\r\n\t\t\tkey: 'action',\r\n\t\t\trender: (_, record) => (\r\n\t\t\t\t<Space size=\"middle\">\r\n\t\t\t\t\t<Link to={`/users/${record.id}/edit`}>Ред</Link>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ttype=\"link\"\r\n\t\t\t\t\t\tclassName=\"btn-link\"\r\n\t\t\t\t\t\tonClick={(e) => onDeleteUser(e, record.id)}>\r\n\t\t\t\t\t\tУдалить\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ttype=\"link\"\r\n\t\t\t\t\t\tclassName=\"btn-link\"\r\n\t\t\t\t\t\tonClick={() => onResetPassword(record.id)}>\r\n\t\t\t\t\t\tСменить пароль\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Space>\r\n\t\t\t),\r\n\t\t},\r\n\t];\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<ResourceHeader\r\n\t\t\t\ttitle=\"Список пользователей\"\r\n\t\t\t\tpath=\"/users/create\"\r\n\t\t\t\tlintText=\"Добавить пользователя\"\r\n\t\t\t/>\r\n\r\n\t\t\t<div className=\"box\">\r\n\t\t\t\t{isLoading ? (\r\n\t\t\t\t\t<Loader />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tstyle={{ width: '100%' }}\r\n\t\t\t\t\t\trowKey={(record) => record.id}\r\n\t\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\t\tdataSource={userList}\r\n\t\t\t\t\t\tpagination={{ hideOnSinglePage: true }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default User;\r\n","import React from 'react';\r\nimport { Form, Input, Button, Checkbox, message } from 'antd';\r\nimport { useHistory } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nimport ResourceHeader from '../../components/ResourceHeader';\r\n\r\nconst User = () => {\r\n\tconst [isLoading, setIsLoading] = React.useState(false);\r\n\r\n\tlet history = useHistory();\r\n\r\n\tconst onFinish = (values) => {\r\n\t\tsetIsLoading(true);\r\n\t\taxios\r\n\t\t\t.post('/users', values)\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tmessage.success(data.message);\r\n\t\t\t\thistory.push('/users');\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\tmessage.error('Произошла ошибка');\r\n\t\t\t})\r\n\t\t\t.finally(() => setIsLoading(false));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<ResourceHeader title=\"Новый пользователь\" path=\"/users\" lintText=\"Назад\" />\r\n\t\t\t<div className=\"box\">\r\n\t\t\t\t<Form\r\n\t\t\t\t\tname=\"basic\"\r\n\t\t\t\t\tonFinish={onFinish}\r\n\t\t\t\t\tinitialValues={{ isadmin: false }}\r\n\t\t\t\t\tautoComplete=\"off\">\r\n\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\tlabel=\"Имя\"\r\n\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\trules={[{ required: true, message: 'Введите имя!' }]}>\r\n\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\tlabel=\"Логин\"\r\n\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\trules={[{ required: true, message: 'Введите логин!' }]}>\r\n\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\tlabel=\"Пароль\"\r\n\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\trules={[{ required: true, message: 'Введите пароль!' }]}>\r\n\t\t\t\t\t\t<Input.Password />\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item name=\"isadmin\" valuePropName=\"checked\">\r\n\t\t\t\t\t\t<Checkbox>Админ</Checkbox>\r\n\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t<Form.Item>\r\n\t\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\" loading={isLoading}>\r\n\t\t\t\t\t\t\tДобавить пользователя\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t</Form>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default User;\r\n","import React from 'react';\r\nimport { useParams, useHistory } from 'react-router-dom';\r\nimport { Form, Input, Button, Checkbox, message } from 'antd';\r\nimport axios from 'axios';\r\nimport Loader from '../../components/Loader';\r\nimport ResourceHeader from '../../components/ResourceHeader';\r\n\r\nconst EditUser = () => {\r\n\tconst [isLoadingPage, setIsLoadingPage] = React.useState(true);\r\n\tconst [isLoading, setIsLoading] = React.useState(false);\r\n\tconst [initValues, setInitValues] = React.useState({});\r\n\tlet history = useHistory();\r\n\tconst { id } = useParams();\r\n\r\n\tReact.useEffect(() => {\r\n\t\taxios\r\n\t\t\t.get(`/users/${id}/edit`)\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tsetInitValues(data);\r\n\t\t\t})\r\n\t\t\t.catch(() => message.error('Ошибка получения пользовательскх данных'))\r\n\t\t\t.finally(() => {\r\n\t\t\t\tsetIsLoadingPage(false);\r\n\t\t\t});\r\n\t}, [id]);\r\n\r\n\tconst onFinish = (values) => {\r\n\t\tsetIsLoading(true);\r\n\t\tconst newUser = { ...values };\r\n\t\taxios\r\n\t\t\t.put(`/users/${id}`, newUser)\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tmessage.success(data.message);\r\n\t\t\t\thistory.push('/users');\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\tmessage.error('Произошла ошибка');\r\n\t\t\t})\r\n\t\t\t.finally(() => setIsLoading(false));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<ResourceHeader title=\"Редактировать пользователя\" path=\"/users\" lintText=\"Назад\" />\r\n\r\n\t\t\t<div className=\"box\">\r\n\t\t\t\t{isLoadingPage ? (\r\n\t\t\t\t\t<Loader />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Form\r\n\t\t\t\t\t\t\tname=\"basic\"\r\n\t\t\t\t\t\t\tonFinish={onFinish}\r\n\t\t\t\t\t\t\tinitialValues={initValues}\r\n\t\t\t\t\t\t\tautoComplete=\"off\">\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel=\"Имя\"\r\n\t\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\t\trules={[{ required: true, message: 'Введите имя!' }]}>\r\n\t\t\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel=\"Логин\"\r\n\t\t\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\t\t\trules={[{ required: true, message: 'Введите логин!' }]}>\r\n\t\t\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t<Form.Item name=\"isadmin\" valuePropName=\"checked\">\r\n\t\t\t\t\t\t\t\t<Checkbox>Админ</Checkbox>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t\t\t<Form.Item>\r\n\t\t\t\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\" loading={isLoading}>\r\n\t\t\t\t\t\t\t\t\tОбновить пользователя\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default EditUser;\r\n","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Form, Input, Button, message } from 'antd';\r\nimport { UserOutlined, LockOutlined } from '@ant-design/icons';\r\nimport axios from 'axios';\r\n//Redux\r\nimport { useDispatch } from 'react-redux';\r\nimport { setUserInfo } from '../../redux/actions/projects';\r\n\r\nconst Login = ({ onLogin }) => {\r\n\tconst [isLoading, setIsLoading] = React.useState(false);\r\n\tconst dispatch = useDispatch();\r\n\r\n\tlet history = useHistory();\r\n\r\n\tconst onFinish = (values) => {\r\n\t\tsetIsLoading(true);\r\n\t\taxios\r\n\t\t\t.get('/csrf-cookie')\r\n\t\t\t.then(() => {\r\n\t\t\t\taxios\r\n\t\t\t\t\t.post('/login', values)\r\n\t\t\t\t\t.then(({ data }) => {\r\n\t\t\t\t\t\tlocalStorage.setItem('auth_name', data.name);\r\n\t\t\t\t\t\tdispatch(setUserInfo(data));\r\n\t\t\t\t\t\tonLogin();\r\n\t\t\t\t\t\thistory.push('/');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((error) => message.error(error.response.data.message));\r\n\t\t\t})\r\n\t\t\t.finally(() => setIsLoading(false));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"login\">\r\n\t\t\t<Form className=\"login-form\" onFinish={onFinish} autoComplete=\"off\" size=\"large\">\r\n\t\t\t\t<Form.Item\r\n\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\trules={[\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tmessage: 'Введите логин!',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t]}>\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tprefix={<UserOutlined className=\"site-form-item-icon\" />}\r\n\t\t\t\t\t\tplaceholder=\"Логин\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t<Form.Item\r\n\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\trules={[\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tmessage: 'Введите пароль!',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t]}>\r\n\t\t\t\t\t<Input.Password\r\n\t\t\t\t\t\tprefix={<LockOutlined className=\"site-form-item-icon\" />}\r\n\t\t\t\t\t\tplaceholder=\"Пароль\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t<Form.Item>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\thtmlType=\"submit\"\r\n\t\t\t\t\t\tclassName=\"login-form-button\"\r\n\t\t\t\t\t\tloading={isLoading}>\r\n\t\t\t\t\t\tВойти\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t</Form>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Login;\r\n","import React from 'react';\r\nimport { Spin } from 'antd';\r\n\r\nconst AuthLoader = () => {\r\n\treturn (\r\n\t\t<div\r\n\t\t\tstyle={{\r\n\t\t\t\tdisplay: 'flex',\r\n\t\t\t\tjustifyContent: 'center',\r\n\t\t\t\talignItems: 'center',\r\n\t\t\t\theight: '100%',\r\n\t\t\t}}>\r\n\t\t\t<Spin size=\"large\" />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default AuthLoader;\r\n","import React from 'react';\r\nimport { Login, Home } from './pages';\r\nimport axios from 'axios';\r\n//Redux\r\nimport { useDispatch } from 'react-redux';\r\nimport { setUserInfo } from './redux/actions/projects';\r\n\r\nimport AuthLoader from './components/AuthLoader';\r\n\r\nimport './App.css';\r\n\r\nconst App = () => {\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst [isLoggedin, setIsLoggedin] = React.useState(false);\r\n\tconst [checkAuth, setCheckAuth] = React.useState(false);\r\n\r\n\tconst onSuccessLogin = () => {\r\n\t\tsetIsLoggedin(true);\r\n\t};\r\n\r\n\tconst onSuccessLogout = () => {\r\n\t\tsetIsLoggedin(false);\r\n\t};\r\n\r\n\tReact.useEffect(() => {\r\n\t\taxios\r\n\t\t\t.post('me')\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tdispatch(setUserInfo(data));\r\n\t\t\t\tsetCheckAuth(true);\r\n\t\t\t\tsetIsLoggedin(true);\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\tsetCheckAuth(true);\r\n\t\t\t\tsetIsLoggedin(false);\r\n\t\t\t}); // eslint-disable-next-line\r\n\t}, []);\r\n\r\n\tif (!isLoggedin) {\r\n\t\tif (checkAuth) {\r\n\t\t\treturn <Login onLogin={onSuccessLogin} />;\r\n\t\t}\r\n\t\treturn <AuthLoader />;\r\n\t}\r\n\r\n\treturn <Home onSuccessLogout={onSuccessLogout} />;\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport store from './redux/store';\nimport axios from 'axios';\nimport { ConfigProvider } from 'antd';\nimport ruRU from 'antd/lib/locale/ru_RU';\n\nimport App from './App';\n\n// axios.defaults.baseURL = 'http://localhost:8000/api';\naxios.defaults.baseURL = 'http://admin.kolocall.com/api';\naxios.defaults.withCredentials = true;\n// axios.interceptors.response.use(\n// \t(response) => response,\n// \t(error) => {\n// \t\tif (error.response.status === 401) {\n// \t\t\tconsole.log('ошибка авторизации');\n// \t\t\tlocalStorage.clear();\n\n// \t\t\treturn Promise.reject();\n// \t\t}\n\n// \t\treturn Promise.reject(error);\n// \t},\n// );\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<ConfigProvider locale={ruRU}>\n\t\t\t<Router>\n\t\t\t\t<Provider store={store}>\n\t\t\t\t\t<App />\n\t\t\t\t</Provider>\n\t\t\t</Router>\n\t\t</ConfigProvider>\n\t</React.StrictMode>,\n\tdocument.getElementById('root'),\n);\n"],"sourceRoot":""}