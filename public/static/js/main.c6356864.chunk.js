(this.webpackJsonpkolocall_admin=this.webpackJsonpkolocall_admin||[]).push([[0],{173:function(e,t,a){e.exports={main:"Box_main___dHBT",compact:"Box_compact__XSc-w"}},209:function(e,t){},220:function(e,t,a){e.exports={title:"BoxTitle_title__E34TE"}},338:function(e,t){},339:function(e,t){},342:function(e,t,a){},347:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(51),s=a.n(r),i=a(50),o=a(24),l=a(115),j=a(212),u=a(20),b={activeProject:null,projectLoading:!1,projectStatuses:[],projectList:null,searchParams:null},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ACTIVE_PROJECT":return Object(u.a)(Object(u.a)({},e),{},{activeProject:t.payload});case"SET_PROJECT_LOADING":return Object(u.a)(Object(u.a)({},e),{},{projectLoading:t.payload});case"SET_PROJECT_LIST":return Object(u.a)(Object(u.a)({},e),{},{projectList:t.payload});case"SET_PROJECT_STATUSES":return Object(u.a)(Object(u.a)({},e),{},{projectStatuses:t.payload});case"SET_SEARCH_PARAMS":return Object(u.a)(Object(u.a)({},e),{},{searchParams:t.payload});default:return e}},O={userInfo:null,userList:null},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_INFO":return Object(u.a)(Object(u.a)({},e),{},{userInfo:t.payload});case"SET_USER_LIST":return Object(u.a)(Object(u.a)({},e),{},{userList:t.payload});default:return e}},h={tableLoading:!1,tableColumns:[],tableData:null,tablePaginationConfig:null},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TABLE_LOADING":return Object(u.a)(Object(u.a)({},e),{},{tableLoading:t.payload});case"SET_TABLE_COLUMNS":return Object(u.a)(Object(u.a)({},e),{},{tableColumns:t.payload});case"SET_TABLE_DATA":return Object(u.a)(Object(u.a)({},e),{},{tableData:t.payload});case"RESET_TABLE_DATA":return Object(u.a)(Object(u.a)({},e),{},{tableData:null});case"SET_TABLE_PAGINATIONCONFIG":return Object(u.a)(Object(u.a)({},e),{},{tablePaginationConfig:t.payload});default:return e}},m=Object(l.b)({projects:d,user:p,table:f}),x=function(e,t){return"USER_LOGOUT"===t.type?m(void 0,t):m(e,t)},g=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.c,v=Object(l.d)(x,g(Object(l.a)(j.a))),y=a(12),S=a(221),_=a.n(S),w=a(21),C=a(113),I=a.n(C),T=a(142),k=a(357),E=a(224),L=a(354),N=a(162),P=a(133),A=a(43),F=a(361),R=a(369),D=a(370),z=a(213),q=a.n(z);function B(){var e=q.a.create({baseURL:"https://admin.kolocall.com/api",withCredentials:!0});return e.interceptors.response.use((function(e){return e}),(function(e){return 401===e.response.status||419===e.response.status?(localStorage.getItem("auth_name")&&(localStorage.clear(),window.location.reload()),Promise.reject()):Promise.reject(e)})),e}var Y=a(62),M=a.n(Y),U=(a(258),function(e){return{type:"SET_TABLE_LOADING",payload:e}}),K=function(e){return{type:"SET_TABLE_DATA",payload:e}},G=function(e){return{type:"SET_PROJECT_LOADING",payload:e}},J=function(e){return{type:"SET_PROJECT_LIST",payload:e}},V=function(e){return{type:"SET_SEARCH_PARAMS",payload:e}},H=function(e,t){return function(a){var n=e||{project:t};B().post("/project/search",n).then((function(e){var t=e.data,n={total:t.paginate.total,current_page:t.paginate.current_page,per_page:t.paginate.per_page},c=t.statuses.map((function(e){return{value:e}}));a({type:"SET_TABLE_PAGINATIONCONFIG",payload:n}),a(K(t.paginate.data)),a(function(e){return{type:"SET_PROJECT_STATUSES",payload:e}}(c))})).catch((function(){return E.b.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430")})).finally((function(){a(U(!1)),a(G(!1))}))}},W=a(4),X=function(e){var t=e.src;return Object(W.jsx)("audio",{controls:!0,src:null===t||void 0===t?void 0:t.url})},Z=a(215),Q=function(){return Object(W.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:Object(W.jsx)(Z.a,{size:"large"})})},$=a(359),ee=N.a.TextArea,te=function(e){var t=e.onCreate,a=e.onCancel,n=e.formRows,r=e.editingRow,s=e.confirmLoading,i=k.a.useForm(),o=Object(w.a)(i,1)[0];c.a.useEffect((function(){var e={};for(var t in r)""===r[t]?e[t]="-":e[t]=r[t];o.setFieldsValue(Object(u.a)({id:"",title:""},e))}),[]);return Object(W.jsx)($.a,{visible:!0,width:"600px",mask:!1,closable:!1,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u044c",okText:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",onCancel:a,confirmLoading:s,onOk:function(){o.validateFields().then((function(e){var a=Object(u.a)({id:r.id},e);t(a)})).catch((function(){return E.b.warning("\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0445 \u043f\u043e\u043b\u0435\u0439")}))},children:Object(W.jsx)(k.a,{form:o,name:"form_in_modal",labelCol:{span:6},children:n.map((function(e){var t="content"===e.dataIndex?Object(W.jsx)(ee,{rows:3,className:"form-modal-textarea"}):!1===e.editable?Object(W.jsx)(N.a,{disabled:!0}):Object(W.jsx)(N.a,{});return!0===e.editable?Object(W.jsx)(k.a.Item,{name:e.dataIndex,label:e.title,rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 ".concat(e.title)}],children:t},e.dataIndex):null}))})})},ae=a(363),ne=a(94),ce=function(e){var t=e.activeProject,a=e.searchParams,n=c.a.useState(!1),r=Object(w.a)(n,2),s=r[0],i=r[1];return Object(W.jsx)(A.a,{loading:s,onClick:function(){i(!0);var e=Object(u.a)(Object(u.a)({},a),{},{project:t.value,fields:t.table_row.split(",")});B().post("/project/export",e).then((function(e){return function(e){var a=t.table_header.split(","),n=ne.utils.book_new(),c=ne.utils.json_to_sheet([]);ne.utils.sheet_add_aoa(c,[a]),ne.utils.sheet_add_json(c,e,{origin:"A2",skipHeader:!0}),ne.utils.book_append_sheet(n,c,t.label),ne.writeFile(n,t.label+"_".concat(Date.now())+".xlsx")}(e.data)})).finally((function(){return i(!1)}))},icon:Object(W.jsx)(ae.a,{}),children:"\u042d\u043a\u0441\u043f\u043e\u0440\u0442"})},re=function(){return Object(W.jsx)("div",{style:{textAlign:"center",marginTop:"20px"},children:Object(W.jsx)(Z.a,{})})},se=a(222),ie=function(){return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)("div",{className:"d-flex",style:{justifyContent:"space-between",marginBottom:"1.5em"},children:[Object(W.jsx)(se.a.Button,{style:{width:"150px"}}),Object(W.jsx)(se.a.Button,{style:{width:"200px"}})]}),Object(W.jsx)(se.a,{paragraph:!0})]})},oe=a(61),le=a(364),je=a(41),ue=function(e){return{type:"SET_USER_INFO",payload:e}},be=function(e){return{type:"SET_USER_LIST",payload:e}},de=function(e){var t=e.onLogout,a=Object(o.b)(),n=Object(je.g)(),r=c.a.useState(!1),s=Object(w.a)(r,2),i=s[0],l=s[1];return Object(W.jsx)("button",{onClick:function(){l(!0),B().post("/logout").then((function(){var e;localStorage.clear(),t(),a({type:"USER_LOGOUT",payload:e}),n.push("/")})).catch((function(){return console.log("logout catch error")})).finally((function(){return l(!1)}))},className:"btn-logout",children:i?Object(W.jsx)(oe.a,{}):Object(W.jsx)(le.a,{})})},Oe=a(109),pe=a(140),he=a(228),fe=a(348),me=a(356),xe=a(156),ge=a(353),ve=a(365),ye=a(366),Se=a(217),_e=a.n(Se),we=function(){var e=Object(o.b)(),t=c.a.useState(null),a=Object(w.a)(t,2),n=a[0],r=a[1],s=c.a.useState(null),i=Object(w.a)(s,2),l=i[0],j=i[1],b=c.a.useState(!1),d=Object(w.a)(b,2),O=d[0],p=d[1],h=c.a.useState(null),f=Object(w.a)(h,2),m=f[0],x=f[1],g=c.a.useState({}),v=Object(w.a)(g,2),y=v[0],S=v[1],_=Object(o.c)((function(e){return e.projects})),C=_.activeProject,k=_.searchParams,L=Object(o.c)((function(e){return e.user})).userInfo.role,N=Object(o.c)((function(e){return e.table})),P=N.tableLoading,A=N.tableColumns,F=N.tablePaginationConfig,R=N.tableData,D=function(){var t=Object(T.a)(I.a.mark((function t(a,n){var c;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(U(!0)),n>15&&window.scrollTo({top:172,behavior:"smooth"}),c={project:C.value,page:a,per_page:n,from:k?k.from:null,to:k?k.to:null,phone:k?k.phone:null,status:k?k.status:null},e(H(c));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),z=0===L||1===L||2===L?[].concat(Object(Oe.a)(A),[{title:"#",dataIndex:"actions",width:35,render:function(e,t){return Object(W.jsxs)(he.b,{split:Object(W.jsx)(fe.a,{type:"vertical"}),size:1,children:[2!==L&&Object(W.jsx)(me.a.Link,{onClick:function(){return r(t)},children:Object(W.jsx)(ve.a,{style:{fontSize:18}})}),t.request_id?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(xe.a,{content:m&&m.url===y[m.id]?Object(W.jsx)(X,{src:m}):"\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430",trigger:"click",children:Object(W.jsx)(me.a.Link,{onClick:function(){return function(e){if(y[e.id]){if(y[e.id]===m.url)return;x({id:e.id,url:y[e.id]})}else x(null),B().post("/da/".concat(e.request_id),{},{responseType:"blob"}).then((function(t){var a=t.data,n=URL.createObjectURL(a);x({id:e.id,url:n});var c=Object(u.a)(Object(u.a)({},y),{},Object(pe.a)({},e.id,n));S(c)}))}(t)},children:Object(W.jsx)(ye.a,{style:{fontSize:18},twoToneColor:t.id===(null===m||void 0===m?void 0:m.id)&&"#52c41a"})})}),Object(W.jsx)(me.a.Link,{onClick:function(){return function(e){j(e.id);var t=e.time.replace(/[^\d]/g,"_");B().post("/da/".concat(e.request_id),{},{responseType:"blob"}).then((function(a){var n=a.data;_e()(n,t+"_"+e.number+".mp3")})).finally((function(){j(null)}))}(t)},children:t.id===l?Object(W.jsx)(oe.a,{style:{fontSize:18}}):Object(W.jsx)(ae.a,{style:{fontSize:18}})})]}):null]})}}]):A;return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(ge.a,{size:"middle",className:"project-table",rowKey:function(e){return e.id},columns:z,dataSource:R,loading:P,pagination:{position:["bottomCenter"],current:F.current_page,total:F.total,pageSize:F.per_page,onChange:D,hideOnSinglePage:!0},bordered:!0}),n&&Object(W.jsx)(te,{onCreate:function(t){p(!0);var a=Object(u.a)({project:C.value},t);B().patch("/project/editrow/".concat(t.id),a).then((function(a){var n=a.data;E.b.success(n.message);var c=R.map((function(e){return e.id===t.id?Object(u.a)({},n.row):e}));e(K(c))})).catch((function(){E.b.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")})).finally((function(){p(!1),r(null)}))},onCancel:function(){r(null)},formRows:A,editingRow:n,confirmLoading:O})]})},Ce=function(e){var t=e.activeProject,a=Object(o.b)();return Object(W.jsx)(A.a,{style:{marginRight:8},onClick:function(){a(U(!0)),a(H(null,t.value))},children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"})},Ie=function(){var e=Object(o.c)((function(e){return e.projects})),t=e.activeProject,a=e.searchParams,n=Object(o.c)((function(e){return e.table})).tablePaginationConfig;return Object(W.jsxs)("div",{className:"project-actions",children:[Object(W.jsxs)("div",{children:[Object(W.jsx)("span",{children:"\u0412\u0441\u0435\u0433\u043e \u0437\u0430\u043f\u0438\u0441\u0435\u0439:"})," ",n.total]}),Object(W.jsxs)("div",{children:[Object(W.jsx)(Ce,{activeProject:t}),Object(W.jsx)(ce,{activeProject:t,searchParams:a})]})]})},Te=a(79),ke=a(106),Ee=a(225),Le=a(367),Ne=function(){var e=localStorage.getItem("auth_name"),t=Object(W.jsx)(Te.a,{items:[{label:"\u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0437\u0430 \u043a\u043b\u0438\u043a",key:"1",icon:Object(W.jsx)(Le.a,{style:{fontSize:16}})}]});return Object(W.jsx)(ke.a,{overlay:t,trigger:["click"],placement:"bottomRight",children:Object(W.jsxs)("div",{className:"user-box",children:[e?Object(W.jsx)("span",{style:{marginRight:10,fontWeight:600,color:"rgba(255, 255, 255, 0.65)"},children:e}):null,Object(W.jsx)(Ee.a,{size:"small",style:{color:"#f56a00",backgroundColor:"#fde3cf"},children:e?e[0]:"-"})]})})},Pe=a(368),Ae=a(220),Fe=a.n(Ae),Re=N.a.Search,De=function(e){var t=e.text,a=e.linkText,n=e.reloadable,c=e.onReload,r=e.spin,s=e.path,o=e.resourceCount,l=e.searchable,j=e.onSearch;return Object(W.jsxs)("div",{className:Fe.a.title,children:[Object(W.jsxs)("h3",{children:[t," ",Object(W.jsx)("span",{children:o})]}),l&&Object(W.jsx)(Re,{placeholder:"\u041f\u043e\u0438\u0441\u043a",onSearch:j,allowClear:!0,style:{width:200,marginRight:"auto",marginLeft:20}}),Object(W.jsxs)(he.b,{size:"middle",children:[Object(W.jsx)(A.a,{type:"primary",children:Object(W.jsx)(i.b,{to:s,children:a})}),n&&Object(W.jsx)(Pe.a,{spin:r,onClick:c})]})]})},ze=function(e){var t=e.loading;return Object(W.jsx)(k.a.Item,{className:"fixed-resource-submit ".concat("true"===localStorage.getItem("siderCollapsed")?"long":""),children:Object(W.jsx)(A.a,{type:"primary",htmlType:"submit",loading:t,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})},qe=a(173),Be=a.n(qe),Ye=function(e){var t=e.children,a=e.compact;return Object(W.jsx)("div",{className:a?"".concat(Be.a.main," ").concat(Be.a.compact):Be.a.main,children:t})},Me=a(81),Ue=function(){return Object(W.jsx)(Me.a,{image:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",imageStyle:{height:60},description:Object(W.jsx)("span",{children:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442"})})},Ke=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.projects})),a=t.activeProject,n=t.projectLoading,r=t.searchParams,s=t.projectStatuses,i=Object(o.c)((function(e){return e.table})).tableData,l=c.a.useState(null),j=Object(w.a)(l,2),b=j[0],d=j[1],O=k.a.useForm(),p=Object(w.a)(O,1)[0];c.a.useEffect((function(){B().post("/userprojects").then((function(e){var t=e.data.map((function(e){return{id:e.id,key:e.id,value:e.tablename,label:e.name,table_header:e.table_header,table_row:e.table_row}}));d(t)}))}),[]),c.a.useEffect((function(){a&&!i&&e(H(null,a.value))}),[a]);var h=function(){var t=Object(T.a)(I.a.mark((function t(){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(V(null));case 2:p.resetFields();case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f=function(e){switch(e){case"id":return 34;case"time":return 151;case"content":return 300;default:return"auto"}};return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(Ye,{children:Object(W.jsxs)("div",{className:"controls",children:[Object(W.jsxs)(k.a,{form:p,onFinish:function(t){var n;if(a)if(t.from||t.to||t.phone||t.status||t.operator){var c=(null===(n=t.phone)||void 0===n?void 0:n.length)>10?t.phone.slice(1):t.phone,s=Object(u.a)(Object(u.a)({},t),{},{phone:c,from:t.from?t.from.format("YYYY-MM-DD"):null,to:t.to?t.to.format("YYYY-MM-DD"):null});e(U(!0)),e(V(Object(u.a)(Object(u.a)({},r),{},{from:s.from,to:s.to,phone:s.phone,operator:s.operator,status:s.status})));var i={project:a.value,from:s.from,to:s.to,phone:s.phone,operator:s.operator,status:s.status};e(H(i))}else E.b.warning("\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u043f\u043e\u0438\u0441\u043a\u0430",2);else E.b.warning("\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0440\u043e\u0435\u043a\u0442",2)},autoComplete:"off",initialValues:{from:r&&r.from?M()(r.from,"YYYY-MM-DD"):null,to:r&&r.to?M()(r.to,"YYYY-MM-DD"):null,phone:r?r.phone:null,status:r?r.status:null},layout:"inline",children:[Object(W.jsx)(k.a.Item,{name:"from",children:Object(W.jsx)(L.a,{placeholder:"\u0421"})}),Object(W.jsx)(k.a.Item,{name:"to",children:Object(W.jsx)(L.a,{placeholder:"\u041f\u043e"})}),Object(W.jsx)(k.a.Item,{name:"phone",children:Object(W.jsx)(N.a,{placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",prefix:Object(W.jsx)(R.a,{style:{color:"rgba(0, 0, 0, 0.25)"},rotate:90}),allowClear:!0})}),Object(W.jsx)(k.a.Item,{name:"operator",children:Object(W.jsx)(N.a,{placeholder:"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440",prefix:Object(W.jsx)(D.a,{style:{color:"rgba(0, 0, 0, 0.25)"}}),allowClear:!0})}),Object(W.jsx)(k.a.Item,{name:"status",children:Object(W.jsx)(P.a,{placeholder:"\u0421\u0442\u0430\u0442\u0443\u0441",style:{width:202},options:s||null,allowClear:!0})}),Object(W.jsx)(k.a.Item,{children:Object(W.jsx)(A.a,{type:"primary",htmlType:"submit",children:"\u041f\u043e\u0438\u0441\u043a"})}),r&&Object(W.jsx)(k.a.Item,{children:Object(W.jsx)(A.a,{onClick:function(){e(U(!0)),h(),e(H(null,a.value))},children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c"})})]}),Object(W.jsx)(P.a,{value:a?a.label:null,showSearch:!0,style:{width:202,marginLeft:8},placeholder:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442",optionFilterProp:"label",onChange:function(t,a){e(G(!0)),h();var n=a.table_header.split(","),c=a.table_row.split(","),r=n.map((function(e,t){return{title:e,dataIndex:c[t],width:n.length>7?f(c[t]):148,render:"time"===c[t]&&function(e){return M()(e).format("DD.MM.YYYY H:mm")},editable:"id"!==c[t]&&"time"!==c[t]&&"operator"!==c[t]&&"que"!==c[t]}}));e({type:"RESET_TABLE_DATA"}),e({type:"SET_ACTIVE_PROJECT",payload:a}),e(function(e){return{type:"SET_TABLE_COLUMNS",payload:e}}(r))},options:b,filterOption:function(e,t){return t.label.toLowerCase().indexOf(e.toLowerCase())>=0}})]})}),Object(W.jsx)(Ye,{children:n?Object(W.jsx)(re,{}):i?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(Ie,{}),Object(W.jsx)(we,{})]}):Object(W.jsx)(Ue,{})}),Object(W.jsx)(F.a,{duration:800})]})},Ge=a(349),Je=a(371),Ve=a(372),He=a.p+"static/media/brand_logo.e9581c6a.svg",We=Ge.a.Header,Xe=Ge.a.Content,Ze=Ge.a.Sider,Qe=function(e){var t=e.onSuccessLogout,a=Object(je.h)(),n=Object(je.g)(),r=Object(o.c)((function(e){return e.user})).userInfo,s=c.a.useState(!1),i=Object(w.a)(s,2),l=i[0],j=i[1],u=0===r.role,b=[{label:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",key:"/",icon:Object(W.jsx)(Je.a,{})},!!u&&{label:"\u041f\u0440\u043e\u0435\u043a\u0442\u044b",key:"projects",icon:Object(W.jsx)(Ve.a,{}),children:[{label:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u0432",key:"/projects"},{label:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442",key:"/projects/create"}]},!!u&&{label:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438",key:"users",icon:Object(W.jsx)(D.a,{}),children:[{label:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439",key:"/users"},{label:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",key:"/users/create"}]}];return Object(W.jsxs)(Ge.a,{children:[Object(W.jsxs)(We,{children:[Object(W.jsx)("div",{className:"logo",children:Object(W.jsx)("img",{src:He,alt:"company-logo"})}),Object(W.jsxs)("div",{className:"d-flex",children:[Object(W.jsx)(Ne,{}),Object(W.jsx)(de,{onLogout:t})]})]}),Object(W.jsxs)(Ge.a,{children:[Object(W.jsx)(Ze,{width:210,collapsible:!0,collapsed:l,onCollapse:function(e){j(e),localStorage.setItem("siderCollapsed",e)},children:Object(W.jsx)(Te.a,{selectedKeys:[a.pathname],mode:"inline",className:"menu",items:b,onSelect:function(e){var t=e.key;n.push(t)}})}),Object(W.jsx)(Ge.a,{children:Object(W.jsx)(Xe,{children:Object(W.jsxs)(je.d,{children:[Object(W.jsx)(je.b,{exact:!0,path:"/",children:Object(W.jsx)(Ke,{})}),u&&Object(W.jsxs)(je.d,{children:[Object(W.jsx)(je.b,{exact:!0,path:"/projects",children:Object(W.jsx)(ut,{})}),Object(W.jsx)(je.b,{exact:!0,path:"/projects/:id/edit",children:Object(W.jsx)(rt,{})}),Object(W.jsx)(je.b,{exact:!0,path:"/projects/create",children:Object(W.jsx)(st,{})}),Object(W.jsx)(je.b,{exact:!0,path:"/users",children:Object(W.jsx)(ht,{})}),Object(W.jsx)(je.b,{exact:!0,path:"/users/:id/edit",children:Object(W.jsx)(mt,{})}),Object(W.jsx)(je.b,{exact:!0,path:"/users/create",children:Object(W.jsx)(ft,{})}),Object(W.jsx)(je.a,{to:"/"})]}),Object(W.jsx)(je.a,{to:"/"})]})})})]})]})},$e=a(358),et=a(355),tt=a(350),at=a(351),nt=a(362),ct=a(360),rt=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.user})).userList,a=Object(o.c)((function(e){return e.projects})).projectList,n=c.a.useState(!0),r=Object(w.a)(n,2),s=r[0],i=r[1],l=c.a.useState(!1),j=Object(w.a)(l,2),b=j[0],d=j[1],O=c.a.useState({}),p=Object(w.a)(O,2),h=p[0],f=p[1],m=c.a.useState([]),x=Object(w.a)(m,2),g=x[0],v=x[1],y=c.a.useState(!1),S=Object(w.a)(y,2),_=S[0],C=S[1],I=c.a.useState(!1),T=Object(w.a)(I,2),L=T[0],P=T[1],A=Object(je.i)().id,F=Object(je.g)();c.a.useEffect((function(){t||R()}),[]);var R=function(){B().get("/users").then((function(t){var a=t.data;e(be(a))})).catch((function(){return E.b.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0441\u043f\u0438\u0441\u043a\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439")}))};c.a.useEffect((function(){B().get("/projects/".concat(A,"/edit")).then((function(e){var t=e.data;if(f(t),C(1===t.client_available),P(1===t.oper_available),t.users.length>0){var a=t.users.map((function(e){return e.id}));v(a)}})).catch((function(){return E.b.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e \u0442\u0435\u043a\u0443\u0449\u0435\u043c\u0443 \u043f\u0440\u043e\u0435\u043a\u0442\u0443")})).finally((function(){i(!1)}))}),[A]);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)($e.a,{className:"page-header",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430",onBack:function(){return window.history.back()}}),s?Object(W.jsx)(re,{}):Object(W.jsxs)(k.a,{name:"edit-project",onFinish:function(t){d(!0);var n=Object(u.a)(Object(u.a)({},t),{},{users:g});B().put("/projects/".concat(A),n).then((function(t){var n=t.data;E.b.success(n.message),function(t){var n=a.map((function(e){return e.id===t.id?t:e}));e(J(n))}(n.project),F.push("/projects")})).catch((function(){return E.b.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043f\u0440\u043e\u0435\u043a\u0442\u0430")})).finally((function(){return d(!1)}))},layout:"vertical",initialValues:h,autoComplete:"off",children:[Object(W.jsx)(Ye,{compact:!0,children:Object(W.jsxs)(et.a,{title:"\u041e\u0441\u043d\u043e\u0432\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f",bordered:!1,children:[Object(W.jsxs)(tt.a,{gutter:16,justify:"space-between",children:[Object(W.jsx)(at.a,{sm:{span:24},md:{span:12},lg:{span:6},children:Object(W.jsx)(k.a.Item,{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430",name:"name",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435!"}],children:Object(W.jsx)(N.a,{})})}),Object(W.jsx)(at.a,{sm:{span:24},md:{span:12},lg:{span:6},children:Object(W.jsx)(k.a.Item,{label:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430",tooltip:{title:"\u0423\u043a\u0430\u0437\u0430\u0442\u044c \u0438\u043c\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0438\u0437 \u0411\u0414"},name:"tablename",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u0443!"}],children:Object(W.jsx)(N.a,{})})}),Object(W.jsx)(at.a,{sm:{span:24},md:{span:24},lg:{span:6},children:Object(W.jsxs)(he.b,{size:"large",children:[Object(W.jsx)(k.a.Item,{name:"oper_available",label:"\u041b\u041a \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430",valuePropName:"checked",children:Object(W.jsx)(nt.a,{onChange:function(e){P(e)}})}),Object(W.jsx)(k.a.Item,{name:"client_available",label:"\u041b\u041a \u043a\u043b\u0438\u0435\u043d\u0442\u0430",valuePropName:"checked",children:Object(W.jsx)(nt.a,{onChange:function(e){C(e)}})})]})})]}),Object(W.jsxs)(tt.a,{gutter:16,justify:"space-between",children:[Object(W.jsx)(at.a,{sm:{span:24},md:{span:24},lg:{span:6},children:Object(W.jsx)(k.a.Item,{label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0442\u0430\u0431\u043b\u0438\u0446\u044b",tooltip:{title:"\u0427\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u044f\u0442\u0443\u044e. \u041f\u0440\u0438\u043c\u0435\u0440: ID,\u0418\u043c\u044f,\u0422\u0435\u043b\u0435\u0444\u043e\u043d"},name:"table_header",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0442\u0430\u0431\u043b\u0438\u0446\u044b!"}],children:Object(W.jsx)(N.a,{})})}),Object(W.jsx)(at.a,{sm:{span:24},md:{span:24},lg:{span:6},children:Object(W.jsx)(k.a.Item,{label:"\u0421\u0442\u0440\u043e\u043a\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u044b",tooltip:{title:"\u041f\u043e\u043b\u044f \u0438\u0437 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0432 \u0411\u0414 \u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u044f\u0442\u0443\u044e. \u041f\u0440\u0438\u043c\u0435\u0440: id,name,number"},name:"table_row",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u0442\u0440\u043e\u043a\u0443 \u0442\u0430\u0431\u043b\u0438\u0446\u044b!"}],children:Object(W.jsx)(N.a,{})})}),Object(W.jsx)(at.a,{sm:{span:24},md:{span:24},lg:{span:6},children:Object(W.jsx)(k.a.Item,{name:"changes",label:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f",valuePropName:"checked",children:Object(W.jsx)(nt.a,{})})})]}),Object(W.jsxs)(tt.a,{gutter:16,children:[_&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(at.a,{sm:{span:24},md:{span:24},lg:{span:6},children:Object(W.jsx)(k.a.Item,{label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0432 \u041b\u041a",tooltip:{title:"\u0427\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u044f\u0442\u0443\u044e. \u041f\u0440\u0438\u043c\u0435\u0440: ID,\u0418\u043c\u044f,\u0422\u0435\u043b\u0435\u0444\u043e\u043d"},name:"table_header_client",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0442\u0430\u0431\u043b\u0438\u0446\u044b!"}],children:Object(W.jsx)(N.a,{})})}),Object(W.jsx)(at.a,{sm:{span:24},md:{span:24},lg:{span:6,offset:3},children:Object(W.jsx)(k.a.Item,{label:"\u0421\u0442\u0440\u043e\u043a\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0432 \u041b\u041a",tooltip:{title:"\u041f\u043e\u043b\u044f \u0438\u0437 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0432 \u0411\u0414 \u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u044f\u0442\u0443\u044e. \u041f\u0440\u0438\u043c\u0435\u0440: id,name,number"},name:"table_row_client",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u0442\u0440\u043e\u043a\u0443 \u0442\u0430\u0431\u043b\u0438\u0446\u044b!"}],children:Object(W.jsx)(N.a,{})})})]}),L&&Object(W.jsx)(W.Fragment,{children:Object(W.jsx)(at.a,{sm:{span:24},md:{span:24},lg:{span:6,offset:_?3:0},children:Object(W.jsx)(k.a.Item,{label:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0441\u043a\u0440\u0438\u043f\u0442",name:"scriptlink",children:Object(W.jsx)(N.a,{})})})})]})]})}),Object(W.jsx)(Ye,{compact:!0,children:Object(W.jsxs)(et.a,{title:"\u041f\u0440\u0438\u0432\u044f\u0437\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439",bordered:!1,children:[Object(W.jsx)(k.a.Item,{children:Object(W.jsx)(ct.a,{className:"transfer-list",dataSource:(null===t||void 0===t?void 0:t.filter((function(e){return 0!==e.role})))||[],titles:["\u0412\u0441\u0435","\u0414\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u0434\u043b\u044f"],targetKeys:g,onChange:function(e){v(e)},filterOption:function(e,t){return t.name.toLowerCase().indexOf(e.toLowerCase())>-1},rowKey:function(e){return e.id},render:function(e){return e.name},showSearch:!0,oneWay:!0})}),Object(W.jsx)(ze,{loading:b})]})})]})]})},st=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.user})).userList,a=Object(o.c)((function(e){return e.projects})).projectList,n=c.a.useState([]),r=Object(w.a)(n,2),s=r[0],i=r[1],l=c.a.useState(!1),j=Object(w.a)(l,2),b=j[0],d=j[1],O=c.a.useState(!1),p=Object(w.a)(O,2),h=p[0],f=p[1],m=c.a.useState(!1),x=Object(w.a)(m,2),g=x[0],v=x[1],y=Object(je.g)();c.a.useEffect((function(){t||S()}),[]);var S=function(){B().get("/users").then((function(t){var a=t.data;e(be(a))})).catch((function(){return E.b.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0441\u043f\u0438\u0441\u043a\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439")}))};return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)($e.a,{className:"page-header",title:"\u041d\u043e\u0432\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442",onBack:function(){return window.history.back()}}),Object(W.jsxs)(k.a,{name:"new-project",onFinish:function(t){d(!0);var n=Object(u.a)(Object(u.a)({},t),{},{users:s});B().post("/projects",n).then((function(t){var n=t.data;E.b.success(n.message),function(t){var n=[].concat(Object(Oe.a)(a),[t]);e(J(n))}(n.project),y.push("/projects")})).catch((function(){return E.b.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u043f\u0440\u043e\u0435\u043a\u0442\u0430")})).finally((function(){return d(!1)}))},layout:"vertical",initialValues:{changes:!1,client_available:!1,oper_available:!1},autoComplete:"off",children:[Object(W.jsx)(Ye,{compact:!0,children:Object(W.jsxs)(et.a,{title:"\u041e\u0441\u043d\u043e\u0432\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f",bordered:!1,children:[Object(W.jsxs)(tt.a,{gutter:16,justify:"space-between",children:[Object(W.jsx)(at.a,{sm:{span:24},md:{span:12},lg:{span:6},children:Object(W.jsx)(k.a.Item,{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430",name:"name",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435!"}],children:Object(W.jsx)(N.a,{})})}),Object(W.jsx)(at.a,{sm:{span:24},md:{span:12},lg:{span:6},children:Object(W.jsx)(k.a.Item,{label:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430",tooltip:{title:"\u0423\u043a\u0430\u0437\u0430\u0442\u044c \u0438\u043c\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0438\u0437 \u0411\u0414"},name:"tablename",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u0443!"}],children:Object(W.jsx)(N.a,{})})}),Object(W.jsx)(at.a,{sm:{span:24},md:{span:24},lg:{span:6},children:Object(W.jsxs)(he.b,{size:"large",children:[Object(W.jsx)(k.a.Item,{name:"oper_available",label:"\u041b\u041a \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430",valuePropName:"checked",children:Object(W.jsx)(nt.a,{onChange:function(e){v(e)}})}),Object(W.jsx)(k.a.Item,{name:"client_available",label:"\u041b\u041a \u043a\u043b\u0438\u0435\u043d\u0442\u0430",valuePropName:"checked",children:Object(W.jsx)(nt.a,{onChange:function(e){f(e)}})})]})})]}),Object(W.jsxs)(tt.a,{gutter:16,justify:"space-between",children:[Object(W.jsx)(at.a,{sm:{span:24},md:{span:24},lg:{span:6},children:Object(W.jsx)(k.a.Item,{label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0442\u0430\u0431\u043b\u0438\u0446\u044b",tooltip:{title:"\u0427\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u044f\u0442\u0443\u044e. \u041f\u0440\u0438\u043c\u0435\u0440: ID,\u0418\u043c\u044f,\u0422\u0435\u043b\u0435\u0444\u043e\u043d"},name:"table_header",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0442\u0430\u0431\u043b\u0438\u0446\u044b!"}],children:Object(W.jsx)(N.a,{})})}),Object(W.jsx)(at.a,{sm:{span:24},md:{span:24},lg:{span:6},children:Object(W.jsx)(k.a.Item,{label:"\u0421\u0442\u0440\u043e\u043a\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u044b",tooltip:{title:"\u041f\u043e\u043b\u044f \u0438\u0437 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0432 \u0411\u0414 \u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u044f\u0442\u0443\u044e. \u041f\u0440\u0438\u043c\u0435\u0440: id,name,number"},name:"table_row",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u0442\u0440\u043e\u043a\u0443 \u0442\u0430\u0431\u043b\u0438\u0446\u044b!"}],children:Object(W.jsx)(N.a,{})})}),Object(W.jsx)(at.a,{sm:{span:24},md:{span:24},lg:{span:6},children:Object(W.jsx)(k.a.Item,{name:"changes",label:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f",valuePropName:"checked",children:Object(W.jsx)(nt.a,{})})})]}),Object(W.jsxs)(tt.a,{gutter:16,children:[h&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(at.a,{sm:{span:24},md:{span:24},lg:{span:6},children:Object(W.jsx)(k.a.Item,{label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0432 \u041b\u041a",tooltip:{title:"\u0427\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u044f\u0442\u0443\u044e. \u041f\u0440\u0438\u043c\u0435\u0440: ID,\u0418\u043c\u044f,\u0422\u0435\u043b\u0435\u0444\u043e\u043d"},name:"table_header_client",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0442\u0430\u0431\u043b\u0438\u0446\u044b!"}],children:Object(W.jsx)(N.a,{})})}),Object(W.jsx)(at.a,{sm:{span:24},md:{span:24},lg:{span:6,offset:3},children:Object(W.jsx)(k.a.Item,{label:"\u0421\u0442\u0440\u043e\u043a\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0432 \u041b\u041a",tooltip:{title:"\u041f\u043e\u043b\u044f \u0438\u0437 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0432 \u0411\u0414 \u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u044f\u0442\u0443\u044e. \u041f\u0440\u0438\u043c\u0435\u0440: id,name,number"},name:"table_row_client",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u0442\u0440\u043e\u043a\u0443 \u0442\u0430\u0431\u043b\u0438\u0446\u044b!"}],children:Object(W.jsx)(N.a,{})})})]}),g&&Object(W.jsx)(W.Fragment,{children:Object(W.jsx)(at.a,{sm:{span:24},md:{span:24},lg:{span:6,offset:h?3:0},children:Object(W.jsx)(k.a.Item,{label:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0441\u043a\u0440\u0438\u043f\u0442",name:"scriptlink",children:Object(W.jsx)(N.a,{})})})})]})]})}),Object(W.jsx)(Ye,{compact:!0,children:Object(W.jsxs)(et.a,{title:"\u041f\u0440\u0438\u0432\u044f\u0437\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439",bordered:!1,children:[Object(W.jsx)(k.a.Item,{children:Object(W.jsx)(ct.a,{className:"transfer-list",dataSource:(null===t||void 0===t?void 0:t.filter((function(e){return 0!==e.role})))||[],titles:["\u0412\u0441\u0435","\u0414\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u0434\u043b\u044f"],targetKeys:s,onChange:function(e){i(e)},filterOption:function(e,t){return t.name.toLowerCase().indexOf(e.toLowerCase())>-1},rowKey:function(e){return e.id},render:function(e){return e.name},showSearch:!0,oneWay:!0})}),Object(W.jsx)(ze,{loading:b})]})})]})]})},it=a(352),ot=a(373),lt=a(374),jt=a(375),ut=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.projects})).projectList,a=c.a.useState(!1),n=Object(w.a)(a,2),r=n[0],s=n[1],l=c.a.useState(!1),j=Object(w.a)(l,2),u=j[0],b=j[1],d=c.a.useState(""),O=Object(w.a)(d,2),p=O[0],h=O[1];c.a.useEffect((function(){t||(s(!0),f())}),[]);var f=function(){B().get("/projects").then((function(t){var a=t.data;e(J(a))})).catch((function(){return E.b.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0441\u043f\u0438\u0441\u043a\u0430 \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u0432")})).finally((function(){s(!1),b(!1)}))},m=[{title:"\u041f\u0440\u043e\u0435\u043a\u0442",dataIndex:"name",key:"name",ellipsis:!0},{title:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430",dataIndex:"tablename",key:"tablename",ellipsis:!0},{title:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0442\u0430\u0431\u043b\u0438\u0446\u044b",dataIndex:"table_header",key:"table_header",ellipsis:!0},{title:"\u0421\u0442\u0440\u043e\u043a\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u044b",dataIndex:"table_row",key:"table_row",ellipsis:!0},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f",dataIndex:"changes",width:120,key:"changes",align:"center",render:function(e){return Object(W.jsx)(W.Fragment,{children:e?Object(W.jsx)(ot.a,{twoToneColor:"#52c41a",style:{fontSize:"16px"}}):Object(W.jsx)(lt.a,{twoToneColor:"#f5222d",style:{fontSize:"16px"}})})}},{title:"\u041b\u041a \u043a\u043b\u0438\u0435\u043d\u0442\u0430",dataIndex:"client_available",width:120,key:"client_available",align:"center",render:function(e){return Object(W.jsx)(W.Fragment,{children:e?Object(W.jsx)(ot.a,{twoToneColor:"#52c41a",style:{fontSize:"16px"}}):Object(W.jsx)(lt.a,{twoToneColor:"#f5222d",style:{fontSize:"16px"}})})}},{title:"\u041b\u041a \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430",dataIndex:"oper_available",width:120,key:"oper_available",align:"center",render:function(e){return Object(W.jsx)(W.Fragment,{children:e?Object(W.jsx)(ot.a,{twoToneColor:"#52c41a",style:{fontSize:"16px"}}):Object(W.jsx)(lt.a,{twoToneColor:"#f5222d",style:{fontSize:"16px"}})})}},{title:"#",key:"action",width:103,align:"center",render:function(a,n){return Object(W.jsxs)(he.b,{size:"small",split:Object(W.jsx)(fe.a,{type:"vertical"}),children:[Object(W.jsx)(i.b,{to:"/projects/".concat(n.id,"/edit"),children:Object(W.jsx)(ve.a,{style:{fontSize:"20px"}})}),Object(W.jsx)(it.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442?",onConfirm:function(a){return c=n.id,void B().delete("/projects/".concat(c)).then((function(a){var n=a.data,r=t.filter((function(e){return e.id!==c}));e(J(r)),E.b.success(n.message)})).catch((function(){return E.b.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043f\u0440\u043e\u0435\u043a\u0442\u0430")}));var c},placement:"topRight",okText:"\u0414\u0430",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",children:Object(W.jsx)(A.a,{type:"link",className:"btn-link",children:Object(W.jsx)(jt.a,{twoToneColor:"#f5222d",style:{fontSize:"20px"}})})})]})}}];return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)($e.a,{className:"page-header",title:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430\u043c\u0438"}),Object(W.jsx)(Ye,{children:r?Object(W.jsx)(ie,{}):Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(De,{text:"\u041f\u0440\u043e\u0435\u043a\u0442\u044b",linkText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442",path:"/projects/create",onReload:function(){b(!0),f()},spin:u,resourceCount:null===t||void 0===t?void 0:t.length,onSearch:function(e){return h(e)},reloadable:!0,searchable:!0}),Object(W.jsx)(ge.a,{style:{width:"100%"},rowKey:function(e){return e.id},columns:m,loading:u,dataSource:null===t||void 0===t?void 0:t.filter((function(e){return e.name.toLowerCase().includes(p.toLowerCase())})),pagination:{hideOnSinglePage:!0}})]})})]})},bt=[{label:"\u0410\u0434\u043c\u0438\u043d",value:0},{label:"\u0421\u0443\u043f\u0435\u0440\u0432\u0430\u0439\u0437\u0435\u0440",value:1},{label:"\u0421\u0442\u0430\u0440\u0448\u0438\u0439 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440",value:2}],dt=a(229),Ot=a(60),pt=a(376),ht=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.user})).userList,a=c.a.useState(!1),n=Object(w.a)(a,2),r=n[0],s=n[1],l=c.a.useState(!1),j=Object(w.a)(l,2),u=j[0],b=j[1];c.a.useEffect((function(){t||(s(!0),d())}),[]);var d=function(){B().get("/users").then((function(t){var a=t.data;e(be(a))})).finally((function(){s(!1),b(!1)}))},O=[{title:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",dataIndex:"name",key:"name",render:function(e,t){return Object(W.jsx)(W.Fragment,{children:0===t.role||1===t.role?Object(W.jsxs)(W.Fragment,{children:[t.name," ",Object(W.jsx)(dt.a,{children:bt[t.role].label})]}):t.name})}},{title:"\u041b\u043e\u0433\u0438\u043d",dataIndex:"username",key:"username",ellipsis:!0},{title:"#",key:"action",width:130,align:"center",render:function(a,n){return Object(W.jsxs)(he.b,{size:"middle",children:[Object(W.jsx)(i.b,{to:"/users/".concat(n.id,"/edit"),children:Object(W.jsx)(ve.a,{style:{fontSize:"20px"}})}),Object(W.jsx)(it.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f?",onConfirm:function(a){return c=n.id,void B().delete("/users/".concat(c)).then((function(a){var n=a.data,r=t.filter((function(e){return e.id!==c}));e(be(r)),E.b.success(n.message)})).catch((function(){return E.b.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f")}));var c},placement:"topRight",okText:"\u0414\u0430",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",children:Object(W.jsx)(A.a,{type:"link",className:"btn-link",children:Object(W.jsx)(jt.a,{twoToneColor:"#f5222d",style:{fontSize:"20px"}})})}),Object(W.jsx)(Ot.a,{title:"\u0421\u043c\u0435\u043d\u0430 \u043f\u0430\u0440\u043e\u043b\u044f",children:Object(W.jsx)(A.a,{type:"link",className:"btn-link",onClick:function(){return function(e){var t=prompt("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c");t&&B().patch("/user/changepwd",{userid:e,password:t}).then((function(e){var t=e.data;E.b.success(t.message)})).catch((function(){return E.b.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043c\u0435\u043d\u0435 \u043f\u0430\u0440\u043e\u043b\u044f")}))}(n.id)},children:Object(W.jsx)(pt.a,{style:{fontSize:"20px"}})})})]})}}];return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)($e.a,{className:"page-header",title:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c\u0438"}),Object(W.jsx)(Ye,{children:r?Object(W.jsx)(ie,{}):Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(De,{text:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438",linkText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",path:"/users/create",onReload:function(){b(!0),d()},resourceCount:null===t||void 0===t?void 0:t.length,spin:u,reloadable:!0}),Object(W.jsx)(ge.a,{style:{width:"100%"},rowKey:function(e){return e.id},columns:O,loading:u,dataSource:t,pagination:{hideOnSinglePage:!0}})]})})]})},ft=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.user})).userList,a=Object(o.c)((function(e){return e.projects})).projectList,n=c.a.useState(!1),r=Object(w.a)(n,2),s=r[0],i=r[1],l=c.a.useState([]),j=Object(w.a)(l,2),b=j[0],d=j[1],O=c.a.useState(!1),p=Object(w.a)(O,2),h=p[0],f=p[1],m=Object(je.g)();c.a.useEffect((function(){a||x()}),[]);var x=function(){B().get("/projects").then((function(t){var a=t.data;e(J(a))})).catch((function(){return E.b.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0441\u043f\u0438\u0441\u043a\u0430 \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u0432")}))};return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)($e.a,{className:"page-header",title:"\u041d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",onBack:function(){return window.history.back()}}),Object(W.jsxs)(k.a,{name:"new-user",onFinish:function(a){i(!0);var n=Object(u.a)(Object(u.a)({},a),{},{projects:h?[]:b});B().post("/users",n).then((function(a){var n=a.data;E.b.success(n.message),function(a){var n=[].concat(Object(Oe.a)(t),[a]);e(be(n))}(n.user),m.push("/users")})).catch((function(){E.b.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")})).finally((function(){return i(!1)}))},layout:"vertical",autoComplete:"off",children:[Object(W.jsx)(Ye,{compact:!0,children:Object(W.jsx)(et.a,{title:"\u041e\u0441\u043d\u043e\u0432\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f",bordered:!1,children:Object(W.jsxs)(tt.a,{gutter:16,justify:"space-between",children:[Object(W.jsx)(at.a,{sm:{span:24},md:{span:12},lg:{span:5},children:Object(W.jsx)(k.a.Item,{label:"\u0418\u043c\u044f",name:"name",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f!"}],children:Object(W.jsx)(N.a,{})})}),Object(W.jsx)(at.a,{sm:{span:24},md:{span:12},lg:{span:5,offset:1},children:Object(W.jsx)(k.a.Item,{label:"\u041b\u043e\u0433\u0438\u043d",name:"username",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d!"}],children:Object(W.jsx)(N.a,{})})}),Object(W.jsx)(at.a,{sm:{span:24},md:{span:12},lg:{span:5,offset:1},children:Object(W.jsx)(k.a.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!"}],children:Object(W.jsx)(N.a.Password,{})})}),Object(W.jsx)(at.a,{sm:{span:24},md:{span:12},lg:{span:5,offset:1},children:Object(W.jsx)(k.a.Item,{label:"\u0420\u043e\u043b\u044c",name:"role",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0440\u043e\u043b\u044c!"}],children:Object(W.jsx)(P.a,{placeholder:"\u0420\u043e\u043b\u044c",options:bt,onChange:function(e){f(!!(0===e))}})})})]})})}),!h&&Object(W.jsx)(Ye,{compact:!0,children:Object(W.jsx)(et.a,{title:"\u041f\u0440\u0438\u0432\u044f\u0437\u0430\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442\u044b",bordered:!1,children:Object(W.jsx)(k.a.Item,{children:Object(W.jsx)(ct.a,{className:"transfer-list",dataSource:a||[],titles:["\u0412\u0441\u0435","\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435"],targetKeys:b,onChange:function(e){d(e)},filterOption:function(e,t){return t.name.toLowerCase().indexOf(e.toLowerCase())>-1},rowKey:function(e){return e.id},render:function(e){return e.name},showSearch:!0,oneWay:!0})})})}),Object(W.jsx)(ze,{loading:s})]})]})},mt=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.user})).userList,a=Object(o.c)((function(e){return e.projects})).projectList,n=c.a.useState(!0),r=Object(w.a)(n,2),s=r[0],i=r[1],l=c.a.useState(!1),j=Object(w.a)(l,2),b=j[0],d=j[1],O=c.a.useState({}),p=Object(w.a)(O,2),h=p[0],f=p[1],m=c.a.useState([]),x=Object(w.a)(m,2),g=x[0],v=x[1],y=c.a.useState(!1),S=Object(w.a)(y,2),_=S[0],C=S[1],I=Object(je.i)().id,T=Object(je.g)();c.a.useEffect((function(){B().get("/users/".concat(I,"/edit")).then((function(e){var t=e.data;f(t),0===t.role&&C(!0);var a=t.projects.map((function(e){return e.id}));v(a)})).catch((function(){return E.b.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0445 \u0434\u0430\u043d\u043d\u044b\u0445")})).finally((function(){i(!1)}))}),[I]),c.a.useEffect((function(){a||L()}),[]);var L=function(){B().get("/projects").then((function(t){var a=t.data;e(J(a))})).catch((function(){return E.b.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0441\u043f\u0438\u0441\u043a\u0430 \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u0432")}))};return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)($e.a,{className:"page-header",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",onBack:function(){return window.history.back()}}),s?Object(W.jsx)(re,{}):Object(W.jsxs)(k.a,{name:"edit-user",onFinish:function(a){d(!0);var n=Object(u.a)(Object(u.a)({},a),{},{projects:_?[]:g});B().put("/users/".concat(I),n).then((function(a){var n=a.data;E.b.success(n.message),function(a){var n=t.map((function(e){return e.id===a.id?a:e}));e(be(n))}(n.user),T.push("/users")})).catch((function(){E.b.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")})).finally((function(){return d(!1)}))},layout:"vertical",initialValues:h,autoComplete:"off",children:[Object(W.jsx)(Ye,{compact:!0,children:Object(W.jsx)(et.a,{title:"\u041e\u0441\u043d\u043e\u0432\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f",bordered:!1,children:Object(W.jsxs)(tt.a,{gutter:16,justify:"space-between",children:[Object(W.jsx)(at.a,{sm:{span:24},md:{span:12},lg:{span:6},children:Object(W.jsx)(k.a.Item,{label:"\u0418\u043c\u044f",name:"name",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f!"}],children:Object(W.jsx)(N.a,{})})}),Object(W.jsx)(at.a,{sm:{span:24},md:{span:12},lg:{span:6,offset:3},children:Object(W.jsx)(k.a.Item,{label:"\u041b\u043e\u0433\u0438\u043d",name:"username",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d!"}],children:Object(W.jsx)(N.a,{})})}),Object(W.jsx)(at.a,{sm:{span:24},md:{span:12},lg:{span:6,offset:3},children:Object(W.jsx)(k.a.Item,{label:"\u0420\u043e\u043b\u044c",name:"role",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0440\u043e\u043b\u044c!"}],children:Object(W.jsx)(P.a,{placeholder:"\u0420\u043e\u043b\u044c",options:bt,onChange:function(e){C(!!(0===e))}})})})]})})}),!_&&Object(W.jsx)(Ye,{compact:!0,children:Object(W.jsx)(et.a,{title:"\u041f\u0440\u0438\u0432\u044f\u0437\u0430\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442\u044b",bordered:!1,children:Object(W.jsx)(k.a.Item,{children:Object(W.jsx)(ct.a,{className:"transfer-list",dataSource:a||[],titles:["\u0412\u0441\u0435","\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435"],targetKeys:g,onChange:function(e){v(e)},filterOption:function(e,t){return t.name.toLowerCase().indexOf(e.toLowerCase())>-1},rowKey:function(e){return e.id},render:function(e){return e.name},showSearch:!0,oneWay:!0})})})}),Object(W.jsx)(ze,{loading:b})]})]})},xt=a(377),gt=function(e){var t=e.onLogin,a=c.a.useState(!1),n=Object(w.a)(a,2),r=n[0],s=n[1],i=Object(o.b)(),l=Object(je.g)();return Object(W.jsx)("div",{className:"login",children:Object(W.jsxs)(k.a,{className:"login-form",onFinish:function(e){s(!0),B().get("/csrf-cookie").then((function(){B().post("/login",e).then((function(e){var a=e.data;localStorage.setItem("auth_name",a.name),i(ue(a)),t(),l.push("/")})).catch((function(e){return E.b.error(e.response.data.message)}))})).finally((function(){return s(!1)}))},autoComplete:"off",size:"large",children:[Object(W.jsx)(k.a.Item,{name:"username",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d!"}],children:Object(W.jsx)(N.a,{prefix:Object(W.jsx)(D.a,{className:"site-form-item-icon"}),placeholder:"\u041b\u043e\u0433\u0438\u043d"})}),Object(W.jsx)(k.a.Item,{name:"password",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!"}],children:Object(W.jsx)(N.a.Password,{prefix:Object(W.jsx)(xt.a,{className:"site-form-item-icon"}),placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"})}),Object(W.jsx)(k.a.Item,{children:Object(W.jsx)(A.a,{type:"primary",htmlType:"submit",className:"login-form-button",loading:r,children:"\u0412\u043e\u0439\u0442\u0438"})})]})})},vt=(a(342),function(){var e=Object(o.b)(),t=c.a.useState(!1),a=Object(w.a)(t,2),n=a[0],r=a[1],s=c.a.useState(!1),i=Object(w.a)(s,2),l=i[0],j=i[1];return c.a.useEffect((function(){B().post("me").then((function(t){var a=t.data;e(ue(a)),j(!0),r(!0)})).catch((function(){j(!0),r(!1)}))}),[]),n?Object(W.jsx)(Qe,{onSuccessLogout:function(){r(!1)}}):l?Object(W.jsx)(gt,{onLogin:function(){r(!0)}}):Object(W.jsx)(Q,{})});s.a.render(Object(W.jsx)(c.a.StrictMode,{children:Object(W.jsx)(y.a,{locale:_.a,children:Object(W.jsx)(i.a,{children:Object(W.jsx)(o.a,{store:v,children:Object(W.jsx)(vt,{})})})})}),document.getElementById("root"))}},[[347,1,2]]]);
//# sourceMappingURL=main.c6356864.chunk.js.map