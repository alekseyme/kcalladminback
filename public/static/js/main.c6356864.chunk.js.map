{"version":3,"sources":["components/Box/Box.module.css","components/BoxTitle/BoxTitle.module.css","redux/reducers/projects.js","redux/reducers/user.js","redux/reducers/table.js","redux/reducers/index.js","redux/store.js","util/api.js","redux/actions/table.js","redux/actions/projects.js","components/AudioPlayere.jsx","components/AuthLoader.jsx","components/EditingModalForm.jsx","components/ExportButton.jsx","components/Loader.jsx","components/ResourceLoader.jsx","redux/actions/user.js","components/LogoutButton.jsx","components/ProjectTable.jsx","components/ReloadButton.jsx","components/TableControls.jsx","components/UserBlock.jsx","components/BoxTitle/index.jsx","components/FormSave.jsx","components/Box/index.jsx","components/EmptyProject.jsx","pages/Main/Main.jsx","brand_logo.svg","pages/Home.jsx","pages/Project/EditProject.jsx","pages/Project/CreateProject.jsx","pages/Project/Project.jsx","util/roles.js","pages/User/User.jsx","pages/User/CreateUser.jsx","pages/User/EditUser.jsx","pages/Auth/Login.jsx","App.jsx","index.js"],"names":["module","exports","initialState","activeProject","projectLoading","projectStatuses","projectList","searchParams","projects","state","action","type","payload","userInfo","userList","user","tableLoading","tableColumns","tableData","tablePaginationConfig","table","appReducer","combineReducers","rootReducer","undefined","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","api","axios","create","baseURL","withCredentials","interceptors","response","use","error","status","localStorage","getItem","clear","location","reload","Promise","reject","setTableLoading","setTableData","setProjectLoading","setProjectList","setSearchParams","fetchActiveProject","parameters","dispatch","params","project","post","then","data","tableConfig","total","paginate","current_page","per_page","statuses","map","value","setProjectStatuses","catch","message","finally","AudioPlayere","src","controls","url","AuthLoader","style","display","justifyContent","alignItems","height","size","TextArea","Input","EditingModalForm","onCreate","onCancel","formRows","editingRow","confirmLoading","Form","useForm","form","React","useEffect","obj","prop","setFieldsValue","id","title","visible","width","mask","closable","okText","cancelText","onOk","validateFields","record","recordWithId","warning","name","labelCol","span","row","inputNode","dataIndex","rows","className","editable","disabled","Item","label","rules","required","ExportButton","useState","isLoading","setIsLoading","loading","onClick","fields","table_row","split","csvData","headerArr","table_header","wb","XLSX","book_new","ws","json_to_sheet","sheet_add_aoa","sheet_add_json","origin","skipHeader","book_append_sheet","Date","now","newExport","icon","DownloadOutlined","Loader","textAlign","marginTop","ResourceLoader","marginBottom","Button","paragraph","setUserInfo","setUserList","LogoutButton","onLogout","useDispatch","history","useHistory","push","console","log","LoadingOutlined","LogoutOutlined","ProjectTable","setEditingRow","audioSavingId","setAudioSavingId","setConfirmLoading","audioSource","setAudioSource","rowAudio","setRowAudio","useSelector","role","onChangeTablePage","page","pageSize","a","scrollTo","top","behavior","from","to","phone","columns","render","_","Link","EditTwoTone","fontSize","request_id","content","trigger","responseType","URL","createObjectURL","newArr","playAudio","PlayCircleTwoTone","twoToneColor","correctTime","time","replace","fileDownload","number","downloadAudio","rowKey","dataSource","pagination","position","current","onChange","hideOnSinglePage","bordered","editRow","patch","success","newTableData","item","ReloadButton","marginRight","TableControls","UserBlock","userName","menu","items","key","SmileTwoTone","overlay","placement","fontWeight","color","backgroundColor","Search","BoxTitle","text","linkText","reloadable","onReload","spin","path","resourceCount","searchable","onSearch","styles","placeholder","allowClear","marginLeft","SyncOutlined","FormSave","htmlType","Box","children","compact","main","EmptyProject","image","imageStyle","description","Main","searchForm","tablename","resetSearch","resetFields","getTableRowWidth","onFinish","fieldsValue","operator","length","slice","values","format","autoComplete","initialValues","moment","layout","prefix","PhoneOutlined","rotate","UserOutlined","options","showSearch","optionFilterProp","optionObj","rowArr","tableCols","col","i","setTableColumns","filterOption","input","option","toLowerCase","indexOf","duration","Header","Layout","Content","Sider","Home","onSuccessLogout","useLocation","collapsed","setCollapsed","isAdmin","menuItems","HomeOutlined","ProjectOutlined","Logo","alt","collapsible","onCollapse","setItem","selectedKeys","pathname","mode","onSelect","exact","CreateUser","EditProject","isLoadingPage","setIsLoadingPage","initValues","setInitvalues","targetKeys","setTargetKeys","isClientAvailable","setIsClientAvailable","isOperAvailable","setIsOperAvailable","useParams","getUsers","get","client_available","oper_available","users","availableUsers","onBack","back","newProject","put","updatedProject","newProjectList","onSuccessProjectEdit","gutter","justify","sm","md","lg","tooltip","valuePropName","checked","offset","filter","titles","nextTargetKeys","oneWay","CreateProject","onSuccessProjectCreate","changes","Project","isProjectReload","setIsProjectReload","searchValue","setSearchValue","getProjects","ellipsis","align","CheckCircleTwoTone","CloseCircleTwoTone","onConfirm","e","projectId","delete","DeleteTwoTone","includes","roles","User","isUserReload","setIsUserReload","userId","newUserList","newPwd","prompt","userid","password","onResetPassword","KeyOutlined","isRoleAdmin","setIsRoleAdmin","newUser","onSuccessUserCreate","Password","EditUser","setInitValues","availableProjects","updatedUser","onSuccessUserEdit","Login","onLogin","LockOutlined","App","isLoggedin","setIsLoggedin","checkAuth","setCheckAuth","ReactDOM","StrictMode","locale","ruRU","document","getElementById"],"mappings":"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","file":"static/js/main.c6356864.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"Box_main___dHBT\",\"compact\":\"Box_compact__XSc-w\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"BoxTitle_title__E34TE\"};","const initialState = {\r\n\tactiveProject: null,\r\n\tprojectLoading: false,\r\n\t// tableLoading: false,\r\n\t// tableColumns: [],\r\n\tprojectStatuses: [],\r\n\tprojectList: null,\r\n\t// tableData: null,\r\n\t// tablePaginationConfig: null,\r\n\tsearchParams: null,\r\n\t// userInfo: null,\r\n};\r\n\r\nconst projects = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase 'SET_ACTIVE_PROJECT':\r\n\t\t\treturn { ...state, activeProject: action.payload };\r\n\r\n\t\tcase 'SET_PROJECT_LOADING':\r\n\t\t\treturn { ...state, projectLoading: action.payload };\r\n\r\n\t\tcase 'SET_PROJECT_LIST':\r\n\t\t\treturn { ...state, projectList: action.payload };\r\n\r\n\t\tcase 'SET_PROJECT_STATUSES':\r\n\t\t\treturn { ...state, projectStatuses: action.payload };\r\n\r\n\t\tcase 'SET_SEARCH_PARAMS':\r\n\t\t\treturn { ...state, searchParams: action.payload };\r\n\r\n\t\t// case 'SET_USER_INFO':\r\n\t\t// \treturn { ...state, userInfo: action.payload };\r\n\r\n\t\t// case 'SET_TABLE_LOADING':\r\n\t\t// \treturn { ...state, tableLoading: action.payload };\r\n\r\n\t\t// case 'SET_TABLE_COLUMNS':\r\n\t\t// \treturn { ...state, tableColumns: action.payload };\r\n\r\n\t\t// case 'SET_TABLE_DATA':\r\n\t\t// \treturn { ...state, tableData: action.payload };\r\n\r\n\t\t// case 'RESET_TABLE_DATA':\r\n\t\t// \treturn { ...state, tableData: null };\r\n\r\n\t\t// case 'SET_TABLE_PAGINATIONCONFIG':\r\n\t\t// \treturn { ...state, tablePaginationConfig: action.payload };\r\n\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n\r\nexport default projects;\r\n","const initialState = {\r\n\tuserInfo: null,\r\n\tuserList: null,\r\n};\r\n\r\nconst user = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase 'SET_USER_INFO':\r\n\t\t\treturn { ...state, userInfo: action.payload };\r\n\r\n\t\tcase 'SET_USER_LIST':\r\n\t\t\treturn { ...state, userList: action.payload };\r\n\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n\r\nexport default user;\r\n","const initialState = {\r\n\ttableLoading: false,\r\n\ttableColumns: [],\r\n\ttableData: null,\r\n\ttablePaginationConfig: null,\r\n};\r\n\r\nconst table = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase 'SET_TABLE_LOADING':\r\n\t\t\treturn { ...state, tableLoading: action.payload };\r\n\r\n\t\tcase 'SET_TABLE_COLUMNS':\r\n\t\t\treturn { ...state, tableColumns: action.payload };\r\n\r\n\t\tcase 'SET_TABLE_DATA':\r\n\t\t\treturn { ...state, tableData: action.payload };\r\n\r\n\t\tcase 'RESET_TABLE_DATA':\r\n\t\t\treturn { ...state, tableData: null };\r\n\r\n\t\tcase 'SET_TABLE_PAGINATIONCONFIG':\r\n\t\t\treturn { ...state, tablePaginationConfig: action.payload };\r\n\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n\r\nexport default table;\r\n","import { combineReducers } from 'redux';\r\n\r\nimport projects from './projects';\r\nimport user from './user';\r\nimport table from './table';\r\n\r\n// const rootReducer = combineReducers({\r\n// \tprojects,\r\n// \tuser,\r\n// \ttable,\r\n// });\r\n\r\nconst appReducer = combineReducers({\r\n\tprojects,\r\n\tuser,\r\n\ttable,\r\n});\r\n\r\nconst rootReducer = (state, action) => {\r\n\tif (action.type === 'USER_LOGOUT') {\r\n\t\treturn appReducer(undefined, action);\r\n\t}\r\n\r\n\treturn appReducer(state, action);\r\n};\r\n\r\nexport default rootReducer;\r\n","import { createStore, compose, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\n\r\nimport rootReducer from './reducers';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)));\r\n\r\nexport default store;\r\n","import axios from 'axios';\r\n\r\nexport default function api() {\r\n\tconst api = axios.create({\r\n\t\t// baseURL: 'http://localhost:8000/api',\r\n\t\tbaseURL: 'https://admin.kolocall.com/api',\r\n\t\twithCredentials: true,\r\n\t});\r\n\r\n\tapi.interceptors.response.use(\r\n\t\t(response) => response,\r\n\t\t(error) => {\r\n\t\t\tif (error.response.status === 401 || error.response.status === 419) {\r\n\t\t\t\tif (localStorage.getItem('auth_name')) {\r\n\t\t\t\t\tlocalStorage.clear();\r\n\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn Promise.reject();\r\n\t\t\t}\r\n\r\n\t\t\treturn Promise.reject(error);\r\n\t\t},\r\n\t);\r\n\r\n\treturn api;\r\n}\r\n","export const setTableLoading = (payload) => ({\r\n\ttype: 'SET_TABLE_LOADING',\r\n\tpayload,\r\n});\r\n\r\nexport const setTableColumns = (payload) => ({\r\n\ttype: 'SET_TABLE_COLUMNS',\r\n\tpayload,\r\n});\r\n\r\nexport const setTableData = (payload) => ({\r\n\ttype: 'SET_TABLE_DATA',\r\n\tpayload,\r\n});\r\n\r\nexport const resetTableData = () => ({\r\n\ttype: 'RESET_TABLE_DATA',\r\n});\r\n\r\nexport const setTablePaginationConfig = (payload) => ({\r\n\ttype: 'SET_TABLE_PAGINATIONCONFIG',\r\n\tpayload,\r\n});\r\n","import api from 'util/api';\r\nimport { message } from 'antd';\r\nimport { setTableLoading, setTableData, setTablePaginationConfig } from 'redux/actions/table';\r\n\r\nexport const setActiveProject = (payload) => ({\r\n\ttype: 'SET_ACTIVE_PROJECT',\r\n\tpayload,\r\n});\r\n\r\nexport const setProjectLoading = (payload) => ({\r\n\ttype: 'SET_PROJECT_LOADING',\r\n\tpayload,\r\n});\r\n\r\nexport const setProjectList = (payload) => ({\r\n\ttype: 'SET_PROJECT_LIST',\r\n\tpayload,\r\n});\r\n\r\nexport const setProjectStatuses = (payload) => ({\r\n\ttype: 'SET_PROJECT_STATUSES',\r\n\tpayload,\r\n});\r\n\r\nexport const setSearchParams = (payload) => ({\r\n\ttype: 'SET_SEARCH_PARAMS',\r\n\tpayload,\r\n});\r\n\r\nexport const resetStorage = () => ({\r\n\ttype: 'RESET_STORAGE',\r\n});\r\n\r\nexport const fetchActiveProject = (parameters, activeProject) => (dispatch) => {\r\n\tconst params = parameters || { project: activeProject };\r\n\r\n\tapi()\r\n\t\t.post('/project/search', params)\r\n\t\t.then(({ data }) => {\r\n\t\t\tconst tableConfig = {\r\n\t\t\t\ttotal: data.paginate.total,\r\n\t\t\t\tcurrent_page: data.paginate.current_page,\r\n\t\t\t\tper_page: data.paginate.per_page,\r\n\t\t\t};\r\n\r\n\t\t\tconst statuses = data.statuses.map((status) => {\r\n\t\t\t\treturn { value: status };\r\n\t\t\t});\r\n\r\n\t\t\tdispatch(setTablePaginationConfig(tableConfig));\r\n\t\t\tdispatch(setTableData(data.paginate.data));\r\n\t\t\tdispatch(setProjectStatuses(statuses));\r\n\t\t})\r\n\t\t.catch(() => message.error('Ошибка запроса'))\r\n\t\t.finally(() => {\r\n\t\t\tdispatch(setTableLoading(false));\r\n\t\t\tdispatch(setProjectLoading(false));\r\n\t\t});\r\n};\r\n\r\n// export const setUserInfo = (payload) => ({\r\n// \ttype: 'SET_USER_INFO',\r\n// \tpayload,\r\n// });\r\n\r\n// export const setTableLoading = (payload) => ({\r\n// \ttype: 'SET_TABLE_LOADING',\r\n// \tpayload,\r\n// });\r\n\r\n// export const setTableColumns = (payload) => ({\r\n// \ttype: 'SET_TABLE_COLUMNS',\r\n// \tpayload,\r\n// });\r\n\r\n// export const setTableData = (payload) => ({\r\n// \ttype: 'SET_TABLE_DATA',\r\n// \tpayload,\r\n// });\r\n\r\n// export const resetTableData = () => ({\r\n// \ttype: 'RESET_TABLE_DATA',\r\n// });\r\n\r\n// export const setTablePaginationConfig = (payload) => ({\r\n// \ttype: 'SET_TABLE_PAGINATIONCONFIG',\r\n// \tpayload,\r\n// });\r\n","import React from 'react';\r\n\r\nconst AudioPlayere = ({ src }) => {\r\n\treturn <audio controls src={src?.url}></audio>;\r\n};\r\n\r\nexport default AudioPlayere;\r\n","import React from 'react';\r\nimport { Spin } from 'antd';\r\n\r\nconst AuthLoader = () => {\r\n\treturn (\r\n\t\t<div\r\n\t\t\tstyle={{\r\n\t\t\t\tdisplay: 'flex',\r\n\t\t\t\tjustifyContent: 'center',\r\n\t\t\t\talignItems: 'center',\r\n\t\t\t\theight: '100%',\r\n\t\t\t}}>\r\n\t\t\t<Spin size=\"large\" />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default AuthLoader;\r\n","import React from 'react';\r\nimport { Input, Form, Modal, message } from 'antd';\r\n\r\nconst { TextArea } = Input;\r\n\r\nconst EditingModalForm = ({ onCreate, onCancel, formRows, editingRow, confirmLoading }) => {\r\n\tconst [form] = Form.useForm();\r\n\r\n\tReact.useEffect(() => {\r\n\t\tconst obj = {};\r\n\r\n\t\tfor (let prop in editingRow) {\r\n\t\t\tif (editingRow[prop] === '') {\r\n\t\t\t\tobj[prop] = '-';\r\n\t\t\t} else {\r\n\t\t\t\tobj[prop] = editingRow[prop];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tform.setFieldsValue({\r\n\t\t\tid: '',\r\n\t\t\ttitle: '',\r\n\t\t\t...obj,\r\n\t\t}); // eslint-disable-next-line\r\n\t}, []);\r\n\r\n\tconst onOk = () => {\r\n\t\tform.validateFields()\r\n\t\t\t.then((record) => {\r\n\t\t\t\tconst recordWithId = {\r\n\t\t\t\t\tid: editingRow.id,\r\n\t\t\t\t\t...record,\r\n\t\t\t\t};\r\n\t\t\t\tonCreate(recordWithId);\r\n\t\t\t})\r\n\t\t\t.catch(() => message.warning('Проверьте правильность заполненных полей'));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\tvisible={true}\r\n\t\t\twidth=\"600px\"\r\n\t\t\tmask={false}\r\n\t\t\tclosable={false}\r\n\t\t\ttitle=\"Редактировать запись\"\r\n\t\t\tokText=\"Обновить\"\r\n\t\t\tcancelText=\"Отмена\"\r\n\t\t\tonCancel={onCancel}\r\n\t\t\tconfirmLoading={confirmLoading}\r\n\t\t\tonOk={onOk}>\r\n\t\t\t<Form form={form} name=\"form_in_modal\" labelCol={{ span: 6 }}>\r\n\t\t\t\t{formRows.map((row) => {\r\n\t\t\t\t\tconst inputNode =\r\n\t\t\t\t\t\trow.dataIndex === 'content' ? (\r\n\t\t\t\t\t\t\t<TextArea rows={3} className=\"form-modal-textarea\" />\r\n\t\t\t\t\t\t) : row.editable === false ? (\r\n\t\t\t\t\t\t\t<Input disabled={true} />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\tif (row.editable === true) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tkey={row.dataIndex}\r\n\t\t\t\t\t\t\t\tname={row.dataIndex}\r\n\t\t\t\t\t\t\t\tlabel={row.title}\r\n\t\t\t\t\t\t\t\trules={[\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\t\tmessage: `Введите ${row.title}`,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t]}>\r\n\t\t\t\t\t\t\t\t{inputNode}\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t})}\r\n\t\t\t</Form>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\nexport default EditingModalForm;\r\n","import React from 'react';\r\nimport { Button } from 'antd';\r\nimport { DownloadOutlined } from '@ant-design/icons';\r\nimport * as XLSX from 'xlsx';\r\nimport api from 'util/api';\r\n\r\nconst ExportButton = ({ activeProject, searchParams }) => {\r\n\tconst [isLoading, setIsLoading] = React.useState(false);\r\n\r\n\tconst fileExtension = '.xlsx';\r\n\r\n\tconst newExport = (csvData) => {\r\n\t\tconst headerArr = activeProject.table_header.split(',');\r\n\r\n\t\tconst wb = XLSX.utils.book_new();\r\n\t\tconst ws = XLSX.utils.json_to_sheet([]);\r\n\t\tXLSX.utils.sheet_add_aoa(ws, [headerArr]);\r\n\t\tXLSX.utils.sheet_add_json(ws, csvData, { origin: 'A2', skipHeader: true });\r\n\t\tXLSX.utils.book_append_sheet(wb, ws, activeProject.label);\r\n\t\tXLSX.writeFile(wb, activeProject.label + `_${Date.now()}` + fileExtension);\r\n\t};\r\n\r\n\tconst fetchData = () => {\r\n\t\tsetIsLoading(true);\r\n\t\tconst params = {\r\n\t\t\t...searchParams,\r\n\t\t\tproject: activeProject.value,\r\n\t\t\tfields: activeProject.table_row.split(','),\r\n\t\t};\r\n\t\tapi()\r\n\t\t\t.post('/project/export', params)\r\n\t\t\t.then(({ data }) => newExport(data))\r\n\t\t\t.finally(() => setIsLoading(false));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Button loading={isLoading} onClick={fetchData} icon={<DownloadOutlined />}>\r\n\t\t\tЭкспорт\r\n\t\t</Button>\r\n\t);\r\n};\r\n\r\nexport default ExportButton;\r\n","import React from 'react';\r\nimport { Spin } from 'antd';\r\n\r\nconst Loader = () => {\r\n\treturn (\r\n\t\t<div style={{ textAlign: 'center', marginTop: '20px' }}>\r\n\t\t\t<Spin />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Loader;\r\n","import React from 'react';\r\nimport { Skeleton } from 'antd';\r\n\r\nconst ResourceLoader = () => {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div\r\n\t\t\t\tclassName=\"d-flex\"\r\n\t\t\t\tstyle={{ justifyContent: 'space-between', marginBottom: '1.5em' }}>\r\n\t\t\t\t<Skeleton.Button style={{ width: '150px' }} />\r\n\t\t\t\t<Skeleton.Button style={{ width: '200px' }} />\r\n\t\t\t</div>\r\n\t\t\t<Skeleton paragraph />\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default ResourceLoader;\r\n","export const setUserInfo = (payload) => ({\r\n\ttype: 'SET_USER_INFO',\r\n\tpayload,\r\n});\r\n\r\nexport const setUserList = (payload) => ({\r\n\ttype: 'SET_USER_LIST',\r\n\tpayload,\r\n});\r\n\r\nexport const logOut = (payload) => ({\r\n\ttype: 'USER_LOGOUT',\r\n\tpayload,\r\n});\r\n","import React from 'react';\r\nimport { LogoutOutlined, LoadingOutlined } from '@ant-design/icons';\r\nimport api from 'util/api';\r\nimport { useHistory } from 'react-router-dom';\r\n//Redux\r\nimport { useDispatch } from 'react-redux';\r\nimport { logOut } from 'redux/actions/user';\r\n\r\nconst LogoutButton = ({ onLogout }) => {\r\n\tconst dispatch = useDispatch();\r\n\tlet history = useHistory();\r\n\r\n\tconst [isLoading, setIsLoading] = React.useState(false);\r\n\r\n\tconst handleLogout = () => {\r\n\t\tsetIsLoading(true);\r\n\t\tapi()\r\n\t\t\t.post('/logout')\r\n\t\t\t.then(() => {\r\n\t\t\t\tlocalStorage.clear();\r\n\t\t\t\tonLogout();\r\n\t\t\t\tdispatch(logOut());\r\n\t\t\t\thistory.push('/');\r\n\t\t\t})\r\n\t\t\t.catch(() => console.log('logout catch error'))\r\n\t\t\t.finally(() => setIsLoading(false));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<button onClick={handleLogout} className=\"btn-logout\">\r\n\t\t\t{isLoading ? <LoadingOutlined /> : <LogoutOutlined />}\r\n\t\t</button>\r\n\t);\r\n};\r\n\r\nexport default LogoutButton;\r\n","import React from 'react';\r\nimport { Table, Typography, Divider, Popover, Space, message } from 'antd';\r\nimport {\r\n\tEditTwoTone,\r\n\tDownloadOutlined,\r\n\tLoadingOutlined,\r\n\tPlayCircleTwoTone,\r\n} from '@ant-design/icons';\r\nimport api from 'util/api';\r\nimport fileDownload from 'js-file-download';\r\n\r\nimport { fetchActiveProject } from 'redux/actions/projects';\r\nimport { setTableLoading, setTableData } from 'redux/actions/table';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nimport { EditingModalForm, AudioPlayere } from 'components';\r\n\r\nconst ProjectTable = () => {\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst [editingRow, setEditingRow] = React.useState(null);\r\n\tconst [audioSavingId, setAudioSavingId] = React.useState(null);\r\n\tconst [confirmLoading, setConfirmLoading] = React.useState(false);\r\n\tconst [audioSource, setAudioSource] = React.useState(null);\r\n\tconst [rowAudio, setRowAudio] = React.useState({});\r\n\r\n\tconst { activeProject, searchParams } = useSelector(({ projects }) => projects);\r\n\tconst { userInfo } = useSelector(({ user }) => user);\r\n\tconst role = userInfo.role;\r\n\tconst { tableLoading, tableColumns, tablePaginationConfig, tableData } = useSelector(\r\n\t\t({ table }) => table,\r\n\t);\r\n\r\n\tconst onCreate = (record) => {\r\n\t\tsetConfirmLoading(true);\r\n\t\tconst editRow = {\r\n\t\t\tproject: activeProject.value,\r\n\t\t\t...record,\r\n\t\t};\r\n\r\n\t\tapi()\r\n\t\t\t.patch(`/project/editrow/${record.id}`, editRow)\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tmessage.success(data.message);\r\n\t\t\t\tconst newTableData = tableData.map((item) => {\r\n\t\t\t\t\tif (item.id === record.id) {\r\n\t\t\t\t\t\treturn { ...data.row };\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t});\r\n\t\t\t\tdispatch(setTableData(newTableData));\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\tmessage.error('Произошла ошибка');\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tsetConfirmLoading(false);\r\n\t\t\t\tsetEditingRow(null);\r\n\t\t\t});\r\n\t};\r\n\r\n\tconst onChangeTablePage = async (page, pageSize) => {\r\n\t\tdispatch(setTableLoading(true));\r\n\t\tif (pageSize > 15) {\r\n\t\t\twindow.scrollTo({\r\n\t\t\t\ttop: 172,\r\n\t\t\t\tbehavior: 'smooth',\r\n\t\t\t});\r\n\t\t}\r\n\t\tconst parameters = {\r\n\t\t\tproject: activeProject.value,\r\n\t\t\tpage: page,\r\n\t\t\tper_page: pageSize,\r\n\t\t\tfrom: searchParams ? searchParams.from : null,\r\n\t\t\tto: searchParams ? searchParams.to : null,\r\n\t\t\tphone: searchParams ? searchParams.phone : null,\r\n\t\t\tstatus: searchParams ? searchParams.status : null,\r\n\t\t};\r\n\t\tdispatch(fetchActiveProject(parameters));\r\n\t};\r\n\r\n\tconst downloadAudio = (record) => {\r\n\t\tsetAudioSavingId(record.id);\r\n\t\tconst correctTime = record.time.replace(/[^\\d]/g, '_');\r\n\t\tapi()\r\n\t\t\t.post(`/da/${record.request_id}`, {}, { responseType: 'blob' })\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tfileDownload(data, correctTime + '_' + record.number + '.mp3');\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tsetAudioSavingId(null);\r\n\t\t\t});\r\n\t};\r\n\r\n\tconst playAudio = (record) => {\r\n\t\tif (rowAudio[record.id]) {\r\n\t\t\tif (rowAudio[record.id] === audioSource.url) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tsetAudioSource({\r\n\t\t\t\tid: record.id,\r\n\t\t\t\turl: rowAudio[record.id],\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetAudioSource(null);\r\n\t\tapi()\r\n\t\t\t.post(`/da/${record.request_id}`, {}, { responseType: 'blob' })\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tconst url = URL.createObjectURL(data);\r\n\t\t\t\tsetAudioSource({\r\n\t\t\t\t\tid: record.id,\r\n\t\t\t\t\turl: url,\r\n\t\t\t\t});\r\n\r\n\t\t\t\tconst newArr = {\r\n\t\t\t\t\t...rowAudio,\r\n\t\t\t\t\t[record.id]: url,\r\n\t\t\t\t};\r\n\t\t\t\tsetRowAudio(newArr);\r\n\t\t\t});\r\n\t};\r\n\r\n\tconst columns =\r\n\t\trole === 0 || role === 1 || role === 2\r\n\t\t\t? [\r\n\t\t\t\t\t...tableColumns,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: '#',\r\n\t\t\t\t\t\tdataIndex: 'actions',\r\n\t\t\t\t\t\twidth: 35, //def 122, mid 35\r\n\r\n\t\t\t\t\t\trender: (_, record) => (\r\n\t\t\t\t\t\t\t<Space split={<Divider type=\"vertical\" />} size={1}>\r\n\t\t\t\t\t\t\t\t{role !== 2 && (\r\n\t\t\t\t\t\t\t\t\t<Typography.Link onClick={() => setEditingRow(record)}>\r\n\t\t\t\t\t\t\t\t\t\t<EditTwoTone style={{ fontSize: 18 }} />\r\n\t\t\t\t\t\t\t\t\t</Typography.Link>\r\n\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t{record.request_id ? (\r\n\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t<Popover\r\n\t\t\t\t\t\t\t\t\t\t\tcontent={\r\n\t\t\t\t\t\t\t\t\t\t\t\taudioSource &&\r\n\t\t\t\t\t\t\t\t\t\t\t\taudioSource.url === rowAudio[audioSource.id] ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<AudioPlayere src={audioSource} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'загрузка'\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\ttrigger=\"click\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Typography.Link onClick={() => playAudio(record)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<PlayCircleTwoTone\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ fontSize: 18 }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttwoToneColor={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecord.id === audioSource?.id\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? '#52c41a'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: false\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Typography.Link>\r\n\t\t\t\t\t\t\t\t\t\t</Popover>\r\n\t\t\t\t\t\t\t\t\t\t<Typography.Link onClick={() => downloadAudio(record)}>\r\n\t\t\t\t\t\t\t\t\t\t\t{record.id === audioSavingId ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<LoadingOutlined style={{ fontSize: 18 }} />\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<DownloadOutlined style={{ fontSize: 18 }} />\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Typography.Link>\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t</Space>\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t},\r\n\t\t\t  ]\r\n\t\t\t: tableColumns;\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Table\r\n\t\t\t\tsize=\"middle\"\r\n\t\t\t\tclassName=\"project-table\"\r\n\t\t\t\trowKey={(record) => record.id}\r\n\t\t\t\tcolumns={columns}\r\n\t\t\t\t// scroll={{ x: columns.length > 14 ? 1900 : false }}\r\n\t\t\t\tdataSource={tableData}\r\n\t\t\t\tloading={tableLoading}\r\n\t\t\t\tpagination={{\r\n\t\t\t\t\tposition: ['bottomCenter'],\r\n\t\t\t\t\tcurrent: tablePaginationConfig.current_page,\r\n\t\t\t\t\ttotal: tablePaginationConfig.total,\r\n\t\t\t\t\tpageSize: tablePaginationConfig.per_page,\r\n\t\t\t\t\tonChange: onChangeTablePage,\r\n\t\t\t\t\thideOnSinglePage: true,\r\n\t\t\t\t}}\r\n\t\t\t\tbordered\r\n\t\t\t/>\r\n\t\t\t{editingRow && (\r\n\t\t\t\t<EditingModalForm\r\n\t\t\t\t\tonCreate={onCreate}\r\n\t\t\t\t\tonCancel={() => {\r\n\t\t\t\t\t\tsetEditingRow(null);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tformRows={tableColumns}\r\n\t\t\t\t\teditingRow={editingRow}\r\n\t\t\t\t\tconfirmLoading={confirmLoading}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default ProjectTable;\r\n","import React from 'react';\r\nimport { Button } from 'antd';\r\n\r\nimport { fetchActiveProject } from 'redux/actions/projects';\r\nimport { setTableLoading } from 'redux/actions/table';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nconst ReloadButton = ({ activeProject }) => {\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst reloadActiveProject = () => {\r\n\t\tdispatch(setTableLoading(true));\r\n\t\tdispatch(fetchActiveProject(null, activeProject.value));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Button style={{ marginRight: 8 }} onClick={reloadActiveProject}>\r\n\t\t\tОбновить\r\n\t\t</Button>\r\n\t);\r\n};\r\n\r\nexport default ReloadButton;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { ExportButton, ReloadButton } from 'components';\r\n\r\nconst TableControls = () => {\r\n\tconst { activeProject, searchParams } = useSelector(({ projects }) => projects);\r\n\tconst { tablePaginationConfig } = useSelector(({ table }) => table);\r\n\r\n\treturn (\r\n\t\t<div className=\"project-actions\">\r\n\t\t\t<div>\r\n\t\t\t\t<span>Всего записей:</span> {tablePaginationConfig.total}\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<ReloadButton activeProject={activeProject} />\r\n\t\t\t\t<ExportButton activeProject={activeProject} searchParams={searchParams} />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default TableControls;\r\n","import React from 'react';\r\nimport { Avatar, Menu, Dropdown } from 'antd';\r\nimport { SmileTwoTone } from '@ant-design/icons';\r\n\r\nconst UserBlock = () => {\r\n\tconst userName = localStorage.getItem('auth_name');\r\n\r\n\tconst menu = (\r\n\t\t<Menu\r\n\t\t\titems={[\r\n\t\t\t\t{\r\n\t\t\t\t\tlabel: 'Спасибо за клик',\r\n\t\t\t\t\tkey: '1',\r\n\t\t\t\t\ticon: <SmileTwoTone style={{ fontSize: 16 }} />,\r\n\t\t\t\t},\r\n\t\t\t]}\r\n\t\t/>\r\n\t);\r\n\r\n\treturn (\r\n\t\t<Dropdown overlay={menu} trigger={['click']} placement=\"bottomRight\">\r\n\t\t\t<div className=\"user-box\">\r\n\t\t\t\t{userName ? (\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tmarginRight: 10,\r\n\t\t\t\t\t\t\tfontWeight: 600,\r\n\t\t\t\t\t\t\tcolor: 'rgba(255, 255, 255, 0.65)',\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{userName}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t) : null}\r\n\t\t\t\t<Avatar\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tcolor: '#f56a00',\r\n\t\t\t\t\t\tbackgroundColor: '#fde3cf',\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t{userName ? userName[0] : '-'}\r\n\t\t\t\t</Avatar>\r\n\t\t\t\t{/* <DownOutlined\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tmarginLeft: 6,\r\n\t\t\t\t\t\tcolor: 'rgba(255, 255, 255, 0.65)',\r\n\t\t\t\t\t}}\r\n\t\t\t\t/> */}\r\n\t\t\t</div>\r\n\t\t</Dropdown>\r\n\t);\r\n};\r\n\r\nexport default UserBlock;\r\n","import React from 'react';\r\nimport { Space, Button, Input } from 'antd';\r\nimport { Link } from 'react-router-dom';\r\nimport { SyncOutlined } from '@ant-design/icons';\r\nimport styles from './BoxTitle.module.css';\r\n\r\nconst { Search } = Input;\r\n\r\nconst BoxTitle = ({\r\n\ttext,\r\n\tlinkText,\r\n\treloadable,\r\n\tonReload,\r\n\tspin,\r\n\tpath,\r\n\tresourceCount,\r\n\tsearchable,\r\n\tonSearch,\r\n}) => (\r\n\t<div className={styles.title}>\r\n\t\t<h3>\r\n\t\t\t{text} <span>{resourceCount}</span>\r\n\t\t</h3>\r\n\t\t{searchable && (\r\n\t\t\t<Search\r\n\t\t\t\tplaceholder=\"Поиск\"\r\n\t\t\t\tonSearch={onSearch}\r\n\t\t\t\tallowClear\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\twidth: 200,\r\n\t\t\t\t\tmarginRight: 'auto',\r\n\t\t\t\t\tmarginLeft: 20,\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t)}\r\n\t\t<Space size=\"middle\">\r\n\t\t\t<Button type=\"primary\">\r\n\t\t\t\t<Link to={path}>{linkText}</Link>\r\n\t\t\t</Button>\r\n\t\t\t{reloadable && <SyncOutlined spin={spin} onClick={onReload} />}\r\n\t\t</Space>\r\n\t</div>\r\n);\r\n\r\nexport default BoxTitle;\r\n","import React from 'react';\r\nimport { Form, Button } from 'antd';\r\n\r\nconst FormSave = ({ loading }) => {\r\n\treturn (\r\n\t\t<Form.Item\r\n\t\t\tclassName={`fixed-resource-submit ${\r\n\t\t\t\tlocalStorage.getItem('siderCollapsed') === 'true' ? 'long' : ''\r\n\t\t\t}`}>\r\n\t\t\t<Button type=\"primary\" htmlType=\"submit\" loading={loading}>\r\n\t\t\t\tСохранить\r\n\t\t\t</Button>\r\n\t\t</Form.Item>\r\n\t);\r\n};\r\n\r\nexport default FormSave;\r\n","import React from 'react';\r\nimport styles from './Box.module.css';\r\n\r\nconst Box = ({ children, compact }) => {\r\n\treturn (\r\n\t\t<div className={compact ? `${styles.main} ${styles.compact}` : styles.main}>{children}</div>\r\n\t);\r\n};\r\n\r\nexport default Box;\r\n","import React from 'react';\r\nimport { Empty } from 'antd';\r\n\r\nconst EmptyProject = () => {\r\n\treturn (\r\n\t\t<Empty\r\n\t\t\timage=\"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg\"\r\n\t\t\timageStyle={{\r\n\t\t\t\theight: 60,\r\n\t\t\t}}\r\n\t\t\tdescription={<span>Необходимо выбрать проект</span>}></Empty>\r\n\t);\r\n};\r\n\r\nexport default EmptyProject;\r\n","import React from 'react';\r\nimport { DatePicker, Form, Input, Button, Select, BackTop, message } from 'antd';\r\nimport { PhoneOutlined, UserOutlined } from '@ant-design/icons';\r\nimport api from 'util/api';\r\nimport moment from 'moment';\r\nimport 'moment/locale/ru';\r\n\r\n//Redux\r\nimport {\r\n\tsetActiveProject,\r\n\tsetSearchParams,\r\n\tfetchActiveProject,\r\n\tsetProjectLoading,\r\n} from 'redux/actions/projects';\r\nimport { setTableColumns, resetTableData, setTableLoading } from 'redux/actions/table';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nimport { Box, Loader, TableControls, ProjectTable, EmptyProject } from 'components';\r\n\r\nconst Main = () => {\r\n\t//Redux\r\n\tconst dispatch = useDispatch();\r\n\tconst { activeProject, projectLoading, searchParams, projectStatuses } = useSelector(\r\n\t\t({ projects }) => projects,\r\n\t);\r\n\tconst { tableData } = useSelector(({ table }) => table);\r\n\tconst [projectList, setProjectList] = React.useState(null);\r\n\tconst [searchForm] = Form.useForm();\r\n\r\n\t//Подгрузка списка проектов, доступных для пользователя, в селект\r\n\tReact.useEffect(() => {\r\n\t\tapi()\r\n\t\t\t.post('/userprojects')\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tconst projects = data.map((project) => {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tid: project.id,\r\n\t\t\t\t\t\tkey: project.id,\r\n\t\t\t\t\t\tvalue: project.tablename,\r\n\t\t\t\t\t\tlabel: project.name,\r\n\t\t\t\t\t\ttable_header: project.table_header,\r\n\t\t\t\t\t\ttable_row: project.table_row,\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t\t\tsetProjectList(projects);\r\n\t\t\t});\r\n\t}, []);\r\n\r\n\t//Меняем активный проект, при смене в селекте\r\n\tReact.useEffect(() => {\r\n\t\tif (activeProject && !tableData) {\r\n\t\t\tdispatch(fetchActiveProject(null, activeProject.value));\r\n\t\t} // eslint-disable-next-line\r\n\t}, [activeProject]);\r\n\r\n\tconst fetchSearchData = (fieldsValue) => {\r\n\t\tif (!activeProject) {\r\n\t\t\tmessage.warning('Сначала выберите проект', 2);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (\r\n\t\t\t!fieldsValue.from &&\r\n\t\t\t!fieldsValue.to &&\r\n\t\t\t!fieldsValue.phone &&\r\n\t\t\t!fieldsValue.status &&\r\n\t\t\t!fieldsValue.operator\r\n\t\t) {\r\n\t\t\tmessage.warning('Заполните хотя бы один параметр поиска', 2);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst phone =\r\n\t\t\tfieldsValue.phone?.length > 10 ? fieldsValue.phone.slice(1) : fieldsValue.phone;\r\n\r\n\t\tconst values = {\r\n\t\t\t...fieldsValue,\r\n\t\t\tphone: phone,\r\n\t\t\tfrom: fieldsValue['from'] ? fieldsValue['from'].format('YYYY-MM-DD') : null,\r\n\t\t\tto: fieldsValue['to'] ? fieldsValue['to'].format('YYYY-MM-DD') : null,\r\n\t\t};\r\n\r\n\t\tdispatch(setTableLoading(true));\r\n\t\tdispatch(\r\n\t\t\tsetSearchParams({\r\n\t\t\t\t...searchParams,\r\n\t\t\t\tfrom: values.from,\r\n\t\t\t\tto: values.to,\r\n\t\t\t\tphone: values.phone,\r\n\t\t\t\toperator: values.operator,\r\n\t\t\t\tstatus: values.status,\r\n\t\t\t}),\r\n\t\t);\r\n\t\tconst parameters = {\r\n\t\t\tproject: activeProject.value,\r\n\t\t\tfrom: values.from,\r\n\t\t\tto: values.to,\r\n\t\t\tphone: values.phone,\r\n\t\t\toperator: values.operator,\r\n\t\t\tstatus: values.status,\r\n\t\t};\r\n\t\tdispatch(fetchActiveProject(parameters));\r\n\t};\r\n\r\n\tconst resetSearch = async () => {\r\n\t\tawait dispatch(setSearchParams(null));\r\n\t\tsearchForm.resetFields();\r\n\t};\r\n\r\n\tconst getTableRowWidth = (row) => {\r\n\t\tswitch (row) {\r\n\t\t\tcase 'id':\r\n\t\t\t\treturn 34; //def 50, mid 34\r\n\t\t\tcase 'time':\r\n\t\t\t\treturn 151; //def 168, mid 151\r\n\t\t\tcase 'content':\r\n\t\t\t\treturn 300; //def 300, mid 300\r\n\r\n\t\t\tdefault:\r\n\t\t\t\treturn 'auto';\r\n\t\t}\r\n\t};\r\n\r\n\tconst onSelectProject = (_, optionObj) => {\r\n\t\tdispatch(setProjectLoading(true));\r\n\t\tresetSearch();\r\n\r\n\t\tconst headerArr = optionObj.table_header.split(',');\r\n\t\tconst rowArr = optionObj.table_row.split(',');\r\n\r\n\t\tconst tableCols = headerArr.map((col, i) => ({\r\n\t\t\ttitle: col,\r\n\t\t\tdataIndex: rowArr[i],\r\n\t\t\twidth: headerArr.length > 7 ? getTableRowWidth(rowArr[i]) : 148,\r\n\t\t\trender: rowArr[i] === 'time' ? (time) => moment(time).format('DD.MM.YYYY H:mm') : false,\r\n\r\n\t\t\teditable:\r\n\t\t\t\trowArr[i] === 'id' ||\r\n\t\t\t\trowArr[i] === 'time' ||\r\n\t\t\t\trowArr[i] === 'operator' ||\r\n\t\t\t\trowArr[i] === 'que'\r\n\t\t\t\t\t? false\r\n\t\t\t\t\t: true,\r\n\t\t}));\r\n\r\n\t\tdispatch(resetTableData());\r\n\t\tdispatch(setActiveProject(optionObj));\r\n\t\tdispatch(setTableColumns(tableCols));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Box>\r\n\t\t\t\t<div className=\"controls\">\r\n\t\t\t\t\t<Form\r\n\t\t\t\t\t\tform={searchForm}\r\n\t\t\t\t\t\tonFinish={fetchSearchData}\r\n\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\tinitialValues={{\r\n\t\t\t\t\t\t\tfrom:\r\n\t\t\t\t\t\t\t\tsearchParams && searchParams.from\r\n\t\t\t\t\t\t\t\t\t? moment(searchParams.from, 'YYYY-MM-DD')\r\n\t\t\t\t\t\t\t\t\t: null,\r\n\t\t\t\t\t\t\tto:\r\n\t\t\t\t\t\t\t\tsearchParams && searchParams.to\r\n\t\t\t\t\t\t\t\t\t? moment(searchParams.to, 'YYYY-MM-DD')\r\n\t\t\t\t\t\t\t\t\t: null,\r\n\t\t\t\t\t\t\tphone: searchParams ? searchParams.phone : null,\r\n\t\t\t\t\t\t\tstatus: searchParams ? searchParams.status : null,\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tlayout=\"inline\">\r\n\t\t\t\t\t\t<Form.Item name=\"from\">\r\n\t\t\t\t\t\t\t<DatePicker placeholder=\"С\" />\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t<Form.Item name=\"to\">\r\n\t\t\t\t\t\t\t<DatePicker placeholder=\"По\" />\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t<Form.Item name=\"phone\">\r\n\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\tplaceholder=\"Телефон\"\r\n\t\t\t\t\t\t\t\tprefix={\r\n\t\t\t\t\t\t\t\t\t<PhoneOutlined\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ color: 'rgba(0, 0, 0, 0.25)' }}\r\n\t\t\t\t\t\t\t\t\t\trotate={90}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tallowClear\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t<Form.Item name=\"operator\">\r\n\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\tplaceholder=\"Оператор\"\r\n\t\t\t\t\t\t\t\tprefix={<UserOutlined style={{ color: 'rgba(0, 0, 0, 0.25)' }} />}\r\n\t\t\t\t\t\t\t\tallowClear\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t<Form.Item name=\"status\">\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tplaceholder=\"Статус\"\r\n\t\t\t\t\t\t\t\tstyle={{ width: 202 }}\r\n\t\t\t\t\t\t\t\toptions={projectStatuses || null}\r\n\t\t\t\t\t\t\t\tallowClear\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t<Form.Item>\r\n\t\t\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\">\r\n\t\t\t\t\t\t\t\tПоиск\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t{searchParams && (\r\n\t\t\t\t\t\t\t<Form.Item>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tdispatch(setTableLoading(true));\r\n\t\t\t\t\t\t\t\t\t\tresetSearch();\r\n\t\t\t\t\t\t\t\t\t\tdispatch(fetchActiveProject(null, activeProject.value));\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tСбросить\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t\t<Select\r\n\t\t\t\t\t\tvalue={activeProject ? activeProject.label : null}\r\n\t\t\t\t\t\tshowSearch\r\n\t\t\t\t\t\tstyle={{ width: 202, marginLeft: 8 }}\r\n\t\t\t\t\t\tplaceholder=\"Выбрать проект\"\r\n\t\t\t\t\t\toptionFilterProp=\"label\"\r\n\t\t\t\t\t\tonChange={onSelectProject}\r\n\t\t\t\t\t\toptions={projectList}\r\n\t\t\t\t\t\tfilterOption={(input, option) =>\r\n\t\t\t\t\t\t\toption.label.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</Box>\r\n\t\t\t<Box>\r\n\t\t\t\t{projectLoading ? (\r\n\t\t\t\t\t<Loader />\r\n\t\t\t\t) : tableData ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<TableControls />\r\n\t\t\t\t\t\t<ProjectTable />\r\n\t\t\t\t\t</>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<EmptyProject />\r\n\t\t\t\t)}\r\n\t\t\t</Box>\r\n\t\t\t<BackTop duration={800} />\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default Main;\r\n","export default __webpack_public_path__ + \"static/media/brand_logo.e9581c6a.svg\";","import React from 'react';\r\nimport { Layout, Menu } from 'antd';\r\nimport { HomeOutlined, UserOutlined, ProjectOutlined } from '@ant-design/icons';\r\nimport { Switch, Route, Redirect, useLocation, useHistory } from 'react-router-dom';\r\nimport { Main, Project, EditProject, CreateProject, EditUser, CreateUser, User } from 'pages';\r\nimport { UserBlock, LogoutButton } from 'components';\r\nimport Logo from 'brand_logo.svg';\r\n//Redux\r\nimport { useSelector } from 'react-redux';\r\n\r\nconst { Header, Content, Sider } = Layout;\r\n\r\nconst Home = ({ onSuccessLogout }) => {\r\n\tlet location = useLocation();\r\n\tlet history = useHistory();\r\n\r\n\tconst { userInfo } = useSelector(({ user }) => user);\r\n\tconst [collapsed, setCollapsed] = React.useState(false);\r\n\r\n\tconst isAdmin = userInfo.role === 0;\r\n\r\n\tconst menuItems = [\r\n\t\t{ label: 'Главная', key: '/', icon: <HomeOutlined /> },\r\n\t\tisAdmin\r\n\t\t\t? {\r\n\t\t\t\t\tlabel: 'Проекты',\r\n\t\t\t\t\tkey: 'projects',\r\n\t\t\t\t\ticon: <ProjectOutlined />,\r\n\t\t\t\t\tchildren: [\r\n\t\t\t\t\t\t{ label: 'Список проектов', key: '/projects' },\r\n\t\t\t\t\t\t{ label: 'Создать проект', key: '/projects/create' },\r\n\t\t\t\t\t],\r\n\t\t\t  }\r\n\t\t\t: false,\r\n\t\tisAdmin\r\n\t\t\t? {\r\n\t\t\t\t\tlabel: 'Пользователи',\r\n\t\t\t\t\tkey: 'users',\r\n\t\t\t\t\ticon: <UserOutlined />,\r\n\t\t\t\t\tchildren: [\r\n\t\t\t\t\t\t{ label: 'Список пользователей', key: '/users' },\r\n\t\t\t\t\t\t{ label: 'Создать пользователя', key: '/users/create' },\r\n\t\t\t\t\t],\r\n\t\t\t  }\r\n\t\t\t: false,\r\n\t];\r\n\r\n\tconst handleMenuSelect = ({ key }) => {\r\n\t\thistory.push(key);\r\n\t};\r\n\r\n\tconst handleChangeCollapse = (value) => {\r\n\t\tsetCollapsed(value);\r\n\t\tlocalStorage.setItem('siderCollapsed', value);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Layout>\r\n\t\t\t<Header>\r\n\t\t\t\t<div className=\"logo\">\r\n\t\t\t\t\t<img src={Logo} alt=\"company-logo\" />\r\n\t\t\t\t\t{/* <h1>Админ раздел</h1> */}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"d-flex\">\r\n\t\t\t\t\t<UserBlock />\r\n\t\t\t\t\t<LogoutButton onLogout={onSuccessLogout} />\r\n\t\t\t\t</div>\r\n\t\t\t</Header>\r\n\t\t\t<Layout>\r\n\t\t\t\t<Sider\r\n\t\t\t\t\twidth={210}\r\n\t\t\t\t\tcollapsible\r\n\t\t\t\t\tcollapsed={collapsed}\r\n\t\t\t\t\tonCollapse={handleChangeCollapse}>\r\n\t\t\t\t\t<Menu\r\n\t\t\t\t\t\tselectedKeys={[location.pathname]}\r\n\t\t\t\t\t\tmode=\"inline\"\r\n\t\t\t\t\t\tclassName=\"menu\"\r\n\t\t\t\t\t\titems={menuItems}\r\n\t\t\t\t\t\tonSelect={handleMenuSelect}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Sider>\r\n\t\t\t\t<Layout>\r\n\t\t\t\t\t<Content>\r\n\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t<Route exact path=\"/\">\r\n\t\t\t\t\t\t\t\t<Main />\r\n\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t//Админ\r\n\t\t\t\t\t\t\t\tisAdmin && (\r\n\t\t\t\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t\t\t\t<Route exact path=\"/projects\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Project />\r\n\t\t\t\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t\t\t\t<Route exact path=\"/projects/:id/edit\">\r\n\t\t\t\t\t\t\t\t\t\t\t<EditProject />\r\n\t\t\t\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t\t\t\t<Route exact path=\"/projects/create\">\r\n\t\t\t\t\t\t\t\t\t\t\t<CreateProject />\r\n\t\t\t\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t\t\t\t<Route exact path=\"/users\">\r\n\t\t\t\t\t\t\t\t\t\t\t<User />\r\n\t\t\t\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t\t\t\t<Route exact path=\"/users/:id/edit\">\r\n\t\t\t\t\t\t\t\t\t\t\t<EditUser />\r\n\t\t\t\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t\t\t\t<Route exact path=\"/users/create\">\r\n\t\t\t\t\t\t\t\t\t\t\t<CreateUser />\r\n\t\t\t\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t\t\t\t<Redirect to=\"/\" />\r\n\t\t\t\t\t\t\t\t\t</Switch>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t<Redirect to=\"/\" />\r\n\t\t\t\t\t\t</Switch>\r\n\t\t\t\t\t</Content>\r\n\t\t\t\t</Layout>\r\n\t\t\t</Layout>\r\n\t\t</Layout>\r\n\t);\r\n};\r\n\r\nexport default Home;\r\n","import React from 'react';\r\nimport { useParams, useHistory } from 'react-router-dom';\r\nimport { Form, Input, Transfer, Col, Row, PageHeader, Switch, Space, Card, message } from 'antd';\r\nimport api from 'util/api';\r\nimport { Box, Loader, FormSave } from 'components';\r\n//Redux\r\nimport { setUserList } from 'redux/actions/user';\r\nimport { setProjectList } from 'redux/actions/projects';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nconst EditProject = () => {\r\n\t//Redux\r\n\tconst dispatch = useDispatch();\r\n\tconst { userList } = useSelector(({ user }) => user);\r\n\tconst { projectList } = useSelector(({ projects }) => projects);\r\n\tconst [isLoadingPage, setIsLoadingPage] = React.useState(true);\r\n\tconst [isLoading, setIsLoading] = React.useState(false);\r\n\tconst [initValues, setInitvalues] = React.useState({});\r\n\tconst [targetKeys, setTargetKeys] = React.useState([]);\r\n\tconst [isClientAvailable, setIsClientAvailable] = React.useState(false);\r\n\tconst [isOperAvailable, setIsOperAvailable] = React.useState(false);\r\n\tconst { id } = useParams();\r\n\tlet history = useHistory();\r\n\r\n\tReact.useEffect(() => {\r\n\t\tif (!userList) {\r\n\t\t\tgetUsers();\r\n\t\t} // eslint-disable-next-line\r\n\t}, []);\r\n\r\n\tconst getUsers = () => {\r\n\t\tapi()\r\n\t\t\t.get('/users')\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tdispatch(setUserList(data));\r\n\t\t\t})\r\n\t\t\t.catch(() => message.error('Ошибка загрузки списка пользователей'));\r\n\t};\r\n\r\n\tReact.useEffect(() => {\r\n\t\tapi()\r\n\t\t\t.get(`/projects/${id}/edit`)\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tsetInitvalues(data);\r\n\t\t\t\tsetIsClientAvailable(data.client_available === 1 ? true : false);\r\n\t\t\t\tsetIsOperAvailable(data.oper_available === 1 ? true : false);\r\n\t\t\t\tif (data.users.length > 0) {\r\n\t\t\t\t\tconst availableUsers = data.users.map((user) => user.id);\r\n\t\t\t\t\tsetTargetKeys(availableUsers);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(() => message.error('Ошибка загрузки данных по текущему проекту'))\r\n\t\t\t.finally(() => {\r\n\t\t\t\tsetIsLoadingPage(false);\r\n\t\t\t});\r\n\t}, [id]);\r\n\r\n\tconst filterOption = (input, option) =>\r\n\t\toption.name.toLowerCase().indexOf(input.toLowerCase()) > -1;\r\n\r\n\tconst onUsersChange = (nextTargetKeys) => {\r\n\t\tsetTargetKeys(nextTargetKeys);\r\n\t};\r\n\r\n\tconst handleClientAvailableChange = (checked) => {\r\n\t\tsetIsClientAvailable(checked);\r\n\t};\r\n\r\n\tconst handleOperAvailableChange = (checked) => {\r\n\t\tsetIsOperAvailable(checked);\r\n\t};\r\n\r\n\tconst onSuccessProjectEdit = (updatedProject) => {\r\n\t\tconst newProjectList = projectList.map((project) => {\r\n\t\t\tif (project.id === updatedProject.id) {\r\n\t\t\t\treturn updatedProject;\r\n\t\t\t}\r\n\t\t\treturn project;\r\n\t\t});\r\n\t\tdispatch(setProjectList(newProjectList));\r\n\t};\r\n\r\n\tconst onFinish = (values) => {\r\n\t\tsetIsLoading(true);\r\n\t\tconst newProject = { ...values, users: targetKeys };\r\n\t\tapi()\r\n\t\t\t.put(`/projects/${id}`, newProject)\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tmessage.success(data.message);\r\n\t\t\t\tonSuccessProjectEdit(data.project);\r\n\t\t\t\thistory.push('/projects');\r\n\t\t\t})\r\n\t\t\t.catch(() => message.error('Ошибка редактирования проекта'))\r\n\t\t\t.finally(() => setIsLoading(false));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<PageHeader\r\n\t\t\t\tclassName=\"page-header\"\r\n\t\t\t\ttitle=\"Редактирование проекта\"\r\n\t\t\t\tonBack={() => window.history.back()}\r\n\t\t\t/>\r\n\r\n\t\t\t{isLoadingPage ? (\r\n\t\t\t\t<Loader />\r\n\t\t\t) : (\r\n\t\t\t\t<Form\r\n\t\t\t\t\tname=\"edit-project\"\r\n\t\t\t\t\tonFinish={onFinish}\r\n\t\t\t\t\tlayout=\"vertical\"\r\n\t\t\t\t\tinitialValues={initValues}\r\n\t\t\t\t\tautoComplete=\"off\">\r\n\t\t\t\t\t<Box compact>\r\n\t\t\t\t\t\t<Card title=\"Основная информация\" bordered={false}>\r\n\t\t\t\t\t\t\t<Row gutter={16} justify=\"space-between\">\r\n\t\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\t\tsm={{\r\n\t\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tmd={{\r\n\t\t\t\t\t\t\t\t\t\tspan: 12,\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tlg={{\r\n\t\t\t\t\t\t\t\t\t\tspan: 6,\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\t\t\tlabel=\"Название проекта\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\t\t\t\trules={[{ required: true, message: 'Введите название!' }]}>\r\n\t\t\t\t\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\t\tsm={{\r\n\t\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tmd={{\r\n\t\t\t\t\t\t\t\t\t\tspan: 12,\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tlg={{\r\n\t\t\t\t\t\t\t\t\t\tspan: 6,\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\t\t\tlabel=\"Таблица\"\r\n\t\t\t\t\t\t\t\t\t\ttooltip={{\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'Указать имя таблицы из БД',\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tname=\"tablename\"\r\n\t\t\t\t\t\t\t\t\t\trules={[{ required: true, message: 'Укажите таблицу!' }]}>\r\n\t\t\t\t\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\t\tsm={{\r\n\t\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tmd={{\r\n\t\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tlg={{\r\n\t\t\t\t\t\t\t\t\t\tspan: 6,\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<Space size=\"large\">\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"oper_available\"\r\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"ЛК оператора\"\r\n\t\t\t\t\t\t\t\t\t\t\tvaluePropName=\"checked\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Switch onChange={handleOperAvailableChange} />\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"client_available\"\r\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"ЛК клиента\"\r\n\t\t\t\t\t\t\t\t\t\t\tvaluePropName=\"checked\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Switch onChange={handleClientAvailableChange} />\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Space>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t<Row gutter={16} justify=\"space-between\">\r\n\t\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\t\tsm={{\r\n\t\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tmd={{\r\n\t\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tlg={{\r\n\t\t\t\t\t\t\t\t\t\tspan: 6,\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\t\t\tlabel=\"Заголовок таблицы\"\r\n\t\t\t\t\t\t\t\t\t\ttooltip={{\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'Через запятую. Пример: ID,Имя,Телефон',\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tname=\"table_header\"\r\n\t\t\t\t\t\t\t\t\t\trules={[\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\tmessage: 'Укажите заголовок таблицы!',\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t]}>\r\n\t\t\t\t\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\t\tsm={{\r\n\t\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tmd={{\r\n\t\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tlg={{\r\n\t\t\t\t\t\t\t\t\t\tspan: 6,\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\t\t\tlabel=\"Строка таблицы\"\r\n\t\t\t\t\t\t\t\t\t\ttooltip={{\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'Поля из таблицы в БД через запятую. Пример: id,name,number',\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tname=\"table_row\"\r\n\t\t\t\t\t\t\t\t\t\trules={[\r\n\t\t\t\t\t\t\t\t\t\t\t{ required: true, message: 'Укажите строку таблицы!' },\r\n\t\t\t\t\t\t\t\t\t\t]}>\r\n\t\t\t\t\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\t\tsm={{\r\n\t\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tmd={{\r\n\t\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tlg={{\r\n\t\t\t\t\t\t\t\t\t\tspan: 6,\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\t\t\tname=\"changes\"\r\n\t\t\t\t\t\t\t\t\t\tlabel=\"Изменения\"\r\n\t\t\t\t\t\t\t\t\t\tvaluePropName=\"checked\">\r\n\t\t\t\t\t\t\t\t\t\t<Switch />\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t<Row gutter={16}>\r\n\t\t\t\t\t\t\t\t{isClientAvailable && (\r\n\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\t\t\t\tsm={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tmd={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tlg={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tspan: 6,\r\n\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Заголовок таблицы в ЛК\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ttooltip={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Через запятую. Пример: ID,Имя,Телефон',\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\tname=\"table_header_client\"\r\n\t\t\t\t\t\t\t\t\t\t\t\trules={[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage: 'Укажите заголовок таблицы!',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t]}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\t\t\t\tsm={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tmd={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tlg={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tspan: 6,\r\n\t\t\t\t\t\t\t\t\t\t\t\toffset: 3,\r\n\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Строка таблицы в ЛК\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ttooltip={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Поля из таблицы в БД через запятую. Пример: id,name,number',\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\tname=\"table_row_client\"\r\n\t\t\t\t\t\t\t\t\t\t\t\trules={[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage: 'Укажите строку таблицы!',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t]}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t{isOperAvailable && (\r\n\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\t\t\t\tsm={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tmd={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tlg={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tspan: 6,\r\n\t\t\t\t\t\t\t\t\t\t\t\toffset: isClientAvailable ? 3 : 0,\r\n\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Form.Item label=\"Ссылка на скрипт\" name=\"scriptlink\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box compact>\r\n\t\t\t\t\t\t<Card title=\"Привязать пользователей\" bordered={false}>\r\n\t\t\t\t\t\t\t<Form.Item>\r\n\t\t\t\t\t\t\t\t<Transfer\r\n\t\t\t\t\t\t\t\t\tclassName=\"transfer-list\"\r\n\t\t\t\t\t\t\t\t\tdataSource={userList?.filter((user) => user.role !== 0) || []}\r\n\t\t\t\t\t\t\t\t\ttitles={['Все', 'Доступен для']}\r\n\t\t\t\t\t\t\t\t\ttargetKeys={targetKeys}\r\n\t\t\t\t\t\t\t\t\tonChange={onUsersChange}\r\n\t\t\t\t\t\t\t\t\tfilterOption={filterOption}\r\n\t\t\t\t\t\t\t\t\trowKey={(record) => record.id}\r\n\t\t\t\t\t\t\t\t\trender={(item) => item.name}\r\n\t\t\t\t\t\t\t\t\tshowSearch\r\n\t\t\t\t\t\t\t\t\toneWay\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t<FormSave loading={isLoading} />\r\n\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Form>\r\n\t\t\t)}\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default EditProject;\r\n","import React from 'react';\r\nimport { Form, Input, Transfer, Col, Row, PageHeader, Switch, Card, Space, message } from 'antd';\r\nimport { useHistory } from 'react-router-dom';\r\nimport api from 'util/api';\r\n//Redux\r\nimport { setUserList } from 'redux/actions/user';\r\nimport { setProjectList } from 'redux/actions/projects';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { Box, FormSave } from 'components';\r\n\r\nconst CreateProject = () => {\r\n\t//Redux\r\n\tconst dispatch = useDispatch();\r\n\tconst { userList } = useSelector(({ user }) => user);\r\n\tconst { projectList } = useSelector(({ projects }) => projects);\r\n\tconst [targetKeys, setTargetKeys] = React.useState([]);\r\n\tconst [isLoading, setIsLoading] = React.useState(false);\r\n\tconst [isClientAvailable, setIsClientAvailable] = React.useState(false);\r\n\tconst [isOperAvailable, setIsOperAvailable] = React.useState(false);\r\n\t// const [form] = Form.useForm();\r\n\tlet history = useHistory();\r\n\r\n\tReact.useEffect(() => {\r\n\t\tif (!userList) {\r\n\t\t\tgetUsers();\r\n\t\t} // eslint-disable-next-line\r\n\t}, []);\r\n\r\n\tconst getUsers = () => {\r\n\t\tapi()\r\n\t\t\t.get('/users')\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tdispatch(setUserList(data));\r\n\t\t\t})\r\n\t\t\t.catch(() => message.error('Ошибка загрузки списка пользователей'));\r\n\t};\r\n\r\n\tconst filterOption = (input, option) =>\r\n\t\toption.name.toLowerCase().indexOf(input.toLowerCase()) > -1;\r\n\r\n\tconst onUsersChange = (nextTargetKeys) => {\r\n\t\tsetTargetKeys(nextTargetKeys);\r\n\t};\r\n\r\n\tconst handleClientAvailableChange = (checked) => {\r\n\t\tsetIsClientAvailable(checked);\r\n\t};\r\n\r\n\tconst handleOperAvailableChange = (checked) => {\r\n\t\tsetIsOperAvailable(checked);\r\n\t};\r\n\r\n\tconst onSuccessProjectCreate = (project) => {\r\n\t\tconst newProjectList = [...projectList, project];\r\n\t\tdispatch(setProjectList(newProjectList));\r\n\t};\r\n\r\n\tconst onFinish = (values) => {\r\n\t\tsetIsLoading(true);\r\n\t\tconst newProject = { ...values, users: targetKeys };\r\n\t\tapi()\r\n\t\t\t.post('/projects', newProject)\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tmessage.success(data.message);\r\n\t\t\t\tonSuccessProjectCreate(data.project);\r\n\t\t\t\t// form.resetFields();\r\n\t\t\t\t// setTargetKeys([]);\r\n\t\t\t\t// setIsClientAvailable(false);\r\n\t\t\t\thistory.push('/projects');\r\n\t\t\t})\r\n\t\t\t.catch(() => message.error('Произошла ошибка при создании проекта'))\r\n\t\t\t.finally(() => setIsLoading(false));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<PageHeader\r\n\t\t\t\tclassName=\"page-header\"\r\n\t\t\t\ttitle=\"Новый проект\"\r\n\t\t\t\tonBack={() => window.history.back()}\r\n\t\t\t/>\r\n\t\t\t<Form\r\n\t\t\t\tname=\"new-project\"\r\n\t\t\t\tonFinish={onFinish}\r\n\t\t\t\tlayout=\"vertical\"\r\n\t\t\t\tinitialValues={{ changes: false, client_available: false, oper_available: false }}\r\n\t\t\t\tautoComplete=\"off\">\r\n\t\t\t\t<Box compact>\r\n\t\t\t\t\t<Card title=\"Основная информация\" bordered={false}>\r\n\t\t\t\t\t\t<Row gutter={16} justify=\"space-between\">\r\n\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\tsm={{\r\n\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tmd={{\r\n\t\t\t\t\t\t\t\t\tspan: 12,\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tlg={{\r\n\t\t\t\t\t\t\t\t\tspan: 6,\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\t\tlabel=\"Название проекта\"\r\n\t\t\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\t\t\trules={[{ required: true, message: 'Введите название!' }]}>\r\n\t\t\t\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\tsm={{\r\n\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tmd={{\r\n\t\t\t\t\t\t\t\t\tspan: 12,\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tlg={{\r\n\t\t\t\t\t\t\t\t\tspan: 6,\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\t\tlabel=\"Таблица\"\r\n\t\t\t\t\t\t\t\t\ttooltip={{\r\n\t\t\t\t\t\t\t\t\t\ttitle: 'Указать имя таблицы из БД',\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tname=\"tablename\"\r\n\t\t\t\t\t\t\t\t\trules={[{ required: true, message: 'Укажите таблицу!' }]}>\r\n\t\t\t\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\tsm={{\r\n\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tmd={{\r\n\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tlg={{\r\n\t\t\t\t\t\t\t\t\tspan: 6,\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<Space size=\"large\">\r\n\t\t\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\t\t\tname=\"oper_available\"\r\n\t\t\t\t\t\t\t\t\t\tlabel=\"ЛК оператора\"\r\n\t\t\t\t\t\t\t\t\t\tvaluePropName=\"checked\">\r\n\t\t\t\t\t\t\t\t\t\t<Switch onChange={handleOperAvailableChange} />\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\t\t\tname=\"client_available\"\r\n\t\t\t\t\t\t\t\t\t\tlabel=\"ЛК клиента\"\r\n\t\t\t\t\t\t\t\t\t\tvaluePropName=\"checked\">\r\n\t\t\t\t\t\t\t\t\t\t<Switch onChange={handleClientAvailableChange} />\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Space>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t<Row gutter={16} justify=\"space-between\">\r\n\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\tsm={{\r\n\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tmd={{\r\n\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tlg={{\r\n\t\t\t\t\t\t\t\t\tspan: 6,\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\t\tlabel=\"Заголовок таблицы\"\r\n\t\t\t\t\t\t\t\t\ttooltip={{\r\n\t\t\t\t\t\t\t\t\t\ttitle: 'Через запятую. Пример: ID,Имя,Телефон',\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tname=\"table_header\"\r\n\t\t\t\t\t\t\t\t\trules={[\r\n\t\t\t\t\t\t\t\t\t\t{ required: true, message: 'Укажите заголовок таблицы!' },\r\n\t\t\t\t\t\t\t\t\t]}>\r\n\t\t\t\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\tsm={{\r\n\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tmd={{\r\n\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tlg={{\r\n\t\t\t\t\t\t\t\t\tspan: 6,\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\t\tlabel=\"Строка таблицы\"\r\n\t\t\t\t\t\t\t\t\ttooltip={{\r\n\t\t\t\t\t\t\t\t\t\ttitle: 'Поля из таблицы в БД через запятую. Пример: id,name,number',\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tname=\"table_row\"\r\n\t\t\t\t\t\t\t\t\trules={[\r\n\t\t\t\t\t\t\t\t\t\t{ required: true, message: 'Укажите строку таблицы!' },\r\n\t\t\t\t\t\t\t\t\t]}>\r\n\t\t\t\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\tsm={{\r\n\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tmd={{\r\n\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tlg={{\r\n\t\t\t\t\t\t\t\t\tspan: 6,\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<Form.Item name=\"changes\" label=\"Изменения\" valuePropName=\"checked\">\r\n\t\t\t\t\t\t\t\t\t<Switch />\r\n\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t<Row gutter={16}>\r\n\t\t\t\t\t\t\t{isClientAvailable && (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\t\t\tsm={{\r\n\t\t\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tmd={{\r\n\t\t\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tlg={{\r\n\t\t\t\t\t\t\t\t\t\t\tspan: 6,\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Заголовок таблицы в ЛК\"\r\n\t\t\t\t\t\t\t\t\t\t\ttooltip={{\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Через запятую. Пример: ID,Имя,Телефон',\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"table_header_client\"\r\n\t\t\t\t\t\t\t\t\t\t\trules={[\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessage: 'Укажите заголовок таблицы!',\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t]}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\t\t\tsm={{\r\n\t\t\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tmd={{\r\n\t\t\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tlg={{\r\n\t\t\t\t\t\t\t\t\t\t\tspan: 6,\r\n\t\t\t\t\t\t\t\t\t\t\toffset: 3,\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Строка таблицы в ЛК\"\r\n\t\t\t\t\t\t\t\t\t\t\ttooltip={{\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Поля из таблицы в БД через запятую. Пример: id,name,number',\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"table_row_client\"\r\n\t\t\t\t\t\t\t\t\t\t\trules={[\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessage: 'Укажите строку таблицы!',\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t]}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{isOperAvailable && (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\t\t\tsm={{\r\n\t\t\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tmd={{\r\n\t\t\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tlg={{\r\n\t\t\t\t\t\t\t\t\t\t\tspan: 6,\r\n\t\t\t\t\t\t\t\t\t\t\toffset: isClientAvailable ? 3 : 0,\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item label=\"Ссылка на скрипт\" name=\"scriptlink\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box compact>\r\n\t\t\t\t\t<Card title=\"Привязать пользователей\" bordered={false}>\r\n\t\t\t\t\t\t<Form.Item>\r\n\t\t\t\t\t\t\t<Transfer\r\n\t\t\t\t\t\t\t\tclassName=\"transfer-list\"\r\n\t\t\t\t\t\t\t\tdataSource={userList?.filter((user) => user.role !== 0) || []}\r\n\t\t\t\t\t\t\t\ttitles={['Все', 'Доступен для']}\r\n\t\t\t\t\t\t\t\ttargetKeys={targetKeys}\r\n\t\t\t\t\t\t\t\tonChange={onUsersChange}\r\n\t\t\t\t\t\t\t\tfilterOption={filterOption}\r\n\t\t\t\t\t\t\t\trowKey={(record) => record.id}\r\n\t\t\t\t\t\t\t\trender={(item) => item.name}\r\n\t\t\t\t\t\t\t\tshowSearch\r\n\t\t\t\t\t\t\t\toneWay\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t<FormSave loading={isLoading} />\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t</Box>\r\n\t\t\t</Form>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default CreateProject;\r\n","import React from 'react';\r\nimport api from 'util/api';\r\nimport { Table, Space, Button, Popconfirm, Divider, PageHeader, message } from 'antd';\r\nimport { Link } from 'react-router-dom';\r\nimport {\r\n\tCheckCircleTwoTone,\r\n\tCloseCircleTwoTone,\r\n\tEditTwoTone,\r\n\tDeleteTwoTone,\r\n} from '@ant-design/icons';\r\nimport { Box, BoxTitle, ResourceLoader } from 'components';\r\n//Redux\r\nimport { setProjectList } from 'redux/actions/projects';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nconst Project = () => {\r\n\t//Redux\r\n\tconst dispatch = useDispatch();\r\n\tconst { projectList } = useSelector(({ projects }) => projects);\r\n\tconst [isLoading, setIsLoading] = React.useState(false);\r\n\tconst [isProjectReload, setIsProjectReload] = React.useState(false);\r\n\tconst [searchValue, setSearchValue] = React.useState('');\r\n\r\n\tReact.useEffect(() => {\r\n\t\tif (!projectList) {\r\n\t\t\tsetIsLoading(true);\r\n\t\t\tgetProjects();\r\n\t\t} // eslint-disable-next-line\r\n\t}, []);\r\n\r\n\tconst getProjects = () => {\r\n\t\tapi()\r\n\t\t\t.get('/projects')\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tdispatch(setProjectList(data));\r\n\t\t\t})\r\n\t\t\t.catch(() => message.error('Ошибка при загрузке списка проектов'))\r\n\t\t\t.finally(() => {\r\n\t\t\t\tsetIsLoading(false);\r\n\t\t\t\tsetIsProjectReload(false);\r\n\t\t\t});\r\n\t};\r\n\r\n\tconst onProjectListReload = () => {\r\n\t\tsetIsProjectReload(true);\r\n\t\tgetProjects();\r\n\t};\r\n\r\n\tconst onDeleteProject = (_, projectId) => {\r\n\t\tapi()\r\n\t\t\t.delete(`/projects/${projectId}`)\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tconst newProjectList = projectList.filter((project) => project.id !== projectId);\r\n\t\t\t\tdispatch(setProjectList(newProjectList));\r\n\t\t\t\tmessage.success(data.message);\r\n\t\t\t})\r\n\t\t\t.catch(() => message.error('Ошибка при удалении проекта'));\r\n\t};\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'Проект',\r\n\t\t\tdataIndex: 'name',\r\n\t\t\tkey: 'name',\r\n\t\t\tellipsis: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Таблица',\r\n\t\t\tdataIndex: 'tablename',\r\n\t\t\tkey: 'tablename',\r\n\t\t\tellipsis: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Заголовок таблицы',\r\n\t\t\tdataIndex: 'table_header',\r\n\t\t\tkey: 'table_header',\r\n\t\t\tellipsis: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Строка таблицы',\r\n\t\t\tdataIndex: 'table_row',\r\n\t\t\tkey: 'table_row',\r\n\t\t\tellipsis: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Изменения',\r\n\t\t\tdataIndex: 'changes',\r\n\t\t\twidth: 120,\r\n\t\t\tkey: 'changes',\r\n\t\t\talign: 'center',\r\n\t\t\trender: (changes) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t{changes ? (\r\n\t\t\t\t\t\t\t<CheckCircleTwoTone\r\n\t\t\t\t\t\t\t\ttwoToneColor=\"#52c41a\"\r\n\t\t\t\t\t\t\t\tstyle={{ fontSize: '16px' }}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<CloseCircleTwoTone\r\n\t\t\t\t\t\t\t\ttwoToneColor=\"#f5222d\"\r\n\t\t\t\t\t\t\t\tstyle={{ fontSize: '16px' }}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</>\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'ЛК клиента',\r\n\t\t\tdataIndex: 'client_available',\r\n\t\t\twidth: 120,\r\n\t\t\tkey: 'client_available',\r\n\t\t\talign: 'center',\r\n\t\t\trender: (client_available) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t{client_available ? (\r\n\t\t\t\t\t\t\t<CheckCircleTwoTone\r\n\t\t\t\t\t\t\t\ttwoToneColor=\"#52c41a\"\r\n\t\t\t\t\t\t\t\tstyle={{ fontSize: '16px' }}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<CloseCircleTwoTone\r\n\t\t\t\t\t\t\t\ttwoToneColor=\"#f5222d\"\r\n\t\t\t\t\t\t\t\tstyle={{ fontSize: '16px' }}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</>\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'ЛК оператора',\r\n\t\t\tdataIndex: 'oper_available',\r\n\t\t\twidth: 120,\r\n\t\t\tkey: 'oper_available',\r\n\t\t\talign: 'center',\r\n\t\t\trender: (oper_available) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t{oper_available ? (\r\n\t\t\t\t\t\t\t<CheckCircleTwoTone\r\n\t\t\t\t\t\t\t\ttwoToneColor=\"#52c41a\"\r\n\t\t\t\t\t\t\t\tstyle={{ fontSize: '16px' }}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<CloseCircleTwoTone\r\n\t\t\t\t\t\t\t\ttwoToneColor=\"#f5222d\"\r\n\t\t\t\t\t\t\t\tstyle={{ fontSize: '16px' }}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</>\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '#',\r\n\t\t\tkey: 'action',\r\n\t\t\twidth: 103,\r\n\t\t\talign: 'center',\r\n\t\t\trender: (_, record) => (\r\n\t\t\t\t<Space size=\"small\" split={<Divider type=\"vertical\" />}>\r\n\t\t\t\t\t<Link to={`/projects/${record.id}/edit`}>\r\n\t\t\t\t\t\t<EditTwoTone style={{ fontSize: '20px' }} />\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t<Popconfirm\r\n\t\t\t\t\t\ttitle=\"Вы уверены, что хотите удалить проект?\"\r\n\t\t\t\t\t\tonConfirm={(e) => onDeleteProject(e, record.id)}\r\n\t\t\t\t\t\tplacement=\"topRight\"\r\n\t\t\t\t\t\tokText=\"Да\"\r\n\t\t\t\t\t\tcancelText=\"Отмена\">\r\n\t\t\t\t\t\t<Button type=\"link\" className=\"btn-link\">\r\n\t\t\t\t\t\t\t<DeleteTwoTone twoToneColor=\"#f5222d\" style={{ fontSize: '20px' }} />\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t</Space>\r\n\t\t\t),\r\n\t\t},\r\n\t];\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<PageHeader className=\"page-header\" title=\"Управление проектами\" />\r\n\t\t\t<Box>\r\n\t\t\t\t{isLoading ? (\r\n\t\t\t\t\t<ResourceLoader />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<BoxTitle\r\n\t\t\t\t\t\t\ttext=\"Проекты\"\r\n\t\t\t\t\t\t\tlinkText=\"Создать проект\"\r\n\t\t\t\t\t\t\tpath=\"/projects/create\"\r\n\t\t\t\t\t\t\tonReload={onProjectListReload}\r\n\t\t\t\t\t\t\tspin={isProjectReload}\r\n\t\t\t\t\t\t\tresourceCount={projectList?.length}\r\n\t\t\t\t\t\t\tonSearch={(value) => setSearchValue(value)}\r\n\t\t\t\t\t\t\treloadable\r\n\t\t\t\t\t\t\tsearchable\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Table\r\n\t\t\t\t\t\t\tstyle={{ width: '100%' }}\r\n\t\t\t\t\t\t\trowKey={(record) => record.id}\r\n\t\t\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\t\t\tloading={isProjectReload}\r\n\t\t\t\t\t\t\tdataSource={projectList?.filter((project) =>\r\n\t\t\t\t\t\t\t\tproject.name.toLowerCase().includes(searchValue.toLowerCase()),\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\tpagination={{\r\n\t\t\t\t\t\t\t\thideOnSinglePage: true,\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</Box>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default Project;\r\n","const roles = [\r\n\t{ label: 'Админ', value: 0 },\r\n\t{ label: 'Супервайзер', value: 1 },\r\n\t{ label: 'Старший оператор', value: 2 },\r\n];\r\n\r\nexport default roles;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport api from 'util/api';\r\nimport roles from 'util/roles';\r\nimport { Table, Space, Tag, Button, PageHeader, Popconfirm, Tooltip, message } from 'antd';\r\nimport { KeyOutlined, EditTwoTone, DeleteTwoTone } from '@ant-design/icons';\r\nimport { Box, BoxTitle, ResourceLoader } from 'components';\r\n//Redux\r\nimport { setUserList } from 'redux/actions/user';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nconst User = () => {\r\n\t//Redux\r\n\tconst dispatch = useDispatch();\r\n\tconst { userList } = useSelector(({ user }) => user);\r\n\tconst [isLoading, setIsLoading] = React.useState(false);\r\n\tconst [isUserReload, setIsUserReload] = React.useState(false);\r\n\r\n\tReact.useEffect(() => {\r\n\t\tif (!userList) {\r\n\t\t\tsetIsLoading(true);\r\n\t\t\tgetUsers();\r\n\t\t} // eslint-disable-next-line\r\n\t}, []);\r\n\r\n\tconst getUsers = () => {\r\n\t\tapi()\r\n\t\t\t.get('/users')\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tdispatch(setUserList(data));\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tsetIsLoading(false);\r\n\t\t\t\tsetIsUserReload(false);\r\n\t\t\t});\r\n\t};\r\n\r\n\tconst onUserListReload = () => {\r\n\t\tsetIsUserReload(true);\r\n\t\tgetUsers();\r\n\t};\r\n\r\n\tconst onDeleteUser = (_, userId) => {\r\n\t\tapi()\r\n\t\t\t.delete(`/users/${userId}`)\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tconst newUserList = userList.filter((user) => user.id !== userId);\r\n\t\t\t\tdispatch(setUserList(newUserList));\r\n\t\t\t\tmessage.success(data.message);\r\n\t\t\t})\r\n\t\t\t.catch(() => message.error('Ошибка при удалении пользователя'));\r\n\t};\r\n\r\n\tconst onResetPassword = (userId) => {\r\n\t\tconst newPwd = prompt('Введите новый пароль');\r\n\r\n\t\tif (newPwd) {\r\n\t\t\tapi()\r\n\t\t\t\t.patch(`/user/changepwd`, { userid: userId, password: newPwd })\r\n\t\t\t\t.then(({ data }) => {\r\n\t\t\t\t\tmessage.success(data.message);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => message.error('Ошибка при смене пароля'));\r\n\t\t}\r\n\t};\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'Пользователь',\r\n\t\t\tdataIndex: 'name',\r\n\t\t\tkey: 'name',\r\n\t\t\trender: (_, record) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t{record.role === 0 || record.role === 1 ? (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t{record.name} <Tag>{roles[record.role].label}</Tag>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\trecord.name\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</>\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Логин',\r\n\t\t\tdataIndex: 'username',\r\n\t\t\tkey: 'username',\r\n\t\t\tellipsis: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '#',\r\n\t\t\tkey: 'action',\r\n\t\t\twidth: 130,\r\n\t\t\talign: 'center',\r\n\t\t\trender: (_, record) => (\r\n\t\t\t\t<Space size=\"middle\">\r\n\t\t\t\t\t<Link to={`/users/${record.id}/edit`}>\r\n\t\t\t\t\t\t<EditTwoTone style={{ fontSize: '20px' }} />\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t<Popconfirm\r\n\t\t\t\t\t\ttitle=\"Вы уверены, что хотите удалить пользователя?\"\r\n\t\t\t\t\t\tonConfirm={(e) => onDeleteUser(e, record.id)}\r\n\t\t\t\t\t\tplacement=\"topRight\"\r\n\t\t\t\t\t\tokText=\"Да\"\r\n\t\t\t\t\t\tcancelText=\"Отмена\">\r\n\t\t\t\t\t\t<Button type=\"link\" className=\"btn-link\">\r\n\t\t\t\t\t\t\t<DeleteTwoTone twoToneColor=\"#f5222d\" style={{ fontSize: '20px' }} />\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t<Tooltip title=\"Смена пароля\">\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\ttype=\"link\"\r\n\t\t\t\t\t\t\tclassName=\"btn-link\"\r\n\t\t\t\t\t\t\tonClick={() => onResetPassword(record.id)}>\r\n\t\t\t\t\t\t\t<KeyOutlined style={{ fontSize: '20px' }} />\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t</Space>\r\n\t\t\t),\r\n\t\t},\r\n\t];\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<PageHeader className=\"page-header\" title=\"Управление пользователями\" />\r\n\t\t\t<Box>\r\n\t\t\t\t{isLoading ? (\r\n\t\t\t\t\t<ResourceLoader />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<BoxTitle\r\n\t\t\t\t\t\t\ttext=\"Пользователи\"\r\n\t\t\t\t\t\t\tlinkText=\"Создать пользователя\"\r\n\t\t\t\t\t\t\tpath=\"/users/create\"\r\n\t\t\t\t\t\t\tonReload={onUserListReload}\r\n\t\t\t\t\t\t\tresourceCount={userList?.length}\r\n\t\t\t\t\t\t\tspin={isUserReload}\r\n\t\t\t\t\t\t\treloadable\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Table\r\n\t\t\t\t\t\t\tstyle={{ width: '100%' }}\r\n\t\t\t\t\t\t\trowKey={(record) => record.id}\r\n\t\t\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\t\t\tloading={isUserReload}\r\n\t\t\t\t\t\t\tdataSource={userList}\r\n\t\t\t\t\t\t\tpagination={{ hideOnSinglePage: true }}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</Box>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default User;\r\n","import React from 'react';\r\nimport { Form, Input, Select, Transfer, PageHeader, Card, Row, Col, message } from 'antd';\r\nimport { useHistory } from 'react-router-dom';\r\nimport api from 'util/api';\r\nimport roles from 'util/roles';\r\n//Redux\r\nimport { setUserList } from 'redux/actions/user';\r\nimport { setProjectList } from 'redux/actions/projects';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { Box, FormSave } from 'components';\r\n\r\nconst User = () => {\r\n\t//Redux\r\n\tconst dispatch = useDispatch();\r\n\tconst { userList } = useSelector(({ user }) => user);\r\n\tconst { projectList } = useSelector(({ projects }) => projects);\r\n\r\n\tconst [isLoading, setIsLoading] = React.useState(false);\r\n\tconst [targetKeys, setTargetKeys] = React.useState([]);\r\n\tconst [isRoleAdmin, setIsRoleAdmin] = React.useState(false);\r\n\r\n\tlet history = useHistory();\r\n\r\n\tReact.useEffect(() => {\r\n\t\tif (!projectList) {\r\n\t\t\tgetProjects();\r\n\t\t} // eslint-disable-next-line\r\n\t}, []);\r\n\r\n\tconst getProjects = () => {\r\n\t\tapi()\r\n\t\t\t.get('/projects')\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tdispatch(setProjectList(data));\r\n\t\t\t})\r\n\t\t\t.catch(() => message.error('Ошибка при загрузке списка проектов'));\r\n\t};\r\n\r\n\tconst handleRoleChange = (value) => {\r\n\t\tconst isAdmin = value === 0;\r\n\t\tisAdmin ? setIsRoleAdmin(true) : setIsRoleAdmin(false);\r\n\t};\r\n\r\n\tconst filterOption = (input, option) =>\r\n\t\toption.name.toLowerCase().indexOf(input.toLowerCase()) > -1;\r\n\r\n\tconst onProjectChange = (nextTargetKeys) => {\r\n\t\tsetTargetKeys(nextTargetKeys);\r\n\t};\r\n\r\n\tconst onSuccessUserCreate = (user) => {\r\n\t\tconst newUserList = [...userList, user];\r\n\t\tdispatch(setUserList(newUserList));\r\n\t};\r\n\r\n\tconst onFinish = (values) => {\r\n\t\tsetIsLoading(true);\r\n\t\tconst newUser = { ...values, projects: isRoleAdmin ? [] : targetKeys };\r\n\r\n\t\tapi()\r\n\t\t\t.post('/users', newUser)\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tmessage.success(data.message);\r\n\t\t\t\tonSuccessUserCreate(data.user);\r\n\t\t\t\thistory.push('/users');\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\tmessage.error('Произошла ошибка');\r\n\t\t\t})\r\n\t\t\t.finally(() => setIsLoading(false));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<PageHeader\r\n\t\t\t\tclassName=\"page-header\"\r\n\t\t\t\ttitle=\"Новый пользователь\"\r\n\t\t\t\tonBack={() => window.history.back()}\r\n\t\t\t/>\r\n\t\t\t<Form name=\"new-user\" onFinish={onFinish} layout=\"vertical\" autoComplete=\"off\">\r\n\t\t\t\t<Box compact>\r\n\t\t\t\t\t<Card title=\"Основная информация\" bordered={false}>\r\n\t\t\t\t\t\t<Row gutter={16} justify=\"space-between\">\r\n\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\tsm={{\r\n\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tmd={{\r\n\t\t\t\t\t\t\t\t\tspan: 12,\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tlg={{\r\n\t\t\t\t\t\t\t\t\tspan: 5,\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\t\tlabel=\"Имя\"\r\n\t\t\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\t\t\trules={[{ required: true, message: 'Введите имя!' }]}>\r\n\t\t\t\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\tsm={{\r\n\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tmd={{\r\n\t\t\t\t\t\t\t\t\tspan: 12,\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tlg={{\r\n\t\t\t\t\t\t\t\t\tspan: 5,\r\n\t\t\t\t\t\t\t\t\toffset: 1,\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\t\tlabel=\"Логин\"\r\n\t\t\t\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\t\t\t\trules={[{ required: true, message: 'Введите логин!' }]}>\r\n\t\t\t\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\tsm={{\r\n\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tmd={{\r\n\t\t\t\t\t\t\t\t\tspan: 12,\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tlg={{\r\n\t\t\t\t\t\t\t\t\tspan: 5,\r\n\t\t\t\t\t\t\t\t\toffset: 1,\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\t\tlabel=\"Пароль\"\r\n\t\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\t\trules={[{ required: true, message: 'Введите пароль!' }]}>\r\n\t\t\t\t\t\t\t\t\t<Input.Password />\r\n\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\tsm={{\r\n\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tmd={{\r\n\t\t\t\t\t\t\t\t\tspan: 12,\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tlg={{\r\n\t\t\t\t\t\t\t\t\tspan: 5,\r\n\t\t\t\t\t\t\t\t\toffset: 1,\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\t\tlabel=\"Роль\"\r\n\t\t\t\t\t\t\t\t\tname=\"role\"\r\n\t\t\t\t\t\t\t\t\trules={[{ required: true, message: 'Укажите роль!' }]}>\r\n\t\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Роль\"\r\n\t\t\t\t\t\t\t\t\t\toptions={roles}\r\n\t\t\t\t\t\t\t\t\t\tonChange={handleRoleChange}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t</Box>\r\n\t\t\t\t{!isRoleAdmin && (\r\n\t\t\t\t\t<Box compact>\r\n\t\t\t\t\t\t<Card title=\"Привязать проекты\" bordered={false}>\r\n\t\t\t\t\t\t\t<Form.Item>\r\n\t\t\t\t\t\t\t\t<Transfer\r\n\t\t\t\t\t\t\t\t\tclassName=\"transfer-list\"\r\n\t\t\t\t\t\t\t\t\tdataSource={projectList || []}\r\n\t\t\t\t\t\t\t\t\ttitles={['Все', 'Доступные']}\r\n\t\t\t\t\t\t\t\t\ttargetKeys={targetKeys}\r\n\t\t\t\t\t\t\t\t\tonChange={onProjectChange}\r\n\t\t\t\t\t\t\t\t\tfilterOption={filterOption}\r\n\t\t\t\t\t\t\t\t\trowKey={(record) => record.id}\r\n\t\t\t\t\t\t\t\t\trender={(item) => item.name}\r\n\t\t\t\t\t\t\t\t\tshowSearch\r\n\t\t\t\t\t\t\t\t\toneWay\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t<FormSave loading={isLoading} />\r\n\t\t\t</Form>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default User;\r\n","import React from 'react';\r\nimport { useParams, useHistory } from 'react-router-dom';\r\nimport { Form, Input, Select, PageHeader, Card, Row, Col, Transfer, message } from 'antd';\r\nimport api from 'util/api';\r\nimport roles from 'util/roles';\r\nimport { Box, Loader, FormSave } from 'components';\r\n//Redux\r\nimport { setUserList } from 'redux/actions/user';\r\nimport { setProjectList } from 'redux/actions/projects';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nconst EditUser = () => {\r\n\t//Redux\r\n\tconst dispatch = useDispatch();\r\n\tconst { userList } = useSelector(({ user }) => user);\r\n\tconst { projectList } = useSelector(({ projects }) => projects);\r\n\r\n\tconst [isLoadingPage, setIsLoadingPage] = React.useState(true);\r\n\tconst [isLoading, setIsLoading] = React.useState(false);\r\n\tconst [initValues, setInitValues] = React.useState({});\r\n\tconst [targetKeys, setTargetKeys] = React.useState([]);\r\n\tconst [isRoleAdmin, setIsRoleAdmin] = React.useState(false);\r\n\tconst { id } = useParams();\r\n\tlet history = useHistory();\r\n\r\n\tReact.useEffect(() => {\r\n\t\tapi()\r\n\t\t\t.get(`/users/${id}/edit`)\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tsetInitValues(data);\r\n\t\t\t\tif (data.role === 0) {\r\n\t\t\t\t\tsetIsRoleAdmin(true);\r\n\t\t\t\t}\r\n\t\t\t\tconst availableProjects = data.projects.map((project) => project.id);\r\n\t\t\t\tsetTargetKeys(availableProjects);\r\n\t\t\t})\r\n\t\t\t.catch(() => message.error('Ошибка получения пользовательскх данных'))\r\n\t\t\t.finally(() => {\r\n\t\t\t\tsetIsLoadingPage(false);\r\n\t\t\t});\r\n\t}, [id]);\r\n\r\n\tReact.useEffect(() => {\r\n\t\tif (!projectList) {\r\n\t\t\tgetProjects();\r\n\t\t} // eslint-disable-next-line\r\n\t}, []);\r\n\r\n\tconst getProjects = () => {\r\n\t\tapi()\r\n\t\t\t.get('/projects')\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tdispatch(setProjectList(data));\r\n\t\t\t})\r\n\t\t\t.catch(() => message.error('Ошибка при загрузке списка проектов'));\r\n\t};\r\n\r\n\tconst handleRoleChange = (value) => {\r\n\t\tconst isAdmin = value === 0;\r\n\t\tisAdmin ? setIsRoleAdmin(true) : setIsRoleAdmin(false);\r\n\t};\r\n\r\n\tconst filterOption = (input, option) =>\r\n\t\toption.name.toLowerCase().indexOf(input.toLowerCase()) > -1;\r\n\r\n\tconst onProjectChange = (nextTargetKeys) => {\r\n\t\tsetTargetKeys(nextTargetKeys);\r\n\t};\r\n\r\n\tconst onSuccessUserEdit = (updatedUser) => {\r\n\t\tconst newUserList = userList.map((user) => {\r\n\t\t\tif (user.id === updatedUser.id) {\r\n\t\t\t\treturn updatedUser;\r\n\t\t\t}\r\n\t\t\treturn user;\r\n\t\t});\r\n\t\tdispatch(setUserList(newUserList));\r\n\t};\r\n\r\n\tconst onFinish = (values) => {\r\n\t\tsetIsLoading(true);\r\n\t\tconst newUser = { ...values, projects: isRoleAdmin ? [] : targetKeys };\r\n\t\tapi()\r\n\t\t\t.put(`/users/${id}`, newUser)\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tmessage.success(data.message);\r\n\t\t\t\tonSuccessUserEdit(data.user);\r\n\t\t\t\thistory.push('/users');\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\tmessage.error('Произошла ошибка');\r\n\t\t\t})\r\n\t\t\t.finally(() => setIsLoading(false));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<PageHeader\r\n\t\t\t\tclassName=\"page-header\"\r\n\t\t\t\ttitle=\"Редактирование пользователя\"\r\n\t\t\t\tonBack={() => window.history.back()}\r\n\t\t\t/>\r\n\t\t\t{isLoadingPage ? (\r\n\t\t\t\t<Loader />\r\n\t\t\t) : (\r\n\t\t\t\t<Form\r\n\t\t\t\t\tname=\"edit-user\"\r\n\t\t\t\t\tonFinish={onFinish}\r\n\t\t\t\t\tlayout=\"vertical\"\r\n\t\t\t\t\tinitialValues={initValues}\r\n\t\t\t\t\tautoComplete=\"off\">\r\n\t\t\t\t\t<Box compact>\r\n\t\t\t\t\t\t<Card title=\"Основная информация\" bordered={false}>\r\n\t\t\t\t\t\t\t<Row gutter={16} justify=\"space-between\">\r\n\t\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\t\tsm={{\r\n\t\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tmd={{\r\n\t\t\t\t\t\t\t\t\t\tspan: 12,\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tlg={{\r\n\t\t\t\t\t\t\t\t\t\tspan: 6,\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\t\t\tlabel=\"Имя\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\t\t\t\trules={[{ required: true, message: 'Введите имя!' }]}>\r\n\t\t\t\t\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\t\tsm={{\r\n\t\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tmd={{\r\n\t\t\t\t\t\t\t\t\t\tspan: 12,\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tlg={{\r\n\t\t\t\t\t\t\t\t\t\tspan: 6,\r\n\t\t\t\t\t\t\t\t\t\toffset: 3,\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\t\t\tlabel=\"Логин\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\t\t\t\t\trules={[{ required: true, message: 'Введите логин!' }]}>\r\n\t\t\t\t\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\t\tsm={{\r\n\t\t\t\t\t\t\t\t\t\tspan: 24,\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tmd={{\r\n\t\t\t\t\t\t\t\t\t\tspan: 12,\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tlg={{\r\n\t\t\t\t\t\t\t\t\t\tspan: 6,\r\n\t\t\t\t\t\t\t\t\t\toffset: 3,\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\t\t\tlabel=\"Роль\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"role\"\r\n\t\t\t\t\t\t\t\t\t\trules={[{ required: true, message: 'Укажите роль!' }]}>\r\n\t\t\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Роль\"\r\n\t\t\t\t\t\t\t\t\t\t\toptions={roles}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={handleRoleChange}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t{!isRoleAdmin && (\r\n\t\t\t\t\t\t<Box compact>\r\n\t\t\t\t\t\t\t<Card title=\"Привязать проекты\" bordered={false}>\r\n\t\t\t\t\t\t\t\t<Form.Item>\r\n\t\t\t\t\t\t\t\t\t<Transfer\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"transfer-list\"\r\n\t\t\t\t\t\t\t\t\t\tdataSource={projectList || []}\r\n\t\t\t\t\t\t\t\t\t\ttitles={['Все', 'Доступные']}\r\n\t\t\t\t\t\t\t\t\t\ttargetKeys={targetKeys}\r\n\t\t\t\t\t\t\t\t\t\tonChange={onProjectChange}\r\n\t\t\t\t\t\t\t\t\t\tfilterOption={filterOption}\r\n\t\t\t\t\t\t\t\t\t\trowKey={(record) => record.id}\r\n\t\t\t\t\t\t\t\t\t\trender={(item) => item.name}\r\n\t\t\t\t\t\t\t\t\t\tshowSearch\r\n\t\t\t\t\t\t\t\t\t\toneWay\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<FormSave loading={isLoading} />\r\n\t\t\t\t</Form>\r\n\t\t\t)}\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default EditUser;\r\n","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Form, Input, Button, message } from 'antd';\r\nimport { UserOutlined, LockOutlined } from '@ant-design/icons';\r\nimport api from 'util/api';\r\n//Redux\r\nimport { useDispatch } from 'react-redux';\r\nimport { setUserInfo } from 'redux/actions/user';\r\n\r\nconst Login = ({ onLogin }) => {\r\n\tconst [isLoading, setIsLoading] = React.useState(false);\r\n\tconst dispatch = useDispatch();\r\n\r\n\tlet history = useHistory();\r\n\r\n\tconst onFinish = (values) => {\r\n\t\tsetIsLoading(true);\r\n\t\tapi()\r\n\t\t\t.get('/csrf-cookie')\r\n\t\t\t.then(() => {\r\n\t\t\t\tapi()\r\n\t\t\t\t\t.post('/login', values)\r\n\t\t\t\t\t.then(({ data }) => {\r\n\t\t\t\t\t\tlocalStorage.setItem('auth_name', data.name);\r\n\t\t\t\t\t\tdispatch(setUserInfo(data));\r\n\t\t\t\t\t\tonLogin();\r\n\t\t\t\t\t\thistory.push('/');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((error) => message.error(error.response.data.message));\r\n\t\t\t})\r\n\t\t\t.finally(() => setIsLoading(false));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"login\">\r\n\t\t\t<Form className=\"login-form\" onFinish={onFinish} autoComplete=\"off\" size=\"large\">\r\n\t\t\t\t<Form.Item\r\n\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\trules={[\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tmessage: 'Введите логин!',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t]}>\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tprefix={<UserOutlined className=\"site-form-item-icon\" />}\r\n\t\t\t\t\t\tplaceholder=\"Логин\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t<Form.Item\r\n\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\trules={[\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tmessage: 'Введите пароль!',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t]}>\r\n\t\t\t\t\t<Input.Password\r\n\t\t\t\t\t\tprefix={<LockOutlined className=\"site-form-item-icon\" />}\r\n\t\t\t\t\t\tplaceholder=\"Пароль\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t<Form.Item>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\thtmlType=\"submit\"\r\n\t\t\t\t\t\tclassName=\"login-form-button\"\r\n\t\t\t\t\t\tloading={isLoading}>\r\n\t\t\t\t\t\tВойти\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t</Form>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Login;\r\n","import React from 'react';\r\nimport { Login, Home } from 'pages';\r\nimport api from 'util/api';\r\n//Redux\r\nimport { useDispatch } from 'react-redux';\r\nimport { setUserInfo } from 'redux/actions/user';\r\n\r\nimport { AuthLoader } from 'components';\r\n\r\nimport './App.css';\r\n\r\nconst App = () => {\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst [isLoggedin, setIsLoggedin] = React.useState(false);\r\n\tconst [checkAuth, setCheckAuth] = React.useState(false);\r\n\r\n\tconst handleSuccessLogin = () => {\r\n\t\tsetIsLoggedin(true);\r\n\t};\r\n\r\n\tconst handleSuccessLogout = () => {\r\n\t\tsetIsLoggedin(false);\r\n\t};\r\n\r\n\tReact.useEffect(() => {\r\n\t\tapi()\r\n\t\t\t.post('me')\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tdispatch(setUserInfo(data));\r\n\t\t\t\tsetCheckAuth(true);\r\n\t\t\t\tsetIsLoggedin(true);\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\tsetCheckAuth(true);\r\n\t\t\t\tsetIsLoggedin(false);\r\n\t\t\t}); // eslint-disable-next-line\r\n\t}, []);\r\n\r\n\tif (!isLoggedin) {\r\n\t\tif (checkAuth) {\r\n\t\t\treturn <Login onLogin={handleSuccessLogin} />;\r\n\t\t}\r\n\t\treturn <AuthLoader />;\r\n\t}\r\n\r\n\treturn <Home onSuccessLogout={handleSuccessLogout} />;\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport store from './redux/store';\nimport { ConfigProvider } from 'antd';\nimport ruRU from 'antd/lib/locale/ru_RU';\nimport App from './App';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<ConfigProvider locale={ruRU}>\n\t\t\t<Router>\n\t\t\t\t<Provider store={store}>\n\t\t\t\t\t<App />\n\t\t\t\t</Provider>\n\t\t\t</Router>\n\t\t</ConfigProvider>\n\t</React.StrictMode>,\n\tdocument.getElementById('root'),\n);\n"],"sourceRoot":""}